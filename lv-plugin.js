(function(){var t;window.performance||(window.performance={});window.performance.now||(window.performance.now=function(){return performance.now||performance.Vl||performance.Wl||performance.Yl||performance.webkitNow||function(){return(new Date).getTime()}}());window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame);window.cancelRequestAnimationFrame||(window.cancelRequestAnimationFrame=
window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame);window.Uint8Array?window.typedArrays=!0:(window.typedArrays=!1,window.Uint8Array=Array);window.Uint8ClampedArray||(window.Uint8ClampedArray=window.Uint8Array);window.Uint16Array||(window.Uint16Array=Array);window.Uint32Array||(window.Uint32Array=Array);Array.Ba=function(l,b,k){var B=null,u=null,r=0,B=0,e=[];if(0!==k){if(r<l){for(u=new Uint8Array(b);B<
b;)u[B]=k,B+=1;e[r]=u;for(r+=1;r<l;)B=new Uint8Array(b),B.set(u),e[r]=B,r+=1}}else for(;r<l;)B=new Uint8Array(b),e[r]=B,r+=1;return e};Array.nb=function(l,b){for(var k=null,B=0,u=[];B<l;)k=new Uint16Array(b),u[B]=k,B+=1;return u};Array.zb=function(l,b){for(var k=0,B=l.length;k<B;)b[k].set(l[k]),k+=1};t=new Uint32Array(1);t[0]=4660;52===(new Uint8Array(t.buffer))[0]?window.littleEndian=!0:window.littleEndian=!1;window.registerEvent=function(l,b,k,B){l.addEventListener?l.addEventListener(b,k,B):l.attachEvent("on"+
b,k)}})();(function(){function t(e,b,f,h,a){this.h=a;this.Dh=e;this.Eh=b;this.bj=f;this.message="";this.kh=e;this.lh=b;this.Di=f;this.Ac="";this.c=h;this.Dl=!1;this.mh=this.startTime=0;this.Jj="rgb(32,255,255)";this.yj=this.yl="black";this.enabled=!1}function l(e,b,f,h){this.name=e;this.width=b;this.height=f;this.Rk=h}function b(e,b){this.c=b;this.Bk=e;this.tf=[]}function k(e,b,f,h,a,d,c,w,N,M,L,O,m,F,n,g,q,B,l,u){this.id=e;this.F=!1;this.W=b;this.caller=f;this.icon=l;this.x=a;this.y=d;this.sb=a;this.gd=d;
this.position=h;this.width=c;this.height=w;this.border=F;this.type=O;this.orientation=m===r.Th?c>=w?r.cb:r.$f:m;this.lower=N;this.upper=M;switch(O){case r.Gd:this.current=[L,L];break;default:this.current=L}this.Lh=n;this.Fb=g;this.jh=q;this.fixed=B;this.Vg=!1;this.pe=this.oe=this.re=this.qe=this.si=this.ri=-1;this.textAlign=r.Wh;this.enabled=!0;this.ta=!1;this.Me=[];this.Hf=0;this.Fk=!1;this.vb=u.vb;this.Kb=u.Kb;this.Bb=u.Bb;this.Ga=u.Ga;this.ec=u.ec;this.dc=u.dc;this.jd=u.jd;this.Dc=u.Dc;this.gc=
u.gc;this.sc=u.sc;this.border=u.border}function B(e,b,f,h){this.c=h;this.F=!1;this.$c=this.Zc=-1;this.ia=!1;this.Fi=6;this.Wi=2;this.W=e;this.Cb=[];this.N=0;this.vb="";this.Kb=0;this.Bb="";this.Ga=0;this.ec="";this.dc=0;this.jd="";this.Dc=0;this.gc="";this.border=this.sc=0;this.hf=r.Th;this.fg=-1;this.Dg=null;this.Re=b;this.caller=f;this.Ha=null}function u(e,b,f,h,a,d){var c=this,w=0,N=e.canvas;this.ed=!1;this.caller=a;this.K=!1;this.qf=d;this.hasFocus=this.ig=!1;this.Wd=!0;this.Oe=!1;this.Rd=1;this.vb=
"black";this.Kb=.7;this.Bb="rgb(32,255,255)";this.Ga=1;this.ec="rgb(0,240,32)";this.dc=.7;this.jd="blue";this.Dc=.7;this.gc="grey";this.border=this.sc=1;this.Vh=function(a){return function(){a.Wk(a)}}(this);this.Ha=h;this.Ob=e;this.Na=b;this.ia=!1;this.wc=this.vc=-1;this.qa=null;this.yg=f;this.Uf=!1;this.Wg=performance.now();this.vi=1E3;this.zc=5;this.Ke=0;this.Ug=[];this.Yg=[];this.Tg=[];for(w=0;w<this.zc;w+=1)this.Ug[w]=0,this.Yg[w]=0,this.Tg[w]=0;this.te=null;this.Ne=!1;this.s=new t(25,100,25,
b,this);registerEvent(N,"mousedown",function(a){c.Bj(c,a)},!1);registerEvent(N,"mousemove",function(a){c.Cj(c,a)},!1);registerEvent(N,"mouseup",function(a){c.Fj(c,a)},!1);registerEvent(N,"mouseover",function(a){c.Ej(c,a)},!1);registerEvent(N,"mouseout",function(a){c.Dj(c,a)},!1);registerEvent(N,"touchstart",function(a){c.ld(c,a)},!1);registerEvent(N,"touchmove",function(a){c.ld(c,a)},!1);registerEvent(N,"touchend",function(a){c.ld(c,a)},!1)}t.prototype.Uc=function(){var e=!1;if(""!==this.message||
""!==this.Ac)e=!0;return e};t.prototype.clear=function(e,b){e?""!==this.Ac&&(b?this.Ac="":this.mh=performance.now()-(this.kh+this.lh)):""!==this.message&&(b?this.message="":this.startTime=performance.now()-(this.Dh+this.Eh))};t.prototype.ka=function(e,b,f){this.enabled&&(f?this.Ac!==e&&(this.Ac=e,this.kh=240,this.lh=16*b,this.Di=240,this.mh=performance.now()):(this.message=e,this.Dh=240,this.Eh=16*b,this.bj=240,this.startTime=performance.now()))};t.prototype.Vc=function(e){var b=0,f=0,b=this.c.measureText(e).width>>
1;this.Dl&&(this.c.fillStyle=this.yj,f=this.c.globalAlpha,this.c.globalAlpha=.7*f,this.c.fillRect(-b-20,-52,2*b+40,104),this.c.globalAlpha=f);this.c.fillStyle=this.yl;this.c.fillText(e,-b+2,2);this.c.fillStyle=this.Jj;this.c.fillText(e,-b,0)};t.prototype.kj=function(e,b,f,h,a,d){var c=0,w=0,c=0,N=!0;""!==e&&(N=!1,w=performance.now()-a,this.c.save(),this.c.font="30px Arial",this.c.translate(this.c.canvas.width/2,27+d),w<=b?(c=w/b,c*=c,this.c.globalAlpha=c,this.c.scale(c,c)):w>b+f&&w<=b+f+h&&(c=(h-
(w-(b+f)))/h,c*=c,this.c.globalAlpha=c,this.c.scale(c,c)),w>b+f+h?N=!0:(c=e.indexOf("\\n"),-1===c?this.Vc(e):(this.Vc(e.substr(0,c)),this.c.translate(0,32),this.Vc(e.substr(c+2)))),this.c.restore());return N};t.prototype.update=function(){!this.h.K&&this.kj(this.message,this.Dh,this.Eh,this.bj,this.startTime,36)&&(this.message="");this.h.K&&"Expand"!==this.Ac||!this.kj(this.Ac,this.kh,this.lh,this.Di,this.mh,0)||(this.Ac="")};b.prototype.Vc=function(e,b,f){this.c.drawImage(this.Bk,e.Rk*e.width,0,
e.width,e.height,b,f,e.width,e.height)};b.prototype.length=function(){return this.tf.length};b.prototype.icon=function(e){var b,f=this.tf,h=this.length(),a=null;for(b=0;b<h&&!a;)f[b].name===e?a=f[b]:b+=1;return a};b.prototype.add=function(e,b,f){var h=this.tf.length;this.tf[h]=new l(e,b,f,h)};var r={Th:0,cb:1,$f:2,Gd:0,button:1,toggle:2,Rb:3,list:4,label:5,vh:0,Ff:1,left:0,Wh:1,right:2,bh:0,zi:1,hi:2,Gb:3,Ri:4,Jd:5,Rl:6,Xl:7,Lk:8};k.prototype.Aj=function(e,b){this.x=this.sb;this.y=this.gd;switch(this.position){case r.bh:this.x=
(e-this.width>>1)+this.sb;break;case r.zi:this.x=e+this.sb;break;case r.hi:this.y=(b-this.height>>1)+this.gd;this.x=e+this.sb;break;case r.Gb:this.x=e+this.sb;this.y=b+this.gd;break;case r.Ri:this.x=(e-this.width>>1)+this.sb;this.y=b+this.gd;break;case r.Jd:this.y=b+this.gd;break;case r.Pl:this.y=(b-this.height>>1)+this.gd;break;case r.Lk:this.x=(e-this.width>>1)+this.sb,this.y=(b-this.height>>1)+this.gd}};k.prototype.Rh=function(e,b){var f=this.Hf;this.Me[f]=[e,b];this.Hf=f+1};k.prototype.Qh=function(e){var b=
[],f,h;h=e.length;for(f=0;f<h;f+=1)e[f].Rh(this,!0);h=b.length;for(f=0;f<h;f+=1)b[f].Rh(this,!1)};k.prototype.Ok=function(e,b){var f=!1;this.enabled&&e>=this.x&&e<this.x+this.width&&b>=this.y&&b<this.y+this.height&&(f=!0);return f};B.prototype.Bi=function(e,b){var f,h,a=e.Hf;f=e.type===r.list&&e.upper===r.Ff?e.current[0]:e.current===e.upper;e.Fk&&(f=!f);if(f&&b)for(h=0;h<a;h+=1)f&=this.Bi(e.Me[h][0],e.Me[h][1]);return f};B.prototype.jj=function(e){var b,f,h=e.Hf;b=!0;for(f=0;f<h;f+=1)b&=this.Bi(e.Me[f][0],
e.Me[f][1]);e.enabled=b};B.prototype.rc=function(){var e,b;for(b=0;b<this.N;b+=1){e=this.Cb[b];e.enabled=!0;switch(e.type){case r.toggle:e.W&&(e.current=e.W(e.current===e.upper,!1,this.caller)?e.upper:e.lower);break;case r.Gd:e.W&&(e.current=e.W(e.current,!1,this.caller));break;case r.list:e.W&&(e.current=e.W(e.current,!1,this.caller))}this.jj(e)}};B.prototype.Se=function(e,b,f,h,a,d,c,w){this.Cb[this.N]=new k(this.N,e,this.caller,b,f,h,a,40,d,w,c,r.list,this.hf,this.border,!0,"","",-1,[],this);this.N+=
1;return this.Cb[this.N-1]};B.prototype.Mc=function(e,b,f,h,a,d,c,w,N,M,L,O){this.Cb[this.N]=new k(this.N,e,this.caller,b,f,h,a,d,c,w,N,r.Gd,this.hf,this.border,!0,M,L,O,null,this);this.N+=1;return this.Cb[this.N-1]};B.prototype.Wb=function(e,b,f,h,a){this.Cb[this.N]=new k(this.N,null,null,e,b,f,h,40,0,0,0,r.label,this.hf,this.border,!0,a,"",-1,null,this);this.N+=1;return this.Cb[this.N-1]};B.prototype.uj=function(){this.Cb[this.N]=new k(this.N,null,null,Menu.Jd,0,-40,100,40,0,100,0,r.Rb,this.hf,
this.border,!1,"","",0,null,this);this.N+=1;return this.Cb[this.N-1]};B.prototype.Wc=function(e,b,f){var h,a,d,c,w;e+=String();if(""!==e){this.c.save();this.c.translate(b.x+b.width/2,b.y+b.height/2);b.orientation===r.$f&&this.c.rotate(.5*Math.PI);h=this.c.measureText(e).width;a=b.orientation===r.$f?b.height:b.width;if(h>=a-6){if(d=e.length){do d-=1,c=e.substr(0,d)+"...",h=this.c.measureText(c).width;while(1<d&&h>=a-6)}e=c}switch(b.textAlign){case r.left:w=b.width/2-2;break;case r.Wh:w=h/2;break;case r.right:w=
h/2-(b.width-h)/2+4}this.c.fillStyle=this.vb;f&&this.c.fillRect(2-w,2,h,this.Wi);this.c.fillText(e,2-w+.5,2.5);this.c.fillStyle=b.ta?this.gc:this.Bb;this.c.fillText(e,-w+.5,.5);f&&this.c.fillRect(-w,0,h,this.Wi);this.c.restore()}};B.prototype.kk=function(e){this.c.globalAlpha=this.Ga;this.Wc(e.Fb,e,!1)};B.prototype.fk=function(e){this.c.globalAlpha=this.Ga;this.Wc(e.Fb,e,!1)};B.prototype.mk=function(e){var b;b=(e.current-e.lower)/(e.upper-e.lower);this.c.globalAlpha=this.Kb;this.c.fillStyle=this.Bb;
e.orientation===r.cb?(b*=e.width-3,this.c.fillRect(e.x+(b+1|0),e.y,1,e.height)):(b*=e.height-3,b=b+1|0,this.c.fillRect(e.x,e.y+b,e.width,1));b=e.Fb;e.Lh&&(b=-1!==e.fixed?b+e.current.toFixed(e.fixed):b+e.current,b+=e.jh);""!==b&&(this.c.globalAlpha=this.Ga,this.Wc(b,e,!1))};B.prototype.nk=function(e,b){var f,h;f=(e.current[0]-e.lower)/(e.upper-e.lower);h=this.Fi;e.orientation===r.cb?(f*=e.width-3,f=f+1|0,b&&(this.c.fillStyle=this.ec,this.c.globalAlpha=this.dc,this.c.fillRect(e.x+f-h,e.y,h,e.height),
this.c.fillRect(e.x+f+1,e.y,h,e.height)),e.ta?(this.c.fillStyle=this.gc,this.c.globalAlpha=this.sc):(this.c.fillStyle=this.Bb,this.c.globalAlpha=this.Ga),this.c.fillRect(e.x+f,e.y,1,e.height)):(f*=e.height-3,f=f+1|0,b&&(this.c.fillStyle=this.ec,this.c.globalAlpha=this.dc,this.c.fillRect(e.x,e.y+f-h,e.width,h),this.c.fillRect(e.x,e.y+f+1,e.width,h)),e.ta?(this.c.fillStyle=this.gc,this.c.globalAlpha=this.sc):(this.c.fillStyle=this.Bb,this.c.globalAlpha=this.Ga),this.c.fillRect(e.x,e.y+f,e.width,1));
f=e.Fb;e.Lh&&(f=0<=e.fixed?f+e.current[1].toFixed(e.fixed):f+e.current[1]);f+=e.jh;""!==f&&(this.c.globalAlpha=this.Ga,this.Wc(f,e,!1))};B.prototype.pk=function(e){var b,f;this.c.globalAlpha=this.Ga;b="-"===e.lower&&""===e.upper&&e.current===e.lower;f=e.Fb;e.Lh&&!b&&(f+=e.current);f+=e.jh;this.Wc(f,e,b)};B.prototype.lk=function(e,b){var f,h,a,d,c,w,N,M,L,O;d=e.x;c=e.y;N=e.width;M=e.height;L=e.orientation;O=e.current;a=e.lower;h=a.length;w=e.orientation===r.cb?N/h:M/h;this.c.globalAlpha=this.Dc;this.c.fillStyle=
this.jd;if(e.upper===r.vh)f=e.current,e.orientation===r.cb?this.c.fillRect(d+f*w+.5,c+.5,w-1,M-1):this.c.fillRect(d+.5,c+.5+f*w,N-1,w-1);else if(e.orientation===r.cb)for(f=0;f<h;f+=1)O[f]&&this.c.fillRect(d+f*w+.5,c+.5,w-1,M-1);else for(f=0;f<h;f+=1)O[f]&&this.c.fillRect(d+.5,c+.5+f*w,N-1,w-1);this.c.globalAlpha=this.Ga;if(e.orientation===r.cb)for(f=0;f<h;f+=1)e.icon[f]&&this.Ha.Vc(e.icon[f],e.x+w*f,e.y);else for(f=0;f<h;f+=1)e.icon[f]&&this.Ha.Vc(e.icon[f],e.x,e.y+w*f);b&&(this.c.globalAlpha=this.dc,
this.c.fillStyle=this.ec,e.orientation===r.cb?(f=(this.Zc-d)/N*h|0,0<=f&&f<h&&this.c.fillRect(d+f*w+.5,c+.5,w-1,M-1)):(f=(this.$c-c)/M*h|0,0<=f&&f<h&&this.c.fillRect(d+.5,c+.5+f*w,N-1,w-1)));this.c.globalAlpha=this.Ga;this.c.fillStyle=this.Bb;if(L===r.cb)for(f=0;f<h;f+=1)d=a[f],""!==d&&(this.c.save(),this.c.translate((.5+(f-h/2))*w,0),this.Wc(d,e,!1),this.c.restore());else for(f=0;f<h;f+=1)d=a[f],""!==d&&(this.c.save(),this.c.translate(0,(.5+(f-h/2))*w),this.Wc(d,e,!1),this.c.restore())};B.prototype.jk=
function(e,b,f,h){var a,d,c;!(f===h||-1===h&&b)||e.type!==r.button&&e.type!==r.toggle?(this.c.fillStyle=e.vb,this.c.globalAlpha=e.Kb):(this.c.fillStyle=e.ec,this.c.globalAlpha=e.dc);switch(e.type){case r.Rb:a=(e.current-e.lower)/(e.upper-e.lower);this.c.fillStyle=e.jd;this.c.globalAlpha=e.Dc;e.orientation===r.cb?(a*=e.width-3,a=a+1|0,this.c.fillRect(e.x,e.y,a,e.height),this.c.fillStyle=e.vb,this.c.globalAlpha=e.Kb,this.c.fillRect(e.x+a,e.y,e.width-a,e.height)):(a*=e.height-3,a=a+1|0,this.c.fillRect(e.x,
e.y,e.width,a),this.c.fillStyle=e.vb,this.c.fillRect(e.x,e.y+a,e.width,e.height-a));break;case r.Gd:a=(e.current[0]-e.lower)/(e.upper-e.lower);f===h||-1===h&&b?(d=this.Fi,e.orientation===r.cb?(a*=e.width-3,a=a+1|0,c=a-d,0<c&&this.c.fillRect(e.x,e.y,c,e.height),c=1+a+d,c<e.width&&this.c.fillRect(e.x+c,e.y,e.width-c,e.height)):(a*=e.height-3,a=a+1|0,c=a-d,0<c&&this.c.fillRect(e.x,e.y,e.width,c),c=1+a+d,c<e.height&&this.c.fillRect(e.x,e.y+c,e.width,e.height-c))):this.c.fillRect(e.x,e.y,e.width,e.height);
break;default:this.c.fillRect(e.x,e.y,e.width,e.height)}e.type!==r.list&&e.icon&&(this.c.globalAlpha=e.Ga,this.Ha.Vc(e.icon,e.x,e.y),!(f===h||-1===h&&b)||e.type!==r.button&&e.type!==r.toggle||(this.c.globalAlpha=e.Dc,this.c.fillRect(e.x,e.y,e.width,e.height)));if(0<e.border)switch(e.ta?(this.c.strokeStyle=e.gc,this.c.globalAlpha=e.sc):(this.c.strokeStyle=e.Bb,this.c.globalAlpha=e.Ga),this.c.lineWidth=e.border,e.type){case r.label:break;case r.list:d=e.lower.length;if(e.orientation===r.cb)for(c=e.width/
d,a=0;a<d;a+=1)this.c.strokeRect(e.x+.5+a*c,e.y+.5,c-1,e.height-1);else for(c=e.height/d,a=0;a<d;a+=1)this.c.strokeRect(e.x+.5,e.y+.5+a*c,e.width-1,c-1);break;default:this.c.strokeRect(e.x+.5,e.y+.5,e.width-1,e.height-1)}switch(e.type){case r.button:this.fk(e);break;case r.label:this.kk(e);break;case r.Gd:this.nk(e,f===h||-1===h&&b);break;case r.toggle:this.pk(e);break;case r.Rb:this.mk(e);break;case r.list:this.lk(e,f===h||-1===h&&b)}if(f===h)switch(e.type){case r.Gd:a=this.$c,e.orientation===r.$f?
(a<e.y?a=e.y:a>=e.y+e.height&&(a=e.y+e.height-1),e.current[0]=(a-e.y)/(e.height-1)*(e.upper-e.lower)+e.lower):(a=this.Zc,a<e.x?a=e.x:a>=e.x+e.width&&(a=e.x+e.width-1),e.current[0]=(a-e.x)/(e.width-1)*(e.upper-e.lower)+e.lower),e.W&&(e.current=e.W(e.current,!0,e.caller))}if(b&&!this.ia&&e.Vg)switch(e.type){case r.button:e.W&&e.W(e.caller);break;case r.toggle:e.current=e.current===e.upper?e.lower:e.upper;e.W&&e.W(e.current===e.upper,!0,e.caller);break;case r.list:d=e.lower.length,c=e.orientation===
r.cb?(this.Zc-e.x)/e.width*d|0:(this.$c-e.y)/e.height*d|0,e.upper===r.vh?e.current=e.W?e.W(c,!0,e.caller):c:(e.current[c]=!e.current[c],e.W&&e.W(e.current,!0,e.caller))}b&&f===h?(e.Vg=this.ia,e.ri=this.Zc,e.si=this.$c):(e.Vg=!1,e.ri=-1,e.si=-1)};B.prototype.Eg=function(){var e=null,b=!1,f=this.fg,h=0,a=!1,d=this.c.canvas.width,c=this.c.canvas.height,a=!1;if(!this.F){f=this.fg;this.c.textAlign="left";for(h=0;h<this.N;h+=1)e=this.Cb[h],e.F||(e.Aj(d,c),b=e.Ok(this.Zc,this.$c)&&!e.ta,this.ia&&-1===f&&
b&&(f=h),h===f&&e.ta&&(f=-1,b=!1),e.enabled&&this.jk(e,b,h,f));0<=f&&!this.ia&&(a=!0);this.ia&&-1===f&&(f=-2);-2===f&&this.Dg&&this.Dg(this.Zc,this.$c,this.ia,this.caller);this.ia||(f=-1);this.fg=f;this.c.globalAlpha=1}return a};u.prototype.Lj=function(){var e=this.Ob.canvas,b=e.offsetParent;this.offsetLeft=e.offsetLeft;for(this.offsetTop=e.offsetTop;b;)this.offsetLeft+=b.offsetLeft,this.offsetTop+=b.offsetTop,b=b.offsetParent;b=e.parentNode;if("fixed"===b.style.position)this.offsetLeft+=document.body.scrollLeft+
document.documentElement.scrollLeft,this.offsetTop+=document.body.scrollTop+document.documentElement.scrollTop;else for(;"body"!==b.tagName.toLowerCase();)this.offsetLeft-=b.scrollLeft,this.offsetTop-=b.scrollTop,b=b.parentNode};u.prototype.Wj=function(e,b,f){e=new B(e,b,f,this.Na);e.Bb=this.Bb;e.Ga=this.Ga;e.vb=this.vb;e.Kb=this.Kb;e.ec=this.ec;e.dc=this.dc;e.jd=this.jd;e.Dc=this.Dc;e.gc=this.gc;e.sc=this.sc;e.border=this.border;return e};u.prototype.Wk=function(e){var b,f,h,a,d,c;e.Oe=!1;c=e.Na;
e.te&&(e.qa=e.te,e.te=null,c.font=e.yg,e.qa.rc(),e.qa.Re&&e.qa.Re(e.qa.caller));if(e.Wd||e.s.Uc()||e.Rd)e.Ce(e),e.Rd&&(e.Rd-=1);f=performance.now();h=f-e.Wg;e.Wg=f;e.qa.W&&(h>e.vi?e.qa.W(e.vi,e.qa.caller):e.qa.W(h,e.qa.caller));f=performance.now()-f;b=performance.now();e.Eg();b=performance.now()-b;e.Ug[e.Ke]=b;for(d=b=0;d<e.zc;d+=1)b+=e.Ug[d];b/=e.zc;e.Yg[e.Ke]=f;for(d=f=0;d<e.zc;d+=1)f+=e.Yg[d];f/=e.zc;e.Tg[e.Ke]=h;for(d=a=0;d<e.zc;d+=1)a+=e.Tg[d];a/=e.zc;e.Ke=(e.Ke+1)%e.zc;d=Math.round(1E3/a);e.Uf&&
(a=c.canvas.width-110,c.font="12px Arial",c.globalAlpha=.7,c.fillStyle="black",c.fillRect(a,0,110,83),h=h.toFixed(1),b=b.toFixed(1),f=f.toFixed(1),c.globalAlpha=1,c.fillText(d+"fps"+h+"ms",a+8,12),c.fillText("menu "+b+"ms",a+8,28),c.fillText("work "+f+"ms",a+8,44),c.fillText("update "+(e.Wd?"on":"off"),a+8,60),c.fillText("focus "+(e.hasFocus?"on":"off"),a+8,76),c.fillStyle="white",c.fillText(d+"fps "+h+"ms",a+6,10),c.fillText("menu "+b+"ms",a+6,26),c.fillText("work "+f+"ms",a+6,42),c.fillText("update "+
(e.Wd?"on":"off"),a+6,58),c.fillText("focus "+(e.hasFocus?"on":"off"),a+6,74),c.globalAlpha=1);e.s.update();e.Ob.drawImage(c.canvas,0,0)};u.prototype.sj=function(e){e.Ha=this.Ha;this.qa?this.te=e:(this.te=null,this.qa=e,this.Na.font=this.yg,this.qa.rc(),this.qa.Re&&this.qa.Re(this.qa.caller),this.Ce(this))};u.prototype.Eg=function(){var e,b,f;if(this.qa&&(b=this.qa,this.Na.font=this.yg,b.Zc=this.vc,b.$c=this.wc,b.ia=this.ia,b.Eg()||this.Ne)){for(e=0;e<b.N;e+=1)f=b.Cb[e],b.jj(f);this.Ne=!1}};u.prototype.Ce=
function(e){e.Oe||(requestAnimationFrame?requestAnimationFrame(e.Vh):setTimeout(e.Vh,16),e.Oe=!0)};u.prototype.ld=function(e,b){var f=null,h,a="";if("touchend"===b.type)a="mouseup",h=document.createEvent("MouseEvent"),h.initMouseEvent(a,!0,!0,window,1,e.qe,e.re,e.oe,e.pe,!1,!1,!1,!1,0,null),b.target.dispatchEvent(h),b.preventDefault();else{if(1===b.touches.length)switch(b.type){case "touchstart":a="mousedown";break;case "touchmove":a="mousemove"}""!==a&&(f=b.changedTouches[0],h=document.createEvent("MouseEvent"),
h.initMouseEvent(a,!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null),f.target.dispatchEvent(h),b.preventDefault(),e.qe=f.screenX,e.re=f.screenY,e.oe=f.clientX,e.pe=f.clientY)}};u.prototype.Bj=function(e,b){e.ed||(e.hasFocus?e.K&&e.qf&&e.qf(e.caller):(e.Ob.canvas.focus(),e.hasFocus=!0,e.s.clear(!0,!1),e.qf&&e.qf(e.caller)),e.nd(e,b),e.ia=!0,b.stopPropagation&&b.stopPropagation(),b.preventDefault())};u.prototype.Fj=function(e,b){e.ed||(e.nd(e,b),e.ia=!1,b.stopPropagation&&b.stopPropagation(),
b.preventDefault())};u.prototype.Cj=function(e,b){e.ed||(e.nd(e,b),b.stopPropagation&&b.stopPropagation(),b.preventDefault())};u.prototype.Ej=function(e,b){e.ed||(e.hasFocus||e.ig||(e.K?e.s.ka("Expand",600,!0):e.s.ka("Click to control",600,!0),e.ig=!0),b.stopPropagation&&b.stopPropagation(),b.preventDefault())};u.prototype.Dj=function(e,b){e.ed||(e.hasFocus||e.s.clear(!0,!1),e.Ob.canvas.blur(),e.hasFocus=!1,e.ia=!1,e.ig=!1,e.Oe||(e.Ce(e),e.Rd=2),b.stopPropagation&&b.stopPropagation(),b.preventDefault())};
u.prototype.nd=function(e,b){var f,h;b.pageX||b.pageY?(f=b.pageX,h=b.pageY):(f=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,h=b.clientY+document.body.scrollTop+document.documentElement.scrollTop);e.Lj();f-=e.offsetLeft;h-=e.offsetTop;e.vc=f-1|0;e.wc=h-1|0;e.Oe||(e.Ce(e),e.Rd=2)};u.prototype.Id=function(e){!e&&!this.s.Uc()||this.Wd||this.Ce(this);this.Wd=e};window.IconManager=b;window.Menu=r;window.MenuManager=u})();(function(){function t(){var l=0,b=1;this.buffer=[];this.Pa=this.Ua=0;this.Qe=32;this.V=this.Qe-1;this.xe=1024;this.Qa=this.length=0;this.buffer[this.Ua]=new Uint32Array(this.xe);this.Ue=1;this.Uh=[];b=1;for(l=0;32>l;l++)this.Uh[l]=b,b*=2;this.vj="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.-:+=^!/*?'~|()[]{}@%$#"}t.prototype.Ii=function(){this.buffer[this.Ua][this.Pa]=this.Qa;this.Pa=this.Ua=0;this.V=this.Qe-1;this.Qa=this.buffer[this.Ua][this.Pa]};t.prototype.clear=function(){this.Ii();
this.length=this.Qa=0};t.prototype.tj=function(l){var b=32;if(b<=this.V)l&&(this.Qa|=l<<this.V-b+1),this.V-=b,this.length+=b;else for(;b--;)l&1<<b&&(this.Qa|=1<<this.V),this.V--,0>this.V&&(this.buffer[this.Ua][this.Pa]=this.Qa,this.V=this.Qe-1,this.Pa++,this.Pa>=this.xe&&(this.Ua++,this.Ua>=this.Ue&&(this.buffer[this.Ua]=new Uint32Array(this.xe),this.Ue++),this.Pa=0),this.Qa=0),this.length++};t.prototype.xk=function(l,b){var k=0,B=0,u=0,r=85,e=l.length,C=this.vj;for(this.clear();b<e;){r=1;for(B=u=
0;5>B;B++)k=C.indexOf(l[b]),-1===k&&console.debug("illegal character: "+l[b]),u+=r*k,r*=85,b++;this.tj(u)}this.Ii()};t.prototype.fa=function(){var l=0,l=this.Qa&1<<this.V?1:0;this.V--;0>this.V&&(this.V=this.Qe-1,this.Pa++,this.Pa>=this.xe&&(this.Ua++,this.Ua>=this.Ue&&console.debug("exhausted pages"),this.Pa=0),this.Qa=this.buffer[this.Ua][this.Pa]);return l};t.prototype.ab=function(l){var b=0,k=0,B=this.Uh;if(l<=this.V)b=this.Qa>>this.V-l+1&(1<<l)-1,this.V-=l;else for(;l--;)(k=this.Qa&1<<this.V?
1:0)&&(b+=B[l]),this.V--,0>this.V&&(this.V=this.Qe-1,this.Pa++,this.Pa>=this.xe&&(this.Ua++,this.Ua>=this.Ue&&console.debug("exhausted pages"),this.Pa=0),this.Qa=this.buffer[this.Ua][this.Pa]);return b};window.BitVector=t})();(function(){function t(b,l,r,e,k,f){this.Ld=b;this.Md=l;this.width=r;this.height=e;this.Bl=k;this.tk=f}function l(b){var l=b.lastIndexOf(".");-1!==l&&(b=b.substr(0,l));this.name=b;this.Sb="";this.height=this.width=0;this.pb=this.B=null;this.title="";this.Lb=k.gf;this.Ub=k.kf;this.Qb="";this.Gf=2;this.we=0;this.Kc=!1}var b=new BitVector,k={maxWidth:8192,maxHeight:8192,gf:8,kf:12,zh:new Uint8Array(256),La:!1,ib:!1,xf:"LifeHistory",Kc:!1,$j:function(b,l){var r,e,k,f,h=0,a=0,d=0,c,w,N=!1;e=l.length;for(r=
f=0;r<e;)switch(k=l[r],r+=1,f){case 0:switch(k){case "!":f=1;w=!0;break;case "O":case "*":case ".":f=2,a=h=d=0,c=r-=1}break;case 1:"\r"!==k&&(" "===k?w||(b.title+=k):(w=!1,b.title+=k));"\n"===k&&(f=0);break;case 2:switch(k){case "O":case "*":case ".":a+=1;break;case "\n":d+=1;a>h&&(h=a);a=0;break;case " ":break;default:r=e,N=!0}}if(!N){2===f&&"\n"!==k&&(d+=1,a>h&&(h=a));b.height=d;b.width=h;b.Qb="Cells";b.B=Array.Ba(b.height,(b.width-1>>3)+1,0);r=c;for(f=h=0;r<e;)switch(k=l[r],r+=1,k){case "\n":h+=
1;f=0;break;case "O":case "*":b.B[h][f>>3]|=1<<(~f&7);f+=1;break;case ".":f+=1}this.La=!0}},Zj:function(b,l){var r,e,k,f,h,a,d,c,w,N;e=l.length;a=[];d=0;h=!1;w=c=0;N=!1;for(r=10;r<e;)switch(k=l[r],r+=1,k){case "\n":N&&(N=!1,2===f&&h&&(w=-w,h=!1),a[d]=[c,w],d+=1);f=w=c=0;break;case "-":h=!0;0===f?f=1:1===f&&(f=2);break;case " ":1===f&&(h&&(c=-c,h=!1),f=2);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":0===f&&(f=1),1===f?c=10*c+parseInt(k,10):(w=10*w+
parseInt(k,10),N=!0)}N&&(2===f&&h&&(w=-w),a[d]=[c,w],d+=1);if(d){k=e=a[0][0];h=f=a[0][1];for(r=1;r<d;r+=1)c=a[r][0],w=a[r][1],c<e&&(e=c),c>k&&(k=c),w<f&&(f=w),w>h&&(h=w);b.height=h-f+1;b.width=k-e+1;b.B=Array.Ba(b.height,(b.width-1>>3)+1,0);b.Qb="Life 1.06";for(r=0;r<d;r+=1)c=a[r][0]-e,w=a[r][1]-f,b.B[w][c>>3]|=1<<(~c&7)}},bi:function(b,l,r){var e,k,f,h,a,d,c,w,N,M,L,O,m,F;L=[];O=0;e=l.length;h=f=0;a=!1;c=d=0;for(r=r?10:0;r<e;)switch(k=l[r],r+=1,f){case 0:switch(k){case "#":f=2;break;case "*":case ".":f=
3,M=N=w=0,m=r-=1}break;case 2:switch(k){case "C":case "D":f=1;F=!0;break;case "R":f=4;break;case "P":f=5,h=2,a=!1,c=d=0}break;case 1:"\r"!==k&&(" "===k?F||(b.title+=k):(F=!1,b.title+=k));"\n"===k&&(f=0);break;case 4:switch(k){case "\n":f=0;break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":switch(h){case 1:b.Lb|=1<<parseInt(k,10);break;case 0:b.Ub|=1<<parseInt(k,10)}break;case "/":h=1}break;case 5:switch(k){case "\n":f=0;4===h&&a&&(c=-c,a=!1);break;case "-":a=!0;
2===h?h=3:3===h&&(h=4);break;case " ":3===h&&(a&&(d=-d,a=!1),h=4);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":2===h&&(h=3),3===h?d=10*d+parseInt(k,10):c=10*c+parseInt(k,10)}break;case 3:switch(k){case "\n":w>N&&(N=w);w=0;M+=1;break;case "#":L[O]=new t(d,c,N,M,m,r-1);O+=1;f=2;break;case "*":case ".":w+=1}}"\n"!==k&&(M+=1);3===f&&(L[O]=new t(d,c,N,M,m,r-1),O+=1);if(O){d=L[0].Ld;c=L[0].Md;k=d+L[0].width-1;e=c+L[0].height-1;for(r=1;r<O;r+=1)L[r].Ld<
d&&(d=L[r].Ld),L[r].Md<c&&(c=L[r].Md),L[r].Ld+L[r].width-1>k&&(k=L[r].Ld+L[r].width-1),L[r].Md+L[r].height-1>e&&(e=L[r].Md+L[r].height-1);b.height=e-c+1;b.width=k-d+1;b.B=Array.Ba(b.height,(b.width-1>>3)+1,0);b.Qb="Life 1.05";for(r=0;r<O;r+=1)for(e=L[r].Bl,f=L[r].tk,a=L[r].Ld-d,k=L[r].Md-c,h=a,w=k;e<=f;)switch(k=l[e],e+=1,k){case "\n":w+=1;h=a;break;case "*":b.B[w][h>>3]|=1<<(~h&7);h+=1;break;default:h+=1}}},zl:function(b){var k,l,e,C,f,h,a,d;this.ib=!1;a=d=h=f=0;l=b.length;C=!1;for(k=0;k<l&&!C;)switch(e=
b[k],k+=1,e){case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":a=10*a+parseInt(e,10);break;case "o":a||(a+=1);f+=a;a=0;break;case "b":a||(a+=1);f+=a;a=0;break;case "$":a||(a+=1);h+=a;f>d&&(d=f);a=f=0;break;case "!":C=!0;break;default:"p"<=e&&"y">=e?this.ib=!0:"A"<=e&&"X">=e||"."===e?(this.ib=!0,a||(a+=1),f+=a,a=0):"\n"!==e&&(d=0,C=!0)}b=h;0<f&&(b+=1);return[d,b]},yk:function(b,k,l,e){for(var C=l;C<e&&" "===k[C];)C+=1;if(C<e){for(l=C;l<e&&" "!==k[l]&&"\n"!==
k[l]&&":"!==k[l];)l+=1;b.Sb=k.substr(C,l-C)}return C},di:function(b,l){var r,e,C,f,h,a,d,c,w,N,M,L=!1,O=!1,m=0,F=!1,n=this.zh;C=[0,0];this.ib=!1;e=l.length;c=d=h=a=f=0;N=w=!1;b.Lb=0;for(r=b.Ub=0;256>r;r+=1)n[r]=0;for(r=0;r<e&&!w;)switch(C=l[r],r+=1,f){case 0:switch(C){case "#":f=2;break;case "x":f=3;break;case "\n":break;default:0===b.width&&0===b.height&&(C=this.zl(l),b.width=C[0],b.height=C[1],b.width>k.maxWidth||b.height>k.maxHeight?w=b.Kc=!0:0<b.width&&0<b.height&&(b.B=Array.Ba(b.height,(b.width-
1>>3)+1,0),b.pb=Array.Ba(b.height,b.width,0),b.Qb="RLE",b.Lb=k.gf,b.Ub=k.kf,O=L=!0)),f=4,r-=1}break;case 2:"\n"===C?f=0:(f=1,M=!0);break;case 1:"\r"!==C&&(" "===C?M||(b.title+=C):(M=!1,b.title+=C));"\n"===C&&(f=0);break;case 3:switch(C){case "\n":f=4;b.width>k.maxWidth||b.height>k.maxHeight?(w=b.Kc=!0,b.B=null,b.pb=null):(b.B=Array.Ba(b.height,(b.width-1>>3)+1,0),b.pb=Array.Ba(b.height,b.width,0),b.Qb="RLE");break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":switch(h){case 0:b.width=
10*b.width+parseInt(C,10);break;case 1:b.height=10*b.height+parseInt(C,10);break;case 2:b.Lb|=1<<parseInt(C,10);break;case 3:b.Ub|=1<<parseInt(C,10)}break;case "y":4!==h&&(h=1,F=!1);break;case "r":4!==h&&(h=2,F=!0);break;case "b":case "B":4!==h&&(L=!0,h=2);break;case "s":case "S":4!==h&&(O=!0,h=3);break;case "/":4!==h&&(L?h=3:O?h=2:(h=3,O=L=!0));break;case " ":4===h&&(h=0);break;case ":":h=4;break;case "H":L&&O&&(O=L=!1);break;case "=":F&&(r=this.yk(b,l,r,e),F=!1,-1===b.Sb.indexOf("/")&&(h=4))}break;
case 4:switch(C){case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":a=10*a+parseInt(C,10);break;case "b":a||(a+=1);d+=a;a=0;break;case ".":a||(a+=1);d+=a;a=0;this.ib=!0;n[0]||(n[0]=1,b.we+=1);break;case "o":for(a||(a+=1);a--&&!w;)c>=b.height||d>=b.width?(w=!0,b.B=null,b.pb=null):(b.B[c][d>>3]|=1<<(~d&7),d+=1);a=0;break;case "$":a||(a+=1);c+=a;a=d=0;break;case "!":w=N=!0;break;default:if("p"<=C&&"y">=C)this.ib=!0,m=24*(C.charCodeAt(0)-111);else if("A"<=C&&"X">=
C)if(this.ib=!0,m+=C.charCodeAt(0)-64,0>m||256<=m)w=!0,b.B=null,b.pb=null;else{for(a||(a+=1);a--&&!w;)c>=b.height||d>=b.width?(w=!0,b.B=null,b.pb=null):(b.pb[c][d]=m,b.Sb===k.xf?m&1&&(b.B[c][d>>3]|=1<<(~d&7)):b.B[c][d>>3]|=1<<(~d&7)),d+=1;a=0;n[m]||(n[m]=1,b.we+=1);m>=b.Gf&&(b.Gf=m+1);m=0}}}if(N)for(;r<e;)C=l[r],r+=1,b.title+=C;if(L&&O)this.ib=!1,this.La=!0;else if(b.Lb=k.gf,b.Ub=k.kf,"Life"===b.Sb||""===b.Sb||b.Sb===k.xf)this.La=!0;this.ib||b.Sb===k.xf||(this.pb=null);b.B||(b.title="")},ci:function(b,
k,l,e,C,f,h,a,d,c){var w=0,N=0,M=0,L=N=N=0,O=0,m=!1,F=1<<(~k&7),w=a?1:0,n=(1<<e)-2,g=(1<<e)-1;if(h)for(;w<l;w+=1)f.fa()&&(b[w][k>>3]|=F);else for(a||(d=f.fa()),c&&(m=f.fa()),O=L=w=0;w<l;)if(M=f.ab(e),M===g)if(d)for(;w<l;)b[L][k>>3]|=F,L+=C,L>=l&&(L=O+=1),w+=1;else w=l;else{M===n&&(c?m?N=5:(N=this.Ye(l,w,n),5<N&&f.fa()&&(N=5)):N=this.Ye(l,w,n),N=f.ab(N),M+=N);M+=1;for(N=0;N<M;N+=1)d&&(b[L][k>>3]|=F),L+=C,L>=l&&(L=O+=1),w+=1;d=!d}},ff:function(b,l,k,e,C,f,h,a,d){var c=0,w=0,N=0,M=w=w=0,L=0,O=!1,c=h?
1:0,m=(1<<k)-2,F=(1<<k)-1;if(f)for(;c<l;c+=1)C.fa()&&(b[c>>3]|=1<<(~c&7));else for(h||(a=C.fa()),L=M=c=0,d&&(O=C.fa());c<l;)if(N=C.ab(k),N===F)if(a)for(;c<l;)b[M>>3]|=1<<(~M&7),M+=e,M>=l&&(M=L+=1),c+=1;else c=l;else{N===m&&(d?O?w=5:(w=this.Ye(l,c,m),5<w&&C.fa()&&(w=5)):w=this.Ye(l,c,m),w=C.ab(w),N+=w);N+=1;for(w=0;w<N;w+=1)a&&(b[M>>3]|=1<<(~M&7)),M+=e,M>=l&&(M=L+=1),c+=1;a=!a}},Ye:function(b,l,k){b=b-l-k-1;return b=1>b?1:Math.floor(Math.log(b)/Math.LN2+1)},bk:function(b,l){var k=0,e=0,C="";if(l.fa()){e=
l.ab(12)+1;for(k=0;k<e;k+=1)C+=String.fromCharCode(l.ab(7));b.title=C}},ak:function(l,u){var r=0,e=0,C=0,f=0,h=null,a=r=!1,d=1,c=!1,w=!1,N=null;b.xk(u,4);this.bk(l,b);b.fa()?(e=b.ab(14),C=b.ab(14)):(e=b.ab(6),C=b.ab(6));l.width=e;l.height=C;b.fa()?(l.Lb=k.gf,l.Ub=k.kf):(l.Lb=b.ab(9),l.Ub=b.ab(9));l.B=Array.Ba(C,(e-1>>3)+1,0);h=l.B;l.Qb="LV85";f=b.fa()?2:3;r=b.fa()?!0:!1;a=b.fa()?!0:!1;d=b.ab(2)+1;c=b.fa()?!0:!1;if(r)for(w=a?b.fa():!1,this.ci(h,0,C,f,d,b,w,!1,!1,c),a&&(N=new Uint8Array((C-1>>3)+1),
w=b.fa(),this.ff(N,C,f,d,b,w,!1,!1,c)),r=0;r<C;r+=1)w=a?N[r>>3]&1<<(~r&7)?1:0:!1,this.ff(h[r],e,f,d,b,w,!0,h[r][0]&128?1:0,c);else for(w=a?b.fa():!1,this.ff(h[0],e,f,d,b,w,!1,!1,c),a&&(N=new Uint8Array((e-1>>3)+1),w=b.fa(),this.ff(N,e,f,d,b,w,!1,!1,c)),r=0;r<e;r+=1)w=a?N[r>>3]&1<<(~r&7)?1:0:!1,this.ci(h,r,C,f,d,b,w,!0,h[0][r>>3]&1<<(~r&7)?1:0,c)},create:function(b,k){var r=new l(b);this.La=this.ib=this.Kc=!1;"LV85"===k.substr(0,4)?(this.ak(r,k),this.La=!0):"!"===k.substr(0,1)||"O"===k.substr(0,1)||
"."===k.substr(0,1)||"*"===k.substr(0,1)?(this.$j(r,k),this.La=!0):"#Life 1.05"===k.substr(0,10)?(this.bi(r,k,!0),this.La=!0):"#Life 1.06"===k.substr(0,10)?(this.Zj(r,k),this.La=!0):"#"===k[0]||"x"===k[0]?(this.di(r,k),null!==r.B||r.Kc||(this.bi(r,k,!1),this.La=!0)):this.di(r,k);r.Kc&&(this.Kc=!0,this.La=!1);null===r.B&&(r=null,this.La=!1);return r}};window.PatternManager=k;window.Pattern=l})();(function(){function t(){this.lg=[]}t.prototype.add=function(l,b,k){this.lg[this.lg.length]=l<<16|b<<8|k};window.ColourManager={Zb:[],r:[],pi:!1,wg:[48,48,48,0,255,127,127,0,255,148,148,148,128,255,0,255,0,128,0,128,255,1,159,0,159,0,1,255,254,96,0,1,159,96,255,254,254,96,255,126,125,21,21,126,125,125,21,126,255,116,116,116,255,116,116,116,255,228,227,0,28,255,27,255,27,28,0,228,227,227,0,228,27,28,255,59,59,59,234,195,176,175,196,255,171,194,68,194,68,171,68,171,194,72,184,71,184,71,72,71,72,184,
169,255,188,252,179,63,63,252,179,179,63,252,80,9,0,0,80,9,9,0,80,255,175,250,199,134,213,115,100,95,188,163,0,0,188,163,163,0,188,203,73,0,0,203,73,73,0,203,94,189,0,189,0,94,0,94,189,187,243,119,55,125,32,125,32,55,32,55,125,255,102,185,102,185,255,120,209,168,208,166,119,135,96,192,182,255,41,83,153,130,247,88,55,89,247,55,88,55,247,87,75,0,0,87,75,75,0,87,200,135,59,51,213,127,255,255,162,255,37,182,37,182,255,228,57,117,142,163,210,57,117,228,193,255,246,188,107,123,123,194,107,145,59,5,5,145,
59,59,5,145,119,39,198,40,197,23,197,23,40,23,40,197,178,199,158,255,201,121,134,223,223,39,253,84,149,203,15,203,15,149,15,149,203,152,144,90,143,75,139,71,97,132,224,65,219,65,219,224,255,255,40,218,223,69,74,241,0,241,0,74,0,74,241,122,171,51,220,211,227,61,127,87,90,124,176,36,39,13,165,142,255,255,38,255,38,255,255,83,50,107,224,142,165,255,181,9,9,255,181,181,9,255,140,238,70,255,74,5,74,5,255,138,84,51,31,172,101,177,115,17,221,0,0,0,221,0,0,0,221,220,255,200,0,41,50,255,150,205,178,45,116,
113,255,189,47,0,44,40,119,171,205,107,255,177,115,172,133,73,236,109,0,168,168,46,207,188,181,203,212,188,35,90,97,52,39,209,184,41,164,152,227,46,70,46,70,227,211,156,255,98,146,222,136,56,95,102,54,152,86,142,0,142,0,86,0,86,142,86,223,96,246,135,46,4,208,120,212,233,158,177,92,214,104,147,88,149,240,147,227,93,148,72,255,133,209,27,194,147,255,255,44,93,0,160,36,158,182,233,0,96,94,217,218,103,88,163,154,38,118,114,139,94,0,43,113,164,174,168,188,114,0,23,119,42,86,93,255,226,202,80,191,155,255,
158,136,0,247,62,234,146,88,0,183,229,110,212,36,0,143,161,105,191,210,133,164,0,41,30,89,164,0,132,30,89,42,178,222,217,121,22,11,221,107,22,69,151,255,45,158,3,158,3,45,3,45,158,86,42,29,9,122,22,213,209,110,53,221,57,159,101,91,93,140,45,247,213,37,185,34,0,0,185,34,34,0,185,236,0,172,210,180,78,231,107,221,162,49,43,43,162,49,49,43,162,36,248,213,114,0,214,213,36,248,149,34,243,185,158,167,144,122,224,34,245,149,255,31,98,31,98,255,152,200,193,255,80,95,128,123,63,102,62,72,255,62,148,151,226,
108,159,99,255,226,255,126,98,223,136,80,95,255,225,153,15,73,41,211,212,71,41,83,217,187,180,235,79,0,166,127,251,135,243,229,41,0,41,0,229,82,255,216,141,174,249,249,215,255,167,31,79,31,79,167,213,102,185,255,215,83,4,2,40,224,171,220,41,0,4,6,50,90,221,15,113,15,113,221,33,0,115,108,23,90,182,215,36],vg:[],Tl:function(){return this.vg},Kj:function(l){for(var b=0,k=!1,B=[];b<this.r.length&&!k;)l===this.r[b][0]?k=!0:b++;k&&(B=this.Zb[this.r[b][1]].lg);return B},rc:function(){var l=null,b=0,k=0,
B=l=0;if(!this.pi){this.pi=!0;for(l=B=0;256>l;l++)this.vg[l]=this.wg[B]<<16|this.wg[B+1]<<8|this.wg[B+2],B+=3;l=new t;l.add(0,0,0);l.add(0,255,0);l.add(0,0,128);l.add(216,255,216);l.add(255,0,0);l.add(255,255,0);l.add(96,96,96);this.Zb[b]=l;this.r[k++]=["LifeHistory",b];b++;l=new t;l.add(48,48,48);l.add(0,128,255);l.add(255,255,255);l.add(255,128,0);this.Zb[b]=l;this.r[k++]=["WireWorld",b];b++;l=new t;l.add(0,0,0);l.add(255,255,255);l.add(144,128,112);l.add(144,90,45);l.add(192,192,192);l.add(255,
0,0);l.add(255,128,0);l.add(255,255,0);l.add(0,255,0);l.add(0,255,208);l.add(0,192,255);l.add(0,0,255);l.add(192,0,255);l.add(255,64,160);l.add(112,128,144);l.add(0,128,0);l.add(0,96,128);l.add(160,0,80);l.add(40,40,40);l.add(220,220,220);l.add(140,60,0);l.add(0,160,0);l.add(160,160,250);this.Zb[b]=l;this.r[k++]=["WWE",b];this.r[k++]=["WWE2",b];this.r[k++]=["WWEJ",b];this.r[k++]=["WWEJ2",b];this.r[k++]=["WWEJ3",b];b++;l=new t;l.add(30,30,30);l.add(0,128,128);l.add(0,255,0);l.add(255,0,0);l.add(255,
128,0);l.add(255,255,0);l.add(128,0,128);l.add(128,128,128);l.add(255,255,255);l.add(128,128,255);this.Zb[b]=l;this.r[k++]=["Novoloop",b];b++;l=new t;l.add(0,0,0);l.add(255,128,0);l.add(255,0,0);l.add(0,255,0);l.add(0,0,255);l.add(0,190,0);l.add(0,140,0);l.add(255,255,255);l.add(80,80,80);l.add(95,95,95);l.add(128,128,128);l.add(0,64,0);l.add(255,255,0);l.add(64,0,164);l.add(64,32,64);l.add(80,80,100);l.add(95,95,125);l.add(128,255,128);l.add(64,100,100);this.Zb[b]=l;this.r[k++]=["shapeloop",b];this.r[k++]=
["shapeloop-b",b];this.r[k++]=["shapeloop2",b];this.r[k++]=["shapeloop-ltd",b];this.r[k++]=["2armshapeloop-a",b];this.r[k++]=["2armshapeloop2-a",b];this.r[k++]=["shapeloop2a-bounded",b];this.r[k++]=["foodshapeloop",b];this.r[k++]=["foodshapeloop2",b];b++;l=new t;l.add(0,0,0);l.add(255,255,255);l.add(255,0,0);l.add(0,128,255);l.add(170,0,0);l.add(85,0,0);this.Zb[b]=l;this.r[k++]=["b3s23mmg",b];b++;l=new t;l.add(0,0,0);l.add(255,0,0);l.add(0,255,0);l.add(0,0,255);l.add(255,255,0);l.add(0,255,255);l.add(255,
0,255);l.add(92,36,110);l.add(0,99,140);l.add(176,196,222);l.add(115,61,26);this.Zb[b]=l;this.r[k++]=["_235_4_O3",b];this.r[k++]=["0_245_5_O4",b];this.r[k++]=["0_245_5_O3",b];this.r[k++]=["58_27_4_O3",b];this.r[k++]=["0_24_4H_O3",b];this.r[k++]=["2_235_4H_O3",b];this.r[k++]=["24_235_4H_O3",b];this.r[k++]=["3_25_4_O2",b];this.r[k++]=["Snake_O5",b];this.r[k++]=["Mites",b];this.r[k++]=["Mites2",b];this.r[k++]=["Mites3",b];b++;l=new t;l.add(48,48,48);l.add(255,128,0);l.add(0,0,255);l.add(32,32,255);l.add(64,
64,255);l.add(96,96,255);this.Zb[b]=l;this.r[k++]=["Alpha-1",b]}}}})();window.BoundingBox=function(t,l,b,k){this.ga=t;this.$=l;this.la=b;this.oa=k};(function(){function t(b,k,l){this.L=Array.nb(l,k);this.Ja=Array.nb(l,k);this.Xd=this.he=null;this.j=new BoundingBox(0,0,0,0);this.elapsedTime=this.Ab=this.wb=this.Eb=0;this.g=-1;this.ti=b}function l(){var b=0,l=0,B=0;this.Y=[];this.index=-1;this.Bf=17;this.Cc=null;this.Oc=new Uint8Array(256);for(b=0;256>b;b+=1){l=b;for(B=0;l;B+=1)l&=l-1;this.Oc[b]=B}}t.prototype.pl=function(b,l,B){var u=l.length,r=l[0].length,e=0,C=0,f=0,h=0,a=0,d=0,c=null,w=0,N=B.Ic;B=B.Jc;var M=0,L=0,O=this.he,m=0;Array.zb(this.L,
l);for(C=0;C<u;C+=1){c=this.L[C];for(e=M=0;e<r;e+=1)if(w=c[e])for(f=15;0<=f;f-=1)w&1<<f&&(a=L,h=M,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a+1][h]=m>>16&255,b[a+1][h+1]=m>>24,a+=2,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a+1][h]=m>>16&255,b[a+1][h+1]=m>>24,a+=2,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a+1][h]=m>>16&255,b[a+1][h+1]=m>>24,a+=2,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a+1][h]=m>>16&255,b[a+1][h+1]=m>>24,a+=2,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a+1][h]=
m>>16&255,b[a+1][h+1]=m>>24,a+=2,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a+1][h]=m>>16&255,b[a+1][h+1]=m>>24,a+=2,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a+1][h]=m>>16&255,b[a+1][h+1]=m>>24,a+=2,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a+1][h]=m>>16&255,b[a+1][h+1]=m>>24),M+=N;else M+=N<<4;L+=B}};t.prototype.vl=function(b,l,B){var u=l.length,r=l[0].length,e=0,C=0,f=0,h=0,a=0,d=0,e=0,c=null,w=0,f=0,N=B.Ic,M=B.Jc,L=0,O=0,m=null,L=this.ti.Oc;Array.zb(l,this.L);for(C=0;C<u;C+=1)for(c=
l[C],e=0;e<r;e+=1)(w=c[e])&&(f+=L[w>>8]+L[w&255]);if(f)for(e=1<<B.Ea+B.Ea>>5,m=this.he=new Uint32Array(f*e),C=0;C<u;C+=1){c=l[C];for(e=L=0;e<r;e+=1)if(w=c[e])for(f=15;0<=f;f-=1)w&1<<f&&(a=O,h=L,m[d]=b[a][h]|b[a][h+1]<<8|b[a+1][h]<<16|b[a+1][h+1]<<24,d+=1,a+=2,m[d]=b[a][h]|b[a][h+1]<<8|b[a+1][h]<<16|b[a+1][h+1]<<24,d+=1,a+=2,m[d]=b[a][h]|b[a][h+1]<<8|b[a+1][h]<<16|b[a+1][h+1]<<24,d+=1,a+=2,m[d]=b[a][h]|b[a][h+1]<<8|b[a+1][h]<<16|b[a+1][h+1]<<24,d+=1,a+=2,m[d]=b[a][h]|b[a][h+1]<<8|b[a+1][h]<<16|b[a+
1][h+1]<<24,d+=1,a+=2,m[d]=b[a][h]|b[a][h+1]<<8|b[a+1][h]<<16|b[a+1][h+1]<<24,d+=1,a+=2,m[d]=b[a][h]|b[a][h+1]<<8|b[a+1][h]<<16|b[a+1][h+1]<<24,d+=1,a+=2,m[d]=b[a][h]|b[a][h+1]<<8|b[a+1][h]<<16|b[a+1][h+1]<<24,d+=1),L+=N;else L+=N<<4;O+=M}else this.he=null};t.prototype.ol=function(b,l,B){var u=l.length,r=l[0].length,e=0,C=0,f=0,h=0,a=0,d=0,c=null,w=0,N=B.Ic<<3;B=B.Jc;var M=0,L=0,O=this.Xd,m=0;Array.zb(this.Ja,l);for(C=0;C<u;C+=1){c=l[C];for(e=M=0;e<r;e+=1)if(w=c[e])for(f=15;0<=f;f-=1){if(w&1<<f)for(h=
M;h<M+N;h+=4)a=L,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=
m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&
255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24,a+=1,m=O[d],d+=1,b[a][h]=m&255,b[a][h+1]=m>>8&255,b[a][h+2]=m>>16&255,b[a][h+3]=m>>24;M+=N}else M+=N<<4;L+=B}};t.prototype.tl=function(b,l,B){var u=l.length,r=l[0].length,e=0,C=0,f=0,h=0,a=0,d=0,e=0,c=null,
w=0,f=0,N=B.Ic<<3,M=B.Jc,L=0,O=0,m=null,L=this.ti.Oc;Array.zb(l,this.Ja);for(C=0;C<u;C+=1)for(c=l[C],e=0;e<r;e+=1)(w=c[e])&&(f+=L[w>>8]+L[w&255]);if(f)for(e=1<<B.Ea+B.Ea>>2,m=this.Xd=new Uint32Array(f*e),C=0;C<u;C+=1){c=l[C];for(e=L=0;e<r;e+=1)if(w=c[e])for(f=15;0<=f;f-=1){if(w&1<<f)for(h=L;h<L+N;h+=4)a=O,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,a+=1,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,a+=1,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,a+=1,m[d]=
b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,a+=1,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,a+=1,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,a+=1,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,a+=1,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,a+=1,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,a+=1,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,a+=1,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,
a+=1,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,a+=1,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,a+=1,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,a+=1,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1,a+=1,m[d]=b[a][h]|b[a][h+1]<<8|b[a][h+2]<<16|b[a][h+3]<<24,d+=1;L+=N}else L+=N<<4;O+=M}else this.Xd=null};l.prototype.reset=function(){this.Y=[];this.index=-1};l.prototype.Al=function(b){var l=null;0<this.Y.length&&(l=this.Y[this.index],l.g>b&&(l=
null,0<this.index&&(this.Y.pop(),this.index-=1,0<=this.index&&(l=this.Y[this.index]))));return l};l.prototype.Be=function(b,l,B,u,r,e,C,f,h,a,d,c,w,N){var M=null,M=0;if(N)M=this.Cc;else if(this.Y.length<this.Bf)M=this.mg(d,c,!1),this.index+=1;else{this.index+=1;if(this.index>=this.Bf){this.index=this.Bf-1;for(M=0;M<this.Bf-1;M+=1)this.Y[M]=this.Y[M+1];this.Y.pop();this.mg(d,c,!1)}M=this.Y[this.index]}M.vl(b,l,w);M.tl(B,u,w);M.j.ga=r.ga;M.j.la=r.la;M.j.$=r.$;M.j.oa=r.oa;M.Eb=e;M.wb=C;M.Ab=f;M.elapsedTime=
h;M.g=a};l.prototype.mg=function(b,l,B){b=new t(this,b,l);B?this.Cc=b:this.Y[this.Y.length]=b;return b};l.prototype.Ki=function(b,l,B,u){var r=b.L,e=b.Ja,C=b.L.length,f=C>>1,h=b.L[0].length>>1,a=0;b.L=Array.nb(B,l);for(b.Ja=Array.nb(B,l);a<C;)b.L[a+f].set(r[a],h),b.Ja[a+f].set(e[a],h),a+=1;b.j.ga+=u;b.j.la+=u;b.j.$+=u;b.j.oa+=u};l.prototype.nl=function(b,l,B){var u=0,r=this.Y.length;for(this.Ki(this.Cc,b,l,B);u<r;)this.Ki(this.Y[u],b,l,B),u+=1};window.SnapshotManager=l;window.Snapshot=t})();(function(){function t(a,d){var c,w,b,e=!0;this.name=a;this.Yb=this.Tb=0;w=d.length;for(c=0;c<w;){b=d[c];switch(b){case "B":case "b":e=!1;break;case "S":case "s":e=!0;break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":e?this.Tb|=1<<parseInt(b,10):this.Yb|=1<<parseInt(b,10);break;case "/":e=!1;break;default:this.Yb=this.Tb=-1,c=w}c+=1}}function l(a,d,c){this.U=d;this.O=a;this.Wa=c}function b(a,d,c){this.red=a;this.green=d;this.blue=c}function k(a,d){this.p=a;this.q=
d}function B(a,d,c,w,b){this.wd=this.lb=!1;this.elapsedTime=0;this.eb=new SnapshotManager;this.ad=u.Vf;this.Ka=this.fj=!1;this.Pg=this.j=null;this.title="LifeViewer";this.width=w;this.height=b;this.Ea=4;this.Ic=1<<this.Ea>>3;this.Jc=1<<this.Ea;this.na=this.width>>this.Ea;this.va=this.height>>this.Ea;this.Cc=this.eb.mg((this.na-1>>4)+1,this.va,!0);this.e=d;this.d=c;this.Ab=this.wb=this.Eb=0;this.hb=64;this.pa=127;this.tg=63;this.ce=1;this.Wg=this.Wa=0;this.f=1;this.fc=this.ac=!0;this.kc=this.yb=1;
this.jg=30;this.Tb=12;this.Yb=8;this.l=this.g=0;this.zoom=6;this.I=this.H=0;this.Ra=.1;this.aa=0;this.da=1;this.ca=this.ba=0;this.m=.1;this.$g=littleEndian;this.Oa=[];this.md=this.Ib=this.Nb=this.Qd=this.Xb=this.$b=null;this.Ta=11;this.qc=this.Fa=this.sg=null;this.c=a;this.bb=this.Ya=0;this.L=Array.nb(this.va,(this.na-1>>4)+1);this.Sa=Array.nb(this.va,(this.na-1>>4)+1);this.ya=Array.Ba(this.height,(this.width-1>>3)+1,0);this.qb=Array.Ba(this.height,(this.width-1>>3)+1,0);this.af=new Uint32Array(this.e);
this.Pc=new Uint8Array((this.width-1>>3)+1);this.Qc=new Uint16Array(this.na>>4);this.Ze=new Uint8Array(this.width);this.X=Array.Ba(this.height,this.width,this.Wa);this.rb=Array.Ba(this.height,this.width,this.Wa);this.Ja=Array.nb(this.va,(this.na-1>>4)+1);this.Za=Array.nb(this.va,(this.na-1>>4)+1);this.cd=0;this.Hd=new Uint8Array(256);this.xd=new Uint8Array(256);this.qd=new Uint8Array(256);this.Db=new Uint32Array(256);this.Ng=new Uint8Array(u.ke);this.Og=new Uint8Array(u.ke);this.Yh=new Uint8Array(2*
(this.pa+1));this.Zh=Array.Ba(256,8,0);this.zd=this.ni=5263440;this.Ig=-1;this.yd=this.mi=7368816;this.Hg=-1;this.pc=10;this.Oc=new Uint8Array(256);this.bf=new Uint8Array((this.width-1>>3)+1);this.$e=new Uint8Array((this.width-1>>3)+1);this.Bd=8192}var u={ke:262144,Vf:32},r=new Uint8Array(u.ke),e=new Uint8Array(u.ke),C=-1,f=-1,h={Qf:[],length:function(){return this.Qf.length},Ae:function(a){return this.Qf[a]},add:function(a,d){var c,w,b,e=!1;w=this.Qf;b=w.length;c=new t(a,d);0<=c.Tb&&(e=!0,w[b]=c);
return e},sl:function(a,d){var c,w,b,e;c=this.Qf;b=c.length;w=0;for(e=!1;w<b&&!e;)d===c[w].Tb&&a===c[w].Yb?e=!0:w+=1;e||(w=-1);return w},rl:function(a,d){var c,w;w="B";for(c=0;9>c;c+=1)a&1<<c&&(w+=c);w+="/S";for(c=0;9>c;c+=1)d&1<<c&&(w+=c);return w}};l.prototype.Ak=function(){var a=!0;this.U.p.Qg(this.U.q)&&this.O.p.Qg(this.O.q)&&this.O.p.Qg(this.Wa)&&(a=!1);return a};b.prototype.set=function(a){this.red=a.red;this.green=a.green;this.blue=a.blue};b.prototype.Qg=function(a){var d=!1;this.red===a.red&&
this.green===a.green&&this.blue===a.blue&&(d=!0);return d};k.prototype.set=function(a){this.p.set(a.p);this.q.set(a.q)};B.prototype.Rf=function(a,d,c){var w=this.eb.Y.length,b=this.eb.Al(a),e=!0;w!==this.eb.Y.length&&(this.ad-=u.Vf);if(b){for(this.Mi(b);this.g<a-1;)this.ve(!1,this.elapsedTime,!0),this.cf();this.g<a&&this.ve(d,this.elapsedTime,!0);e=this.cf();this.elapsedTime=c-(c-b.elapsedTime)/(a-b.g+1)}return e};B.prototype.Mi=function(a){var d=null,c=null,w=0,b=0,e=this.Pc,f=this.Ze;a.g&1?(d=this.qb,
c=this.Sa):(d=this.ya,c=this.L);b=d.length;for(w=0;w<b;w+=1)d[w].set(e),this.X[w].set(f);a.pl(d,c,this);a.ol(this.X,this.Ja,this);Array.zb(this.Za,c);Array.zb(this.Za,this.Ja);this.j.ga=a.j.ga;this.j.$=a.j.$;this.j.la=a.j.la;this.j.oa=a.j.oa;this.Eb=a.Eb;this.wb=a.wb;this.Ab=a.Ab;this.g=a.g;this.elapsedTime=a.elapsedTime};B.prototype.Be=function(a){var d=null,c=null;this.g&1?(d=this.qb,c=this.Sa):(d=this.ya,c=this.L);this.Ni(!1,d,c,a)};B.prototype.ql=function(){this.Mi(this.Cc);Array.zb(this.ya,this.qb);
Array.zb(this.L,this.Sa);this.eb.reset();this.ad=u.Vf;this.Be(0)};B.prototype.Ni=function(a,d,c,w){this.eb.Be(d,c,this.X,this.Za,this.j,this.Eb,this.wb,this.Ab,w,this.g,(this.na-1>>4)+1,this.va,this,a)};B.prototype.ul=function(){this.eb.reset();this.Ni(!0,this.ya,this.L,0);this.Be(0)};B.prototype.Jg=function(){var a=this.ya,d=this.qb,c=this.X,w=this.rb,b=this.L,e=this.Sa,f=this.Ja,h=this.Za,m=this.height,F=this.va,n=this.width>>1,g=this.height>>1,q=0,l=q=0;if(this.width<this.Bd){this.width*=2;this.height*=
2;this.ya=Array.Ba(this.height,(this.width-1>>3)+1,0);this.qb=Array.Ba(this.height,(this.width-1>>3)+1,0);this.na=this.width>>this.Ea;this.va=this.height>>this.Ea;this.L=Array.nb(this.va,(this.na-1>>4)+1);this.Sa=Array.nb(this.va,(this.na-1>>4)+1);this.Ja=Array.nb(this.va,(this.na-1>>4)+1);this.Za=Array.nb(this.va,(this.na-1>>4)+1);this.Pc=new Uint8Array((this.width-1>>3)+1);this.Qc=new Uint16Array(this.na>>4);l=this.na>>4;for(q=0;q<l;q+=1)this.Qc[q]=0;this.Ze=new Uint8Array(this.width);this.bf=new Uint8Array((this.width-
1>>3)+1);this.$e=new Uint8Array((this.width-1>>3)+1);this.X=Array.Ba(this.height,this.width,this.Wa);this.rb=Array.Ba(this.height,this.width,this.Wa);this.Ya=this.width-1;this.bb=this.height-1;for(q=0;q<m;q+=1)this.ya[q+g].set(a[q],n>>3),this.qb[q+g].set(d[q],n>>3),this.X[q+g].set(c[q],n),this.rb[q+g].set(w[q],n);g=F>>1;for(q=0;q<F;q+=1)this.L[q+g].set(b[q],this.L[q].length>>2),this.Sa[q+g].set(e[q],this.Sa[q].length>>2),this.Ja[q+g].set(f[q],this.Ja[q].length>>2),this.Za[q+g].set(h[q],this.Za[q].length>>
2);n=this.width>>2;g=this.width>>2;this.eb.nl((this.na-1>>4)+1,this.va,n);this.H+=n;this.I+=g;this.j.ga+=n;this.j.la+=n;this.j.oa+=g;this.j.$+=g}};B.prototype.Hj=function(){var a=this.j,d=this.width,c=this.height,w=!1;d<this.Bd&&(16>a.ga||3>a.$||a.la>d-16||a.oa>c-3)&&(this.Jg(),w=!0);return w};B.prototype.Uk=function(){h.add("2x2","B36/S125");h.add("34 Life","B34/S34");h.add("Amoeba","B357/S1358");h.add("AntiLife","B0123478/S01234678");h.add("Assimilation","B345/S4567");h.add("Bacteria","B34/S456");
h.add("Bugs","B3567/S15678");h.add("Coagulations","B378/S235678");h.add("Conway's Life","B3/S23");h.add("Coral","B3/S45678");h.add("Day & Night","B3678/S34678");h.add("Diamoeba","B35678/S5678");h.add("DotLife","B3/S023");h.add("DryLife","B37/S23");h.add("Fredkin","B1357/S02468");h.add("Gnarl","B1/S1");h.add("H-Trees","B1/S012345678");h.add("HighLife","B36/S23");h.add("Iceballs","B25678/S5678");h.add("InverseLife","B012345678/S34678");h.add("Land Rush","B36/S234578");h.add("Life Without Death","B3/S012345678");
h.add("Live Free or Die","B2/S0");h.add("Long Life","B345/S5");h.add("Majority","B45678/S5678");h.add("Maze","B3/S12345");h.add("Mazectric","B3/S1234");h.add("Move","B368/S245");h.add("Pseudo Life","B357/S238");h.add("Replicator","B1357/S1357");h.add("Seeds","B2/S");h.add("Serviettes","B234/S");h.add("Slow Blob","B367/S125678");h.add("Stains","B3678/S235678");h.add("Vote","B5678/S45678");h.add("Vote 4/5","B4678/S35678");h.add("Walled Cities","B45678/S2345");h.add("B234/S1234","B234/S1234")};B.prototype.Ck=
function(){var a,d,c,w=this.Oc;for(a=0;256>a;a+=1){d=a;for(c=0;d;c+=1)d&=d-1;w[a]=c}};B.prototype.Dk=function(){var a,d,c=this.Zh,w=this.hb,b;for(a=0;256>a;a+=1)for(b=c[a],d=0;8>d;d+=1)b[d]=a&1<<7-d?w:0};B.prototype.ll=function(a){for(var d=0,c=0,w,b=0,e=this.Oc,d=this.j,f=d.ga>>3,h=d.la>>3,m=d.oa,d=d.$;d<=m;d+=1)for(w=a[d],c=f;c<=h;c+=1)b+=e[w[c]];this.Eb=b;this.Ab=this.wb=0};B.prototype.Ji=function(a,d){var c=this.c,w=0,b=0,w=this.$g?4278190080:255;this.e=a;this.d=d;this.sg=this.Fa=this.qc=null;
this.qc=c.createImageData(c.canvas.width,c.canvas.height);this.qc.data.buffer?this.Fa=new Uint32Array(this.qc.data.buffer):(this.Fa=new Uint32Array(this.qc.data.length>>2),this.sg=new Uint8Array(this.Fa.buffer));this.af=new Uint32Array(a);for(b=0;b<a;b+=1)this.af[b]=w;this.Ij()};B.prototype.Pj=function(a){for(var d=0,c=0,w=this.X,b=null,e=a.width,f=a.height,h=this.width-e>>1,m=this.height-f>>1,F=this.Ya,n=this.bb,g=null,q=this.ce,c=0;c<f;c+=1)for(g=a.pb[c],b=w[c+m&n],d=0;d<e;d+=1)2===g[d]&&(b[d+h&
F]=q)};B.prototype.kl=function(a){for(var d=0,c=0,w=0,b=this.X,e=this.Zh,f,h,m,d=this.j,F=d.ga>>3,n=d.la>>3,g=d.oa,c=d.$;c<=g;c+=1)for(f=a[c],h=b[c],w=F<<3,d=F;d<=n;d+=1)m=e[f[d]],h[w]=m[0],w+=1,h[w]=m[1],w+=1,h[w]=m[2],w+=1,h[w]=m[3],w+=1,h[w]=m[4],w+=1,h[w]=m[5],w+=1,h[w]=m[6],w+=1,h[w]=m[7],w+=1};B.prototype.Ek=function(a,d,c){var w=0,b=0,e=this.Wa,f=this.Pc,h=this.Ze,m=this.af,F=this.Qc,n;n=this.$g?4278190080:255;this.wd=!1;this.Ya=this.width-1;this.bb=this.height-1;this.j=new BoundingBox(0,0,
this.width-1,this.height-1);this.Pg=new BoundingBox(0,0,this.width-1,this.height-1);this.c=a;this.Dk();this.Uk();this.Ji(d,c);b=(this.width-1>>3)+1;for(w=0;w<b;w+=1)f[w]=0;b=this.width;for(w=0;w<b;w+=1)h[w]=e;b=this.na>>4;for(w=0;w<b;w+=1)F[w]=0;for(w=0;w<d;w+=1)m[w]=n;this.Ck();this.Sj();this.Ec(1,1);this.$h();this.Rj();this.ea(1);this.Xh()};B.prototype.Sj=function(){var a=0;this.Oa[a]=new l(new k(new b(0,0,0),new b(0,0,0)),new k(new b(255,255,255),new b(255,255,255)),new b(0,0,0));a+=1;this.Oa[a]=
new l(new k(new b(0,0,47),new b(0,0,255)),new k(new b(0,255,255),new b(255,255,255)),new b(0,0,0));a+=1;this.Oa[a]=new l(new k(new b(32,0,0),new b(160,0,0)),new k(new b(255,144,0),new b(255,255,0)),new b(0,0,0));a+=1;this.Oa[a]=new l(new k(new b(0,24,0),new b(0,128,0)),new k(new b(0,255,255),new b(255,255,255)),new b(0,0,0));a+=1;this.Oa[a]=new l(new k(new b(0,47,0),new b(128,0,128)),new k(new b(255,255,0),new b(255,255,255)),new b(0,32,128));a+=1;this.Oa[a]=new l(new k(new b(16,16,16),new b(104,
104,104)),new k(new b(176,176,176),new b(255,255,255)),new b(0,0,0));a+=1;this.Oa[a]=new l(new k(new b(255,255,255),new b(255,255,255)),new k(new b(0,0,0),new b(0,0,0)),new b(255,255,255));a+=1;this.Oa[a]=new l(new k(new b(240,240,240),new b(0,255,255)),new k(new b(0,0,255),new b(0,0,0)),new b(255,255,255));a+=1;this.Oa[a]=new l(new k(new b(240,240,240),new b(240,240,240)),new k(new b(240,240,240),new b(240,240,240)),new b(0,0,0));a+=1;this.Oa[a]=new l(new k(new b(160,0,0),new b(160,0,0)),new k(new b(240,
240,240),new b(240,240,240)),new b(0,0,0));a+=1;this.Oa[a]=new l(new k(new b(0,0,96),new b(0,0,160)),new k(new b(0,240,0),new b(16,255,16)),new b(0,0,0));this.Oa[a+1]=new l(new k(new b(0,0,0),new b(0,0,0)),new k(new b(0,0,0),new b(0,0,0)),new b(0,0,0));this.Xb=new k(new b(0,0,0),new b(0,0,0));this.$b=new k(new b(0,0,0),new b(0,0,0));this.Qd=new b(0,0,0);this.Ib=new k(new b(0,0,0),new b(0,0,0));this.Nb=new k(new b(0,0,0),new b(0,0,0));this.md=new b(0,0,0)};B.prototype.Ec=function(a,d){var c=this.Oa[a];
this.yb=a;this.Xb.set(this.Ib);this.$b.set(this.Nb);this.Qd.set(this.md);this.Ib.set(c.U);this.Nb.set(c.O);this.md.set(c.Wa);this.kc=d;this.fj=c.Ak()};B.prototype.Rj=function(){var a,d,c,w,b,e;a=this.Yh;d=this.pa;c=this.hb;w=this.ce;b=this.tg;a[0]=0;a[d+1]=c;for(e=1;e<d+1;e+=1)a[e]=Math.min(Math.max(e-1,w),b),a[e+d+1]=Math.max(Math.min(e+1,d),c)};B.prototype.$h=function(){var a,d,c,w,b;d=(this.kc-1)/this.jg;a=0;this.Hd[a]=this.Qd.red*d+this.md.red*(1-d);this.xd[a]=this.Qd.green*d+this.md.green*(1-
d);this.qd[a]=this.Qd.blue*d+this.md.blue*(1-d);for(a=this.ce;a<=this.tg;a+=1)c=1-(a-this.ce)/(this.tg-this.ce),w=this.$b.p.red*c+this.$b.q.red*(1-c),b=this.Nb.p.red*c+this.Nb.q.red*(1-c),this.Hd[a]=w*d+b*(1-d),w=this.$b.p.green*c+this.$b.q.green*(1-c),b=this.Nb.p.green*c+this.Nb.q.green*(1-c),this.xd[a]=w*d+b*(1-d),w=this.$b.p.blue*c+this.$b.q.blue*(1-c),b=this.Nb.p.blue*c+this.Nb.q.blue*(1-c),this.qd[a]=w*d+b*(1-d);for(a=this.hb;a<=this.pa;a+=1)c=1-(a-this.hb)/(this.pa-this.hb),w=this.Xb.p.red*
c+this.Xb.q.red*(1-c),b=this.Ib.p.red*c+this.Ib.q.red*(1-c),this.Hd[a]=w*d+b*(1-d),w=this.Xb.p.green*c+this.Xb.q.green*(1-c),b=this.Ib.p.green*c+this.Ib.q.green*(1-c),this.xd[a]=w*d+b*(1-d),w=this.Xb.p.blue*c+this.Xb.q.blue*(1-c),b=this.Ib.p.blue*c+this.Ib.q.blue*(1-c),this.qd[a]=w*d+b*(1-d)};B.prototype.Yj=function(a){for(var d=this.Hd,c=this.xd,w=this.qd,b=0,e=0,b=0;b<a.length;b+=1)e=a[b],d[b]=e>>16,c[b]=e>>8&255,w[b]=e&255;this.kc=0};B.prototype.Uj=function(){var a=this.Hd,d=this.xd,c=this.qd;
a[129]=0;d[129]=240;c[129]=0;a[130]=0;d[130]=0;c[130]=96;a[131]=216;d[131]=255;c[131]=216;a[132]=255;d[132]=0;c[132]=0;a[133]=255;d[133]=255;c[133]=0;a[134]=96;d[134]=96;c[134]=96};B.prototype.ea=function(a){var d=this.Hd,c=this.xd,w=this.qd,b=this.Db,e=this.zd,f=this.yd,h=0;if(this.$g){for(h=0;h<this.hb;h+=1)b[h]=-16777216|w[h]<<16|c[h]<<8|d[h];for(h=this.hb;h<=this.pa;h+=1)b[h]=-16777216|w[h]*a<<16|c[h]*a<<8|d[h]*a;this.Ig=-16777216|(e&255)<<16|(e>>8&255)<<8|e>>16;this.Hg=-16777216|(f&255)<<16|
(f>>8&255)<<8|f>>16;for(h=this.pa+1;256>h;h+=1)b[h]=-16777216|w[h]*a<<16|c[h]*a<<8|d[h]*a}else{for(h=0;h<this.hb;h+=1)b[h]=d[h]<<24|c[h]<<16|w[h]<<8|255;for(h=this.hb;h<=this.pa;h+=1)b[h]=d[h]*a<<24|c[h]*a<<16|w[h]*a<<8|255;this.Ig=(e&255)<<24|(e>>8&255)<<16|e>>16<<8|255;this.Hg=(f&255)<<24|(f>>8&255)<<16|f>>16<<8|255;for(h=this.pa+1;256>h;h+=1)b[h]=d[h]*a<<24|c[h]*a<<16|w[h]*a<<8|255}};B.prototype.Xh=function(){for(var a=this.height,d=this.ya,c=this.qb,w=this.X,b=this.rb,e=this.L,f=this.Ja,h=this.Za,
m=this.Sa,F=this.Pc,n=this.Qc,g=this.Ze,q=0,q=0;q<a;q+=1)d[q].set(F),c[q].set(F),w[q].set(g),b[q].set(g);a=this.va;for(q=0;q<a;q+=1)e[q].set(n),m[q].set(n),f[q].set(n),h[q].set(n)};B.prototype.df=function(a,d,c){for(var w=0,b=0,e=0,f=0,h=u.ke,b=0;b<h;b+=1)w=e=0,b&131072&&(w+=1),b&65536&&(w+=1),b&32768&&(w+=1),b&2048&&(w+=1),b&512&&(w+=1),b&32&&(w+=1),b&16&&(w+=1),b&8&&(w+=1),f=8,b&1024?c&1<<w&&(e|=f):d&1<<w&&(e|=f),w=0,b&65536&&(w+=1),b&32768&&(w+=1),b&16384&&(w+=1),b&1024&&(w+=1),b&256&&(w+=1),b&
16&&(w+=1),b&8&&(w+=1),b&4&&(w+=1),f=4,b&512?c&1<<w&&(e|=f):d&1<<w&&(e|=f),w=0,b&32768&&(w+=1),b&16384&&(w+=1),b&8192&&(w+=1),b&512&&(w+=1),b&128&&(w+=1),b&8&&(w+=1),b&4&&(w+=1),b&2&&(w+=1),f=2,b&256?c&1<<w&&(e|=f):d&1<<w&&(e|=f),w=0,b&16384&&(w+=1),b&8192&&(w+=1),b&4096&&(w+=1),b&256&&(w+=1),b&64&&(w+=1),b&4&&(w+=1),b&2&&(w+=1),b&1&&(w+=1),f=1,b&128?c&1<<w&&(e|=f):d&1<<w&&(e|=f),a[b]=e};B.prototype.Vj=function(){var a=this.Ng,d=this.Og,c=this.Yb,b=this.Tb,h=0,M=0,L=0;if(C===c&&f===b)a.set(r),d.set(e);
else{if(c&1)if(b&256){c=~c&511;b=~b&511;for(L=0;9>L;L+=1)c&1<<L&&(M|=1<<8-L),b&1<<L&&(h|=1<<8-L);this.df(a,h,M);d.set(a)}else{this.df(a,~c&511,~b&511);for(L=M=h=0;9>L;L+=1)c&1<<L&&(M|=1<<8-L),b&1<<L&&(h|=1<<8-L);this.df(d,h,M)}else this.df(a,c,b),d.set(a);C=c;f=b;r.set(a);e.set(d)}};B.prototype.El=function(a,d){this.Yb=a;this.Tb=d;this.Vj()};B.prototype.Zg=function(a){var d=0;a&128?d=0:a&64?d=1:a&32?d=2:a&16?d=3:a&8?d=4:a&4?d=5:a&2?d=6:a&1&&(d=7);return d};B.prototype.oh=function(a){var d=0;a&1?d=
7:a&2?d=6:a&4?d=5:a&8?d=4:a&16?d=3:a&32?d=2:a&64?d=1:a&128&&(d=0);return d};B.prototype.jl=function(a){var d=0,c=0,b=0,e=this.width>>3,f=this.height,h=this.width,l=this.ya,m=null,m=this.rb,F=null,n=this.j,g=this.Pg,q=this.height,k=-1,r=this.width,B=-1,y=0,F=this.bf,d=this.va,Q=this.L,u=null,C=this.Sa,D=this.Ja,v=this.Za,u=this.Qc,p=y=b=c=0;if(this.lb=a)for(c=0;c<f;c+=1){F=m[c];for(d=y=0;d<h;d+=1)b=F[d],y|=b,b&&(d<r&&(r=d),d>B&&(B=d));y&&(c<q&&(q=c),c>k&&(k=c))}else{F.set(this.$e);for(c=0;c<d;c+=1)Q[c].set(u);
for(c=0;c<f;c+=1){m=l[c];for(d=y=0;d<e;d+=1)b=m[d],y|=b,F[d]|=b;y&&(c<q&&(q=c),c>k&&(k=c))}for(d=0;d<e;d+=1)F[d]&&(d<r&&(r=d),d>B&&(B=d));r=(r<<3)+this.Zg(F[r]);B=(B<<3)+this.oh(F[B])}0>k&&(k=this.height-1);q>=this.height&&(q=0);r>=this.width&&(r=0);0>B&&(B=this.width-1);k>this.height-1&&(k=this.height-1);0>q&&(q=0);0>r&&(r=0);B>this.width-1&&(B=this.width-1);n.oa=k;n.$=q;n.ga=r;n.la=B;g.oa=k;g.$=q;g.ga=r;g.la=B;0<r&&(r-=1);0<q&&(q-=1);B<this.width-1&&(B+=1);k<this.height-1&&(k+=1);c=q>>this.Ea;b=
k>>this.Ea;y=r>>this.Ea+4;for(p=B>>this.Ea+4;c<=b;c+=1)for(u=Q[c],d=y;d<=p;d+=1)u[d]=-1;Array.zb(Q,C);Array.zb(Q,D);Array.zb(Q,v)};B.prototype.ve=function(a,d,c){var b=!1;this.g!==this.ad-1||c||(b=a=!0);a?this.Qk():this.Pk();b&&(this.ad+=u.Vf,this.Be(d))};B.prototype.Pk=function(){var a=null,d,c,b,e,f=0,h=0,l=0,m=0,F=0,n=0,g=0,q=0,k=0,r=null,B=null,y=null,Q=null,u=null,C=null,D=null,v=null,p=0,s=0,x=0,z=0,K=0,G=0,A=0,E=0,H=this.bf,I=this.height,J=this.width,t=J>>3,Y=this.j,W=I,X=-1,U=J,V=-1,ca=!1,
da=!1,ea=this.Jc,Z=this.Ic,$=this.va,aa=this.na>>4,fa=this.Qc,ba=this.Pc,R=0;this.g&1?(r=this.qb,B=this.ya,y=this.Sa,Q=this.L,a=this.Og):(r=this.ya,B=this.qb,y=this.L,Q=this.Sa,a=this.Ng);this.g+=1;H.set(this.$e);K=this.cd=0;G=K+ea;for(q=0;q<$;q+=1)Q[q].set(fa);for(q=0;q<$;q+=1){A=0;E=A+Z;u=y[q];C=Q[q];D=0<q?Q[q-1]:fa;v=q<$-1?Q[q+1]:fa;for(k=0;k<aa;k+=1)if(p=u[k]){s=C[k];x=D[k];z=v[k];for(l=15;0<=l;l-=1){if(p&1<<l){this.cd+=1;da=ca=!1;R=0;for(f=K;f<G;f+=1)for(d=0===f?ba:r[f-1],c=r[f],b=f===I-1?ba:
r[f+1],e=B[f],A?(m=d[A-1]<<8,F=c[A-1]<<8,n=b[A-1]<<8):n=F=m=0,m|=d[A],F|=c[A],n|=b[A],h=A;h<E;h+=1)m=(m&511)<<8,F=(F&511)<<8,n=(n&511)<<8,h<t-1&&(m|=d[h+1],F|=c[h+1],n|=b[h+1]),g=a[m>>11|F>>11<<6|n>>11<<12]<<4,g|=a[m>>7&63|(F>>7&63)<<6|(n>>7&63)<<12],e[h]=g,c[h]&&(da=!0),g&&(H[h]|=g,f<W&&(W=f),f>X&&(X=f),ca=!0,f===K?R|=8:f===G-1&&(R|=4),g&128&&h===A&&(R|=1,f===K?R|=64:f===G-1&&(R|=16)),g&1&&h===E-1&&(R|=2,f===K?R|=128:f===G-1&&(R|=32)));ca|da&&(s|=1<<l,R&&(R&1&&(15>l?s|=1<<l+1:0<k&&(C[k-1]|=1)),R&
2&&(0<l?s|=1<<l-1:k<aa-1&&(C[k+1]|=32768)),R&8&&(x|=1<<l),R&4&&(z|=1<<l),R&64&&(15>l?x|=1<<l+1:0<k&&(D[k-1]|=1)),R&128&&(0<l?x|=1<<l-1:k<aa-1&&(D[k+1]|=32768)),R&16&&(15>l?z|=1<<l+1:0<k&&(v[k-1]|=1)),R&32&&(0<l?z|=1<<l-1:k<aa-1&&(v[k+1]|=32768))))}A+=Z;E+=Z}C[k]=s;0<q&&(D[k]=x);q<$-1&&(v[k]=z)}else A+=Z<<4,E+=Z<<4;K+=ea;G+=ea}for(h=0;h<t;h+=1)H[h]&&(h<U&&(U=h),h>V&&(V=h));U=(U<<3)+this.Zg(H[U]);V=(V<<3)+this.oh(H[V]);0>X&&(X=I-1);W>=I&&(W=0);U>=J&&(U=0);0>V&&(V=J-1);X>I-1&&(X=I-1);0>W&&(W=0);0>U&&
(U=0);V>J-1&&(V=J-1);Y.oa=X;Y.$=W;Y.ga=U;Y.la=V};B.prototype.Qk=function(){var a=null,d,c,b,e,f=0,h=0,l=0,m=0,F=0,n=0,g=0,q=0,k=0,r=null,B=null,y=null,Q=null,u=null,C=null,D=null,v=null,p=0,s=0,x=0,z=0,K=0,G=0,A=0,E=0,H=this.bf,I=this.height,J=this.width,t=J>>3,Y=this.j,W=I,X=-1,U=J,V=-1,ca=this.Oc,da=0,ea=0,Z=0,$=!1,aa=!1,fa=this.Jc,ba=this.Ic,R=this.va,ha=this.na>>4,ia=this.Qc,S=0;this.g&1?(r=this.qb,B=this.ya,y=this.Sa,Q=this.L,a=this.Og):(r=this.ya,B=this.qb,y=this.L,Q=this.Sa,a=this.Ng);this.g+=
1;H.set(this.$e);K=this.cd=0;G=K+fa;for(q=0;q<R;q+=1)Q[q].set(ia);for(q=0;q<R;q+=1){A=0;E=A+ba;u=y[q];C=Q[q];D=0<q?Q[q-1]:ia;v=q<R-1?Q[q+1]:ia;for(k=0;k<ha;k+=1)if(p=u[k]){s=C[k];x=D[k];z=v[k];for(l=15;0<=l;l-=1){if(p&1<<l){this.cd+=1;aa=$=!1;S=0;for(f=K;f<G;f+=1)for(d=0===f?this.Pc:r[f-1],c=r[f],b=f===this.height-1?this.Pc:r[f+1],e=B[f],A?(m=d[A-1]<<8,F=c[A-1]<<8,n=b[A-1]<<8):n=F=m=0,m|=d[A],F|=c[A],n|=b[A],h=A;h<E;h+=1)m=(m&511)<<8,F=(F&511)<<8,n=(n&511)<<8,h<t-1&&(m|=d[h+1],F|=c[h+1],n|=b[h+1]),
g=a[m>>11|F>>11<<6|n>>11<<12]<<4,g|=a[m>>7&63|(F>>7&63)<<6|(n>>7&63)<<12],e[h]=g,c[h]&&(aa=!0),da+=ca[g],ea+=ca[g&~c[h]],Z+=ca[c[h]&~g],g&&(H[h]|=g,f<W&&(W=f),f>X&&(X=f),$=!0,g&128&&h===A&&(S|=1,f===K&&(S|=64),f===G-1&&(S|=16)),g&1&&h===E-1&&(S|=2,f===K&&(S|=128),f===G-1&&(S|=32)),f===K&&(S|=8),f===G-1&&(S|=4));if($||aa)s|=1<<l,S&&(S&1&&(15>l?s|=1<<l+1:0<k&&(C[k-1]|=1)),S&2&&(0<l?s|=1<<l-1:k<ha-1&&(C[k+1]|=32768)),S&8&&(x|=1<<l),S&4&&(z|=1<<l),S&64&&(15>l?x|=1<<l+1:0<k&&(D[k-1]|=1)),S&128&&(0<l?x|=
1<<l-1:k<ha-1&&(D[k+1]|=32768)),S&16&&(15>l?z|=1<<l+1:0<k&&(v[k-1]|=1)),S&32&&(0<l?z|=1<<l-1:k<ha-1&&(v[k+1]|=32768)))}A+=ba;E+=ba}C[k]|=s;0<q&&(D[k]|=x);q<R-1&&(v[k]|=z)}else A+=ba<<4,E+=ba<<4;K+=fa;G+=fa}for(h=0;h<t;h+=1)H[h]&&(h<U&&(U=h),h>V&&(V=h));U=(U<<3)+this.Zg(H[U]);V=(V<<3)+this.oh(H[V]);0>X&&(X=I-1);W>=I&&(W=0);U>=J&&(U=0);0>V&&(V=J-1);X>I-1&&(X=I-1);0>W&&(W=0);0>U&&(U=0);V>J-1&&(V=J-1);Y.oa=X;Y.$=W;Y.ga=U;Y.la=V;this.Eb=da;this.wb=ea;this.Ab=Z};B.prototype.cf=function(){var a=0,d=0,c=
0,b=0,e=this.X,f=null,h=null,l=null,m=this.Za,F=this.Ja,n=this.Yh,g=this.pa+1,q=null,k=null,r=null,B=null,y=0,Q=0,u=0,C=0,D=0,v=0,p=0,s=0,x=0,z=0,K=0,G=0,A=this.Jc,E=this.Ic,H=this.va,I=this.na>>4;this.g&1?(q=this.qb,r=this.Sa):(q=this.ya,r=this.L);D=0;v=D+A;for(Q=0;Q<H;Q+=1){p=0;s=p+E;B=r[Q];h=F[Q];l=m[Q];for(u=0;u<I;u+=1){x=B[u]|h[u];z=0;if(x)for(C=15;0<=C;C-=1){if(x&1<<C){G=0;for(a=D;a<v;a+=1)for(k=q[a],f=e[a],c=p<<3,d=p;d<s;d+=1)b=k[d],K|=b,G|=b,b&128?f[c]=n[f[c]+g]:(y=n[f[c]],f[c]=y,G|=1<y),
c+=1,b&64?f[c]=n[f[c]+g]:(y=n[f[c]],f[c]=y,G|=1<y),c+=1,b&32?f[c]=n[f[c]+g]:(y=n[f[c]],f[c]=y,G|=1<y),c+=1,b&16?f[c]=n[f[c]+g]:(y=n[f[c]],f[c]=y,G|=1<y),c+=1,b&8?f[c]=n[f[c]+g]:(y=n[f[c]],f[c]=y,G|=1<y),c+=1,b&4?f[c]=n[f[c]+g]:(y=n[f[c]],f[c]=y,G|=1<y),c+=1,b&2?f[c]=n[f[c]+g]:(y=n[f[c]],f[c]=y,G|=1<y),c+=1,b&1?f[c]=n[f[c]+g]:(y=n[f[c]],f[c]=y,G|=1<y),c+=1;G&&(z|=1<<C)}p+=E;s+=E}else p+=E<<4,s+=E<<4;h[u]=z;l[u]|=z}D+=A;v+=A}return K};B.prototype.fe=function(a,d,c,b,e){var f=this.j,h=this.Pg,l=1,m=
0,F=0,n=l=0,g=f.ga,m=f.la,F=f.oa,f=f.$;this.lb&&(h.ga<g&&(g=h.ga),h.la>m&&(m=h.la),h.oa>F&&(F=h.oa),h.$<f&&(f=h.$));m=m-g+1;F=F-f+1;l=a/m;n=d/F;l=(l>n?n:l)/e;l<c?l=c:l>b&&(l=b);return[l,g+m/2,f+F/2]};B.prototype.gi=function(a,d,c,b,e){var f=Math.abs(c-a),h=Math.abs(b-d),l=a<c?1:-1,m=d<b?1:-1,F=f-h,n=0,g=this.e,q=this.d,k=this.Fa;if(!(0>a&&0>c||a>=g&&c>=g||0>d&&0>b||d>=q&&b>=q))if(0<=a&&a<g&&0<=d&&d<q&&0<=c&&c<g&&0<=b&&b<q)for(k[d*g+a]=e;a!==c||d!==b;)n=F+F,n>-h&&(F-=h,a+=l),n<f&&(F+=f,d+=m),k[d*g+
a]=e;else for(0<=a&&a<g&&0<=d&&d<q&&(k[d*g+a]=e);a!==c||d!==b;)n=F+F,n>-h&&(F-=h,a+=l),n<f&&(F+=f,d+=m),0<=a&&a<g&&0<=d&&d<q&&(k[d*g+a]=e)};B.prototype.bc=function(){for(var a=0,a=0,d=1,c=this.e,b=this.d,e=this.Ig,f=this.Hg,h=this.zoom,l=0,m=e,F=e,n=((this.height/2-this.I)*h+b/2)%h,g=((this.width/2-this.H)*h+c/2)%h,d=2,F=e;d;){l=-(c/2/h)-(this.width/2-this.H)|0;for(a=0;a<=c;a+=h)0<this.pc&&(m=0===l%this.pc?f:e),l+=1,m===F&&this.gi(a+g|0,0,a+g|0,b-1,m);l=-(b/2/h)-(this.height/2-this.I)|0;for(a=n;a<
b;a+=h)0<this.pc&&(m=0===l%this.pc?f:e),l+=1,m===F&&this.gi(0,a|0,c-1,a|0,m);d-=1;F=f}};B.prototype.Mb=function(){return 4<=this.zoom&&0===this.l};B.prototype.Zk=function(){this.kc&&(this.$h(),this.kc-=1,this.kc||(this.Xb.set(this.Ib),this.$b.set(this.Nb),this.Qd.set(this.md)));this.aa=this.l;this.da=this.zoom;this.ba=this.H;this.ca=this.I;this.m=this.Ra/2+1;.5>this.zoom?this.wd?0===this.g?this.il():this.bl():this.el():1>this.zoom?this.wd?0===this.g?this.hl():this.al():this.dl():this.wd?0===this.g?
this.gl():this.$k():this.cl()};B.prototype.bl=function(){var a=this.e>>3,d=this.bb,c=this.Ya,b=this.X,e=this.rb,f=this.Db,h=this.hb,l=this.Fa,m=0,F=0,n=0,g=0,q=0,k=0,r=0,B=0,y=0,u=0,P=0,C=1,D=1,v=0,p=this.Za,s=this.Ea,x=0,z=0,K=m=0,G=0,A=0,E=0,H=0,I=0,J=0,t=0;this.fc&&1<this.m&&(C=this.f);k=Math.sin(this.aa/180*Math.PI)/this.da;r=Math.cos(this.aa/180*Math.PI)/this.da;B=-(this.e/2*-k+this.d/2*r)+this.ca;y=-(this.e/2*r+this.d/2*k)+this.ba;this.ac&&1<this.f&&1<this.m&&(v=.4/(this.f-1),D=.6);this.ea(D);
P=0;q=B;K=k/4;G=r/4;for(F=0;F<this.d;F+=1){g=y;for(n=0;n<a;n+=1){z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15)){H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],x>z&&(z=x),A+=G,E-=K;H+=K;E=I+=G}m=0;H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=e[E&d][A&c],130<x&&(!m||!(m&1)&&x&1)&&(m=x),A+=G,E-=K;H+=K;E=I+=G}if(130<m)if(132===m||134===m)z=z>=h?131:m;else if(131===m||133===m)z=z<h?132:m}l[P]=f[z];P+=1;g+=r;q-=k;z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>
s+4]&1<<15-(g>>s&15)){H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],x>z&&(z=x),A+=G,E-=K;H+=K;E=I+=G}m=0;H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=e[E&d][A&c],130<x&&(!m||!(m&1)&&x&1)&&(m=x),A+=G,E-=K;H+=K;E=I+=G}if(130<m)if(132===m||134===m)z=z>=h?131:m;else if(131===m||133===m)z=z<h?132:m}l[P]=f[z];P+=1;g+=r;q-=k;z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15)){H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],x>z&&(z=x),A+=G,E-=K;H+=K;
E=I+=G}m=0;H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=e[E&d][A&c],130<x&&(!m||!(m&1)&&x&1)&&(m=x),A+=G,E-=K;H+=K;E=I+=G}if(130<m)if(132===m||134===m)z=z>=h?131:m;else if(131===m||133===m)z=z<h?132:m}l[P]=f[z];P+=1;g+=r;q-=k;z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15)){H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],x>z&&(z=x),A+=G,E-=K;H+=K;E=I+=G}m=0;H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=e[E&d][A&c],130<x&&(!m||!(m&1)&&x&1)&&(m=x),A+=G,
E-=K;H+=K;E=I+=G}if(130<m)if(132===m||134===m)z=z>=h?131:m;else if(131===m||133===m)z=z<h?132:m}l[P]=f[z];P+=1;g+=r;q-=k;z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15)){H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],x>z&&(z=x),A+=G,E-=K;H+=K;E=I+=G}m=0;H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=e[E&d][A&c],130<x&&(!m||!(m&1)&&x&1)&&(m=x),A+=G,E-=K;H+=K;E=I+=G}if(130<m)if(132===m||134===m)z=z>=h?131:m;else if(131===m||133===m)z=z<h?132:m}l[P]=f[z];P+=1;
g+=r;q-=k;z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15)){H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],x>z&&(z=x),A+=G,E-=K;H+=K;E=I+=G}m=0;H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=e[E&d][A&c],130<x&&(!m||!(m&1)&&x&1)&&(m=x),A+=G,E-=K;H+=K;E=I+=G}if(130<m)if(132===m||134===m)z=z>=h?131:m;else if(131===m||133===m)z=z<h?132:m}l[P]=f[z];P+=1;g+=r;q-=k;z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15)){H=g;E=I=q;for(t=0;4>t;t+=1){A=
H;for(J=0;4>J;J+=1)x=b[E&d][A&c],x>z&&(z=x),A+=G,E-=K;H+=K;E=I+=G}m=0;H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=e[E&d][A&c],130<x&&(!m||!(m&1)&&x&1)&&(m=x),A+=G,E-=K;H+=K;E=I+=G}if(130<m)if(132===m||134===m)z=z>=h?131:m;else if(131===m||133===m)z=z<h?132:m}l[P]=f[z];P+=1;g+=r;q-=k;z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15)){H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],x>z&&(z=x),A+=G,E-=K;H+=K;E=I+=G}m=0;H=g;E=I=q;for(t=0;4>t;t+=1){A=H;for(J=0;4>
J;J+=1)x=e[E&d][A&c],130<x&&(!m||!(m&1)&&x&1)&&(m=x),A+=G,E-=K;H+=K;E=I+=G}if(130<m)if(132===m||134===m)z=z>=h?131:m;else if(131===m||133===m)z=z<h?132:m}l[P]=f[z];P+=1;g+=r;q-=k}y+=k;q=B+=r}this.Ka&&this.Mb()&&this.bc();for(m=1;m<C;m+=1)for(u=(this.pa+1)/this.f*m|0,D+=v,this.ea(D),k/=this.m,r/=this.m,K=k/4,G=r/4,B=-(this.e/2*-k+this.d/2*r)+this.ca,y=-(this.e/2*r+this.d/2*k)+this.ba,P=0,q=B,F=0;F<this.d;F+=1){g=y;for(n=0;n<a;n+=1){z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15))for(H=
g,E=I=q,t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],A+=G,E-=K,x>z&&(z=x);H+=K;E=I+=G}z>=u&&(l[P]=f[z]);P+=1;g+=r;q-=k;z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15))for(H=g,E=I=q,t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],A+=G,E-=K,x>z&&(z=x);H+=K;E=I+=G}z>=u&&(l[P]=f[z]);P+=1;g+=r;q-=k;z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15))for(H=g,E=I=q,t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],A+=G,E-=K,x>z&&(z=x);H+=K;E=I+=G}z>=u&&(l[P]=f[z]);
P+=1;g+=r;q-=k;z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15))for(H=g,E=I=q,t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],A+=G,E-=K,x>z&&(z=x);H+=K;E=I+=G}z>=u&&(l[P]=f[z]);P+=1;g+=r;q-=k;z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15))for(H=g,E=I=q,t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],A+=G,E-=K,x>z&&(z=x);H+=K;E=I+=G}z>=u&&(l[P]=f[z]);P+=1;g+=r;q-=k;z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15))for(H=g,E=I=q,t=0;4>t;t+=
1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],A+=G,E-=K,x>z&&(z=x);H+=K;E=I+=G}z>=u&&(l[P]=f[z]);P+=1;g+=r;q-=k;z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15))for(H=g,E=I=q,t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],A+=G,E-=K,x>z&&(z=x);H+=K;E=I+=G}z>=u&&(l[P]=f[z]);P+=1;g+=r;q-=k;z=0;if((g|0)===(g&c)&&(q|0)===(q&d)&&p[q>>s][g>>s+4]&1<<15-(g>>s&15))for(H=g,E=I=q,t=0;4>t;t+=1){A=H;for(J=0;4>J;J+=1)x=b[E&d][A&c],A+=G,E-=K,x>z&&(z=x);H+=K;E=I+=G}z>=u&&(l[P]=f[z]);P+=1;g+=r;q-=k}y+=
k;q=B+=r}};B.prototype.il=function(){var a=this.e>>3,d=this.bb,c=this.Ya,b=this.X,e=this.rb,f=this.Db,h=this.Fa,l=0,m=0,F=0,n=0,g=0,q=0,k=0,r=0,B=0,y=0,u=0,t=1,C=1,D=0,v=this.Za,p=this.Ea,s=0,x=0,z=0,K=0,G=0,A=0,E=0,H=0,I=0,J=0;this.fc&&1<this.m&&(t=this.f);q=Math.sin(this.aa/180*Math.PI)/this.da;k=Math.cos(this.aa/180*Math.PI)/this.da;r=-(this.e/2*-q+this.d/2*k)+this.ca;B=-(this.e/2*k+this.d/2*q)+this.ba;this.ac&&1<this.f&&1<this.m&&(D=.4/(this.f-1),C=.6);this.ea(C);u=0;g=r;z=q/4;K=k/4;for(m=0;m<
this.d;m+=1){n=B;for(F=0;F<a;F+=1){x=0;if((n|0)===(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=0;4>I;I+=1)s=e[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}h[u]=f[x];u+=1;n+=k;g-=q;x=0;if((n|0)===(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=0;4>I;I+=1)s=e[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}h[u]=f[x];u+=1;n+=k;g-=q;x=0;if((n|0)===(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>
J;J+=1){G=E;for(I=0;4>I;I+=1)s=e[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}h[u]=f[x];u+=1;n+=k;g-=q;x=0;if((n|0)===(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=0;4>I;I+=1)s=e[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}h[u]=f[x];u+=1;n+=k;g-=q;x=0;if((n|0)===(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=0;4>I;I+=1)s=e[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}h[u]=f[x];u+=1;n+=k;g-=q;x=0;if((n|0)===(n&c)&&
(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=0;4>I;I+=1)s=e[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}h[u]=f[x];u+=1;n+=k;g-=q;x=0;if((n|0)===(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=0;4>I;I+=1)s=e[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}h[u]=f[x];u+=1;n+=k;g-=q;x=0;if((n|0)===(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=0;4>I;I+=1)s=e[A&d][G&c],G+=K,A-=z,s>
x&&(x=s);E+=z;A=H+=K}h[u]=f[x];u+=1;n+=k;g-=q}B+=q;g=r+=k}this.Ka&&this.Mb()&&this.bc();for(l=1;l<t;l+=1)for(y=(this.pa+1)/this.f*l|0,C+=D,this.ea(C),q/=this.m,k/=this.m,z=q/4,K=k/4,r=-(this.e/2*-q+this.d/2*k)+this.ca,B=-(this.e/2*k+this.d/2*q)+this.ba,u=0,g=r,m=0;m<this.d;m+=1){n=B;for(F=0;F<a;F+=1){x=0;if((n|0)===(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=0;4>I;I+=1)s=b[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}x>=y&&(h[u]=f[x]);u+=1;n+=k;g-=q;x=
0;if((n|0)===(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=0;4>I;I+=1)s=b[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}x>=y&&(h[u]=f[x]);u+=1;n+=k;g-=q;x=0;if((n|0)===(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=0;4>I;I+=1)s=b[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}x>=y&&(h[u]=f[x]);u+=1;n+=k;g-=q;x=0;if((n|0)===(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=
0;4>I;I+=1)s=b[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}x>=y&&(h[u]=f[x]);u+=1;n+=k;g-=q;x=0;if((n|0)===(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=0;4>I;I+=1)s=b[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}x>=y&&(h[u]=f[x]);u+=1;n+=k;g-=q;x=0;if((n|0)===(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=0;4>I;I+=1)s=b[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}x>=y&&(h[u]=f[x]);u+=1;n+=k;g-=q;x=0;if((n|0)===
(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=0;4>I;I+=1)s=b[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}x>=y&&(h[u]=f[x]);u+=1;n+=k;g-=q;x=0;if((n|0)===(n&c)&&(g|0)===(g&d)&&v[g>>p][n>>p+4]&1<<15-(n>>p&15))for(E=n,A=H=g,J=0;4>J;J+=1){G=E;for(I=0;4>I;I+=1)s=b[A&d][G&c],G+=K,A-=z,s>x&&(x=s);E+=z;A=H+=K}x>=y&&(h[u]=f[x]);u+=1;n+=k;g-=q}B+=q;g=r+=k}};B.prototype.el=function(){var a=this.e>>3,d=this.bb,c=this.Ya,b=this.X,e=this.Db,f=this.Fa,h=0,l=0,m=0,F=0,
n=0,g=0,q=0,k=0,r=0,B=0,y=0,u=1,t=1,C=0,D=this.Za,v=this.Ea,p=0,s=0,x=0,z=0,K=0,G=0,A=0,E=0,H=0,I=0;this.fc&&1<this.m&&(u=this.f);g=Math.sin(this.aa/180*Math.PI)/this.da;q=Math.cos(this.aa/180*Math.PI)/this.da;k=-(this.e/2*-g+this.d/2*q)+this.ca;r=-(this.e/2*q+this.d/2*g)+this.ba;this.ac&&1<this.f&&1<this.m&&(C=.4/(this.f-1),t=.6);this.ea(t);y=0;n=k;x=g/4;z=q/4;for(l=0;l<this.d;l+=1){F=r;for(m=0;m<a;m+=1){s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=
1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&(s=p);A+=x;G=E+=z}f[y]=e[s];y+=1;F+=q;n-=g;s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&(s=p);A+=x;G=E+=z}f[y]=e[s];y+=1;F+=q;n-=g;s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&(s=p);A+=x;G=E+=z}f[y]=e[s];y+=1;F+=q;n-=g;s=0;if((F|0)===(F&c)&&(n|
0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&(s=p);A+=x;G=E+=z}f[y]=e[s];y+=1;F+=q;n-=g;s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&(s=p);A+=x;G=E+=z}f[y]=e[s];y+=1;F+=q;n-=g;s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&
(s=p);A+=x;G=E+=z}f[y]=e[s];y+=1;F+=q;n-=g;s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&(s=p);A+=x;G=E+=z}f[y]=e[s];y+=1;F+=q;n-=g;s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&(s=p);A+=x;G=E+=z}f[y]=e[s];y+=1;F+=q;n-=g}r+=g;n=k+=q}this.Ka&&this.Mb()&&this.bc();for(h=1;h<u;h+=1)for(B=(this.pa+1)/this.f*
h|0,t+=C,this.ea(t),g/=this.m,q/=this.m,x=g/4,z=q/4,k=-(this.e/2*-g+this.d/2*q)+this.ca,r=-(this.e/2*q+this.d/2*g)+this.ba,y=0,n=k,l=0;l<this.d;l+=1){F=r;for(m=0;m<a;m+=1){s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&(s=p);A+=x;G=E+=z}s>=B&&(f[y]=e[s]);y+=1;F+=q;n-=g;s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],
K+=z,G-=x,p>s&&(s=p);A+=x;G=E+=z}s>=B&&(f[y]=e[s]);y+=1;F+=q;n-=g;s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&(s=p);A+=x;G=E+=z}s>=B&&(f[y]=e[s]);y+=1;F+=q;n-=g;s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&(s=p);A+=x;G=E+=z}s>=B&&(f[y]=e[s]);y+=1;F+=q;n-=g;s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>
v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&(s=p);A+=x;G=E+=z}s>=B&&(f[y]=e[s]);y+=1;F+=q;n-=g;s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&(s=p);A+=x;G=E+=z}s>=B&&(f[y]=e[s]);y+=1;F+=q;n-=g;s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&
(s=p);A+=x;G=E+=z}s>=B&&(f[y]=e[s]);y+=1;F+=q;n-=g;s=0;if((F|0)===(F&c)&&(n|0)===(n&d)&&D[n>>v][F>>v+4]&1<<15-(F>>v&15))for(A=F,G=E=n,I=0;4>I;I+=1){K=A;for(H=0;4>H;H+=1)p=b[G&d][K&c],K+=z,G-=x,p>s&&(s=p);A+=x;G=E+=z}s>=B&&(f[y]=e[s]);y+=1;F+=q;n-=g}r+=g;n=k+=q}};B.prototype.al=function(){var a=this.e>>3,d=this.bb,c=this.Ya,b=this.hb,e=this.X,f=this.rb,h=this.Db,l=this.Fa,m=0,F=0,n=0,g=0,q=0,k=0,r=0,B=0,y=0,u=0,t=0,C=1,D=1,v=0,p=0,s=0,x=m=0,z=0;this.fc&&1<this.m&&(C=this.f);k=Math.sin(this.aa/180*
Math.PI)/this.da;r=Math.cos(this.aa/180*Math.PI)/this.da;B=-(this.e/2*-k+this.d/2*r)+this.ca;y=-(this.e/2*r+this.d/2*k)+this.ba;this.ac&&1<this.f&&1<this.m&&(v=.4/(this.f-1),D=.6);this.ea(D);t=0;q=B;x=k/2;z=r/2;for(F=0;F<this.d;F+=1){g=y;for(n=0;n<a;n+=1){(g|0)===(g&c)&&(q|0)===(q&d)?(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p),m=f[q&d][g&c],p=f[q-x&d][g+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),p=f[q+z&d][g+x&c],130<p&&(!m||!(m&1)&&p&1)&&(m=
p),p=f[q+z-x&d][g+x+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),130<m&&(132===m||134===m?s=s>=b?131:m:131===m||133===m?s=s<b?132:m:s<b&&(s=m))):s=0;l[t]=h[s];t+=1;g+=r;q-=k;if((g|0)===(g&c)&&(q|0)===(q&d)){if(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p),m=f[q&d][g&c],p=f[q-x&d][g+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),p=f[q+z&d][g+x&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),p=f[q+z-x&d][g+x+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),130<m)if(132===m||134===m)s=
s>=b?131:m;else if(131===m||133===m)s=s<b?132:m}else s=0;l[t]=h[s];t+=1;g+=r;q-=k;if((g|0)===(g&c)&&(q|0)===(q&d)){if(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p),m=f[q&d][g&c],p=f[q-x&d][g+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),p=f[q+z&d][g+x&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),p=f[q+z-x&d][g+x+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),130<m)if(132===m||134===m)s=s>=b?131:m;else if(131===m||133===m)s=s<b?132:m}else s=0;l[t]=h[s];t+=1;g+=r;q-=k;
if((g|0)===(g&c)&&(q|0)===(q&d)){if(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p),m=f[q&d][g&c],p=f[q-x&d][g+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),p=f[q+z&d][g+x&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),p=f[q+z-x&d][g+x+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),130<m)if(132===m||134===m)s=s>=b?131:m;else if(131===m||133===m)s=s<b?132:m}else s=0;l[t]=h[s];t+=1;g+=r;q-=k;if((g|0)===(g&c)&&(q|0)===(q&d)){if(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+
z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p),m=f[q&d][g&c],p=f[q-x&d][g+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),p=f[q+z&d][g+x&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),p=f[q+z-x&d][g+x+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),130<m)if(132===m||134===m)s=s>=b?131:m;else if(131===m||133===m)s=s<b?132:m}else s=0;l[t]=h[s];t+=1;g+=r;q-=k;if((g|0)===(g&c)&&(q|0)===(q&d)){if(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p),m=f[q&d][g&c],p=f[q-x&d][g+
z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),p=f[q+z&d][g+x&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),p=f[q+z-x&d][g+x+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),130<m)if(132===m||134===m)s=s>=b?131:m;else if(131===m||133===m)s=s<b?132:m}else s=0;l[t]=h[s];t+=1;g+=r;q-=k;if((g|0)===(g&c)&&(q|0)===(q&d)){if(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p),m=f[q&d][g&c],p=f[q-x&d][g+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),p=f[q+z&d][g+x&c],130<p&&(!m||!(m&1)&&p&1)&&(m=
p),p=f[q+z-x&d][g+x+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),130<m)if(132===m||134===m)s=s>=b?131:m;else if(131===m||133===m)s=s<b?132:m}else s=0;l[t]=h[s];t+=1;g+=r;q-=k;if((g|0)===(g&c)&&(q|0)===(q&d)){if(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p),m=f[q&d][g&c],p=f[q-x&d][g+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),p=f[q+z&d][g+x&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),p=f[q+z-x&d][g+x+z&c],130<p&&(!m||!(m&1)&&p&1)&&(m=p),130<m)if(132===m||134===m)s=
s>=b?131:m;else if(131===m||133===m)s=s<b?132:m}else s=0;l[t]=h[s];t+=1;g+=r;q-=k}y+=k;q=B+=r}this.Ka&&this.Mb()&&this.bc();for(m=1;m<C;m+=1)for(u=(this.pa+1)/this.f*m|0,D+=v,this.ea(D),k/=this.m,r/=this.m,x=k/2,z=r/2,B=-(this.e/2*-k+this.d/2*r)+this.ca,y=-(this.e/2*r+this.d/2*k)+this.ba,t=0,q=B,F=0;F<this.d;F+=1){g=y;for(n=0;n<a;n+=1)(g|0)===(g&c)&&(q|0)===(q&d)?(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p)):s=0,s>=u&&(l[t]=h[s]),t+=1,g+=
r,q-=k,(g|0)===(g&c)&&(q|0)===(q&d)?(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p)):s=0,s>=u&&(l[t]=h[s]),t+=1,g+=r,q-=k,(g|0)===(g&c)&&(q|0)===(q&d)?(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p)):s=0,s>=u&&(l[t]=h[s]),t+=1,g+=r,q-=k,(g|0)===(g&c)&&(q|0)===(q&d)?(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p)):s=0,s>=u&&(l[t]=
h[s]),t+=1,g+=r,q-=k,(g|0)===(g&c)&&(q|0)===(q&d)?(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p)):s=0,s>=u&&(l[t]=h[s]),t+=1,g+=r,q-=k,(g|0)===(g&c)&&(q|0)===(q&d)?(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p)):s=0,s>=u&&(l[t]=h[s]),t+=1,g+=r,q-=k,(g|0)===(g&c)&&(q|0)===(q&d)?(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p)):
s=0,s>=u&&(l[t]=h[s]),t+=1,g+=r,q-=k,(g|0)===(g&c)&&(q|0)===(q&d)?(s=e[q&d][g&c],p=e[q-x&d][g+z&c],p>s&&(s=p),p=e[q+z&d][g+x&c],p>s&&(s=p),p=e[q+z-x&d][g+x+z&c],p>s&&(s=p)):s=0,s>=u&&(l[t]=h[s]),t+=1,g+=r,q-=k;y+=k;q=B+=r}};B.prototype.hl=function(){var a=this.e>>3,d=this.bb,c=this.Ya,b=this.X,e=this.rb,f=this.Db,h=this.Fa,l=0,m=0,F=0,n=0,g=0,q=0,k=0,r=0,B=0,y=0,u=0,t=1,C=1,D=0,v=0,p=0,s=0,x=0;this.fc&&1<this.m&&(t=this.f);q=Math.sin(this.aa/180*Math.PI)/this.da;k=Math.cos(this.aa/180*Math.PI)/this.da;
r=-(this.e/2*-q+this.d/2*k)+this.ca;B=-(this.e/2*k+this.d/2*q)+this.ba;this.ac&&1<this.f&&1<this.m&&(D=.4/(this.f-1),C=.6);this.ea(C);u=0;g=r;s=q/2;x=k/2;for(m=0;m<this.d;m+=1){n=B;for(F=0;F<a;F+=1)(n|0)===(n&c)&&(g|0)===(g&d)?(p=e[g&d][n&c],v=e[g-s&d][n+x&c],v>p&&(p=v),v=e[g+x&d][n+s&c],v>p&&(p=v),v=e[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,h[u]=f[p],u+=1,n+=k,g-=q,(n|0)===(n&c)&&(g|0)===(g&d)?(p=e[g&d][n&c],v=e[g-s&d][n+x&c],v>p&&(p=v),v=e[g+x&d][n+s&c],v>p&&(p=v),v=e[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=
0,h[u]=f[p],u+=1,n+=k,g-=q,(n|0)===(n&c)&&(g|0)===(g&d)?(p=e[g&d][n&c],v=e[g-s&d][n+x&c],v>p&&(p=v),v=e[g+x&d][n+s&c],v>p&&(p=v),v=e[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,h[u]=f[p],u+=1,n+=k,g-=q,(n|0)===(n&c)&&(g|0)===(g&d)?(p=e[g&d][n&c],v=e[g-s&d][n+x&c],v>p&&(p=v),v=e[g+x&d][n+s&c],v>p&&(p=v),v=e[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,h[u]=f[p],u+=1,n+=k,g-=q,(n|0)===(n&c)&&(g|0)===(g&d)?(p=e[g&d][n&c],v=e[g-s&d][n+x&c],v>p&&(p=v),v=e[g+x&d][n+s&c],v>p&&(p=v),v=e[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,h[u]=
f[p],u+=1,n+=k,g-=q,(n|0)===(n&c)&&(g|0)===(g&d)?(p=e[g&d][n&c],v=e[g-s&d][n+x&c],v>p&&(p=v),v=e[g+x&d][n+s&c],v>p&&(p=v),v=e[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,h[u]=f[p],u+=1,n+=k,g-=q,(n|0)===(n&c)&&(g|0)===(g&d)?(p=e[g&d][n&c],v=e[g-s&d][n+x&c],v>p&&(p=v),v=e[g+x&d][n+s&c],v>p&&(p=v),v=e[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,h[u]=f[p],u+=1,n+=k,g-=q,(n|0)===(n&c)&&(g|0)===(g&d)?(p=e[g&d][n&c],v=e[g-s&d][n+x&c],v>p&&(p=v),v=e[g+x&d][n+s&c],v>p&&(p=v),v=e[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,h[u]=f[p],u+=
1,n+=k,g-=q;B+=q;g=r+=k}this.Ka&&this.Mb()&&this.bc();for(l=1;l<t;l+=1)for(y=(this.pa+1)/this.f*l|0,C+=D,this.ea(C),q/=this.m,k/=this.m,s=q/2,x=k/2,r=-(this.e/2*-q+this.d/2*k)+this.ca,B=-(this.e/2*k+this.d/2*q)+this.ba,u=0,g=r,m=0;m<this.d;m+=1){n=B;for(F=0;F<a;F+=1)(n|0)===(n&c)&&(g|0)===(g&d)?(p=b[g&d][n&c],v=b[g-s&d][n+x&c],v>p&&(p=v),v=b[g+x&d][n+s&c],v>p&&(p=v),v=b[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,p>=y&&(h[u]=f[p]),u+=1,n+=k,g-=q,(n|0)===(n&c)&&(g|0)===(g&d)?(p=b[g&d][n&c],v=b[g-s&d][n+x&c],
v>p&&(p=v),v=b[g+x&d][n+s&c],v>p&&(p=v),v=b[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,p>=y&&(h[u]=f[p]),u+=1,n+=k,g-=q,(n|0)===(n&c)&&(g|0)===(g&d)?(p=b[g&d][n&c],v=b[g-s&d][n+x&c],v>p&&(p=v),v=b[g+x&d][n+s&c],v>p&&(p=v),v=b[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,p>=y&&(h[u]=f[p]),u+=1,n+=k,g-=q,(n|0)===(n&c)&&(g|0)===(g&d)?(p=b[g&d][n&c],v=b[g-s&d][n+x&c],v>p&&(p=v),v=b[g+x&d][n+s&c],v>p&&(p=v),v=b[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,p>=y&&(h[u]=f[p]),u+=1,n+=k,g-=q,(n|0)===(n&c)&&(g|0)===(g&d)?(p=b[g&d][n&c],
v=b[g-s&d][n+x&c],v>p&&(p=v),v=b[g+x&d][n+s&c],v>p&&(p=v),v=b[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,p>=y&&(h[u]=f[p]),u+=1,n+=k,g-=q,(n|0)===(n&c)&&(g|0)===(g&d)?(p=b[g&d][n&c],v=b[g-s&d][n+x&c],v>p&&(p=v),v=b[g+x&d][n+s&c],v>p&&(p=v),v=b[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,p>=y&&(h[u]=f[p]),u+=1,n+=k,g-=q,(n|0)===(n&c)&&(g|0)===(g&d)?(p=b[g&d][n&c],v=b[g-s&d][n+x&c],v>p&&(p=v),v=b[g+x&d][n+s&c],v>p&&(p=v),v=b[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,p>=y&&(h[u]=f[p]),u+=1,n+=k,g-=q,(n|0)===(n&c)&&(g|0)===(g&
d)?(p=b[g&d][n&c],v=b[g-s&d][n+x&c],v>p&&(p=v),v=b[g+x&d][n+s&c],v>p&&(p=v),v=b[g+x-s&d][n+s+x&c],v>p&&(p=v)):p=0,p>=y&&(h[u]=f[p]),u+=1,n+=k,g-=q;B+=q;g=r+=k}};B.prototype.dl=function(){var a=this.e>>3,d=this.bb,c=this.Ya,b=this.X,e=this.Db,f=this.Fa,h=0,l=0,m=0,k=0,n=0,g=0,q=0,r=0,u=0,B=0,y=0,t=1,C=1,T=0,D=0,v=0,p=0,s=0;this.fc&&1<this.m&&(t=this.f);g=Math.sin(this.aa/180*Math.PI)/this.da;q=Math.cos(this.aa/180*Math.PI)/this.da;r=-(this.e/2*-g+this.d/2*q)+this.ca;u=-(this.e/2*q+this.d/2*g)+this.ba;
this.ac&&1<this.f&&1<this.m&&(T=.4/(this.f-1),C=.6);this.ea(C);y=0;n=r;p=g/2;s=q/2;for(l=0;l<this.d;l+=1){k=u;for(m=0;m<a;m+=1)(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=D)):v=0,f[y]=e[v],y+=1,k+=q,n-=g,(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=D)):v=0,f[y]=e[v],y+=1,k+=q,n-=g,(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],
D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=D)):v=0,f[y]=e[v],y+=1,k+=q,n-=g,(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=D)):v=0,f[y]=e[v],y+=1,k+=q,n-=g,(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=D)):v=0,f[y]=e[v],y+=1,k+=q,n-=g,(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-
p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=D)):v=0,f[y]=e[v],y+=1,k+=q,n-=g,(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=D)):v=0,f[y]=e[v],y+=1,k+=q,n-=g,(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=D)):v=0,f[y]=e[v],y+=1,k+=q,n-=g;u+=g;n=r+=q}this.Ka&&this.Mb()&&this.bc();for(h=1;h<t;h+=
1)for(B=(this.pa+1)/this.f*h|0,C+=T,this.ea(C),g/=this.m,q/=this.m,p=g/2,s=q/2,r=-(this.e/2*-g+this.d/2*q)+this.ca,u=-(this.e/2*q+this.d/2*g)+this.ba,y=0,n=r,l=0;l<this.d;l+=1){k=u;for(m=0;m<a;m+=1)(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=D)):v=0,v>=B&&(f[y]=e[v]),y+=1,k+=q,n-=g,(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=
D)):v=0,v>=B&&(f[y]=e[v]),y+=1,k+=q,n-=g,(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=D)):v=0,v>=B&&(f[y]=e[v]),y+=1,k+=q,n-=g,(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=D)):v=0,v>=B&&(f[y]=e[v]),y+=1,k+=q,n-=g,(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+
p+s&c],D>v&&(v=D)):v=0,v>=B&&(f[y]=e[v]),y+=1,k+=q,n-=g,(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=D)):v=0,v>=B&&(f[y]=e[v]),y+=1,k+=q,n-=g,(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=D)):v=0,v>=B&&(f[y]=e[v]),y+=1,k+=q,n-=g,(k|0)===(k&c)&&(n|0)===(n&d)?(v=b[n&d][k&c],D=b[n-p&d][k+s&c],D>v&&(v=D),D=b[n+s&d][k+p&c],D>v&&(v=
D),D=b[n+s-p&d][k+p+s&c],D>v&&(v=D)):v=0,v>=B&&(f[y]=e[v]),y+=1,k+=q,n-=g;u+=g;n=r+=q}};B.prototype.cl=function(){var a=this.e>>3,d=this.bb,c=this.Ya,b=this.X,e=this.Db,f=this.Fa,h=0,k=0,m=0,l=0,n=0,g=0,q=0,r=0,u=0,B=0,y=0,t=1,C=1,T=0,D=0;this.fc&&1<this.m&&(t=this.f);g=Math.sin(this.aa/180*Math.PI)/this.da;q=Math.cos(this.aa/180*Math.PI)/this.da;r=this.height-(this.e/2*-g+this.d/2*q)+this.ca;u=this.width-(this.e/2*q+this.d/2*g)+this.ba;this.ac&&1<this.f&&1<this.m&&(T=.4/(this.f-1),C=.6);this.ea(C);
y=0;n=r;for(k=0;k<this.d;k+=1){l=u;for(m=0;m<a;m+=1)D=b[n&d][l&c],f[y]=e[D],y+=1,l+=q,n-=g,D=b[n&d][l&c],f[y]=e[D],y+=1,l+=q,n-=g,D=b[n&d][l&c],f[y]=e[D],y+=1,l+=q,n-=g,D=b[n&d][l&c],f[y]=e[D],y+=1,l+=q,n-=g,D=b[n&d][l&c],f[y]=e[D],y+=1,l+=q,n-=g,D=b[n&d][l&c],f[y]=e[D],y+=1,l+=q,n-=g,D=b[n&d][l&c],f[y]=e[D],y+=1,l+=q,n-=g,D=b[n&d][l&c],f[y]=e[D],y+=1,l+=q,n-=g;u+=g;n=r+=q}this.Ka&&this.Mb()&&this.bc();for(h=1;h<t;h+=1)for(B=(this.pa+1)/this.f*h|0,C+=T,this.ea(C),g/=this.m,q/=this.m,r=this.height-
(this.e/2*-g+this.d/2*q)+this.ca,u=this.width-(this.e/2*q+this.d/2*g)+this.ba,y=0,n=r,k=0;k<this.d;k+=1){l=u;for(m=0;m<a;m+=1)D=b[n&d][l&c],D>=B&&(f[y]=e[D]),y+=1,l+=q,n-=g,D=b[n&d][l&c],D>=B&&(f[y]=e[D]),y+=1,l+=q,n-=g,D=b[n&d][l&c],D>=B&&(f[y]=e[D]),y+=1,l+=q,n-=g,D=b[n&d][l&c],D>=B&&(f[y]=e[D]),y+=1,l+=q,n-=g,D=b[n&d][l&c],D>=B&&(f[y]=e[D]),y+=1,l+=q,n-=g,D=b[n&d][l&c],D>=B&&(f[y]=e[D]),y+=1,l+=q,n-=g,D=b[n&d][l&c],D>=B&&(f[y]=e[D]),y+=1,l+=q,n-=g,D=b[n&d][l&c],D>=B&&(f[y]=e[D]),y+=1,l+=q,n-=g;
u+=g;n=r+=q}};B.prototype.gl=function(){var a=this.e>>3,d=this.bb,c=this.Ya,b=this.X,e=this.rb,f=this.Db,h=this.Fa,k=0,m=0,l=0,n=0,g=0,q=0,r=0,u=0,B=0,y=0,t=0,C=1,T=1,D=0,v=0,k=0;this.fc&&1<this.m&&(C=this.f);q=Math.sin(this.aa/180*Math.PI)/this.da;r=Math.cos(this.aa/180*Math.PI)/this.da;u=this.height-(this.e/2*-q+this.d/2*r)+this.ca;B=this.width-(this.e/2*r+this.d/2*q)+this.ba;this.ac&&1<this.f&&1<this.m&&(D=.4/(this.f-1),T=.6);this.ea(T);t=0;g=u;for(m=0;m<this.d;m+=1){n=B;for(l=0;l<a;l+=1)k=e[g&
d][n&c],h[t]=f[k],t+=1,n+=r,g-=q,k=e[g&d][n&c],h[t]=f[k],t+=1,n+=r,g-=q,k=e[g&d][n&c],h[t]=f[k],t+=1,n+=r,g-=q,k=e[g&d][n&c],h[t]=f[k],t+=1,n+=r,g-=q,k=e[g&d][n&c],h[t]=f[k],t+=1,n+=r,g-=q,k=e[g&d][n&c],h[t]=f[k],t+=1,n+=r,g-=q,k=e[g&d][n&c],h[t]=f[k],t+=1,n+=r,g-=q,k=e[g&d][n&c],h[t]=f[k],t+=1,n+=r,g-=q;B+=q;g=u+=r}this.Ka&&this.Mb()&&this.bc();for(k=1;k<C;k+=1)for(y=(this.pa+1)/this.f*k|0,T+=D,this.ea(T),q/=this.m,r/=this.m,u=this.height-(this.e/2*-q+this.d/2*r)+this.ca,B=this.width-(this.e/2*r+
this.d/2*q)+this.ba,t=0,g=u,m=0;m<this.d;m+=1){n=B;for(l=0;l<a;l+=1)v=b[g&d][n&c],v>=y&&(h[t]=f[v]),t+=1,n+=r,g-=q,v=b[g&d][n&c],v>=y&&(h[t]=f[v]),t+=1,n+=r,g-=q,v=b[g&d][n&c],v>=y&&(h[t]=f[v]),t+=1,n+=r,g-=q,v=b[g&d][n&c],v>=y&&(h[t]=f[v]),t+=1,n+=r,g-=q,v=b[g&d][n&c],v>=y&&(h[t]=f[v]),t+=1,n+=r,g-=q,v=b[g&d][n&c],v>=y&&(h[t]=f[v]),t+=1,n+=r,g-=q,v=b[g&d][n&c],v>=y&&(h[t]=f[v]),t+=1,n+=r,g-=q,v=b[g&d][n&c],v>=y&&(h[t]=f[v]),t+=1,n+=r,g-=q;B+=q;g=u+=r}};B.prototype.$k=function(){var a=this.e>>3,d=
this.bb,c=this.Ya,b=this.X,e=this.rb,f=this.Db,h=this.Fa,k=this.hb,m=0,l=0,n=0,g=0,q=0,r=0,u=0,t=0,y=0,B=0,C=0,T=1,D=1,v=0,p=0,p=m=0;this.fc&&1<this.m&&(T=this.f);r=Math.sin(this.aa/180*Math.PI)/this.da;u=Math.cos(this.aa/180*Math.PI)/this.da;t=this.height-(this.e/2*-r+this.d/2*u)+this.ca;y=this.width-(this.e/2*u+this.d/2*r)+this.ba;this.ac&&1<this.f&&1<this.m&&(v=.4/(this.f-1),D=.6);this.ea(D);C=0;q=t;for(l=0;l<this.d;l+=1){g=y;for(n=0;n<a;n+=1)p=b[q&d][g&c],m=e[q&d][g&c],132===m||134===m?(p>=k&&
(m=131),p=f[m]|0):133===m||131===m?(p<k&&(m=132),p=f[m]|0):p=f[p]|0,h[C]=p,C+=1,g+=u,q-=r,p=b[q&d][g&c],m=e[q&d][g&c],132===m||134===m?(p>=k&&(m=131),p=f[m]|0):133===m||131===m?(p<k&&(m=132),p=f[m]|0):p=f[p]|0,h[C]=p,C+=1,g+=u,q-=r,p=b[q&d][g&c],m=e[q&d][g&c],132===m||134===m?(p>=k&&(m=131),p=f[m]|0):133===m||131===m?(p<k&&(m=132),p=f[m]|0):p=f[p]|0,h[C]=p,C+=1,g+=u,q-=r,p=b[q&d][g&c],m=e[q&d][g&c],132===m||134===m?(p>=k&&(m=131),p=f[m]|0):133===m||131===m?(p<k&&(m=132),p=f[m]|0):p=f[p]|0,h[C]=p,
C+=1,g+=u,q-=r,p=b[q&d][g&c],m=e[q&d][g&c],132===m||134===m?(p>=k&&(m=131),p=f[m]|0):133===m||131===m?(p<k&&(m=132),p=f[m]|0):p=f[p]|0,h[C]=p,C+=1,g+=u,q-=r,p=b[q&d][g&c],m=e[q&d][g&c],132===m||134===m?(p>=k&&(m=131),p=f[m]|0):133===m||131===m?(p<k&&(m=132),p=f[m]|0):p=f[p]|0,h[C]=p,C+=1,g+=u,q-=r,p=b[q&d][g&c],m=e[q&d][g&c],132===m||134===m?(p>=k&&(m=131),p=f[m]|0):133===m||131===m?(p<k&&(m=132),p=f[m]|0):p=f[p]|0,h[C]=p,C+=1,g+=u,q-=r,p=b[q&d][g&c],m=e[q&d][g&c],132===m||134===m?(p>=k&&(m=131),
p=f[m]|0):133===m||131===m?(p<k&&(m=132),p=f[m]|0):p=f[p]|0,h[C]=p,C+=1,g+=u,q-=r;y+=r;q=t+=u}this.Ka&&this.Mb()&&this.bc();for(m=1;m<T;m+=1)for(B=(this.pa+1)/this.f*m|0,D+=v,this.ea(D),r/=this.m,u/=this.m,t=this.height-(this.e/2*-r+this.d/2*u)+this.ca,y=this.width-(this.e/2*u+this.d/2*r)+this.ba,C=0,q=t,l=0;l<this.d;l+=1){g=y;for(n=0;n<a;n+=1)p=b[q&d][g&c],p>=B&&(h[C]=f[p]),C+=1,g+=u,q-=r,p=b[q&d][g&c],p>=B&&(h[C]=f[p]),C+=1,g+=u,q-=r,p=b[q&d][g&c],p>=B&&(h[C]=f[p]),C+=1,g+=u,q-=r,p=b[q&d][g&c],
p>=B&&(h[C]=f[p]),C+=1,g+=u,q-=r,p=b[q&d][g&c],p>=B&&(h[C]=f[p]),C+=1,g+=u,q-=r,p=b[q&d][g&c],p>=B&&(h[C]=f[p]),C+=1,g+=u,q-=r,p=b[q&d][g&c],p>=B&&(h[C]=f[p]),C+=1,g+=u,q-=r,p=b[q&d][g&c],p>=B&&(h[C]=f[p]),C+=1,g+=u,q-=r;y+=r;q=t+=u}};B.prototype.hk=function(){var a=0,d,c,b;if(!this.qc.data.buffer)for(c=this.qc.data,b=this.sg,d=b.length,a=0;a<d;)c[a]=b[a],a+=1,c[a]=b[a],a+=1,c[a]=b[a],a+=1,c[a]=b[a],a+=1;this.c.putImageData(this.qc,0,0)};B.prototype.Ij=function(){for(var a=0,d=0,c=this.d,b=this.e,
e=this.Fa,f=this.af,a=0;a<c;a+=1)e.set(f,d),d+=b};window.RuleManager=h;window.Life=B})();(function(){function t(l){this.source=l;this.ub=l.match(/\S+/g);this.current=0}t.prototype.u=function(){var l="";this.ub&&this.current<this.ub.length&&(l=this.ub[this.current],this.current++);return l};t.prototype.gh=function(){var l="";this.ub&&this.current<this.ub.length&&(l=this.ub[this.current]);return l};t.prototype.ji=function(l){var b=!1;if(this.ub)for(;this.current<this.ub.length&&!b;)this.ub[this.current]===l&&(b=!0),this.current++;return b};t.prototype.M=function(){var l=!1,b="";this.ub&&
this.current<this.ub.length&&(b=this.ub[this.current],l=!isNaN(parseFloat(b))&&isFinite(b));return l};window.Script=t})();(function(){function t(){this.l=this.y=this.x=0;this.depth=this.f=this.zoom=1;this.T=0;this.Q=60;this.step=1;this.S=this.G=0;this.tb="";this.aj=this.Zi=this.Yi=this.He=this.ge=this.kd=this.de=this.se=this.Hb=this.Ud=this.jc=this.Lc=this.jb=!1}function l(){this.D=[];this.current=new t;this.$i=new t;this.Od=new t;this.Pe=!1;this.Hc=0}t.prototype.zj=function(b){return-2*Math.pow(b,3)+3*Math.pow(b,2)+0*b+0};t.prototype.set=function(b){this.x=b.x;this.y=b.y;this.jb=b.jb;this.l=b.l;this.zoom=b.zoom;this.f=
b.f;this.depth=b.depth;this.T=b.T;this.Q=b.Q;this.G=b.G;this.S=b.S;this.tb=b.tb};t.prototype.qi=function(b,k,l){var u=b.S,r=k.S,e=b.l,t=k.l,f=1,h=1,a=1;r!==u&&(f=(l-u)/(r-u),h=this.zj(f));a=h;this.x=b.x+a*(k.x-b.x);this.y=b.y+a*(k.y-b.y);this.zoom=b.zoom*Math.pow(k.zoom/b.zoom,a);180<t-e?e+=360:-180>t-e&&(t+=360);this.l=(e+h*(t-e))%360;this.f=b.f+f*(k.f-b.f)|0;this.depth=b.depth+f*(k.depth-b.depth);this.T=k.T;this.Q=k.Q;this.step=k.step;this.G=b.G+f*(k.G-b.G);this.S=l;this.tb=k.tb;this.jb=k.jb};l.prototype.reset=
function(){this.D=[];this.Pe=!1;this.Hc=0};l.prototype.Ik=function(){return this.D[this.D.length-1]};l.prototype.ii=function(b){var k=0,k=this.ki(b),l=this.D[k],u=null;b>l.G?k=l.S+1E3*(b-l.G)/(l.Q*l.step):0<k?(u=this.D[k-1],k=u.S+1E3*(b-u.G)/(l.Q*l.step)):k=1E3*b/(l.Q*l.step);return k};l.prototype.ai=function(b,k,l,u,r,e,t,f,h,a,d){var c=this.$i,w=0;c.x=b;c.y=k;c.zoom=l;c.l=u;c.Q=f;c.step=h;c.f=r;c.depth=e;c.T=t;c.G=a;this.Pe&&(d=this.Od.S);c.S=d-1E3;this.update(d);this.Od.set(this.current);this.Od.jb=
!1;this.Od.S=d;this.Pe=!0;return w=c.S};l.prototype.wk=function(){return this.D[0]};l.prototype.length=function(){return this.D.length};l.prototype.add=function(b){this.D[this.D.length]=b};l.prototype.gg=function(b){var k=!1;this.Hc>=this.D.length-1&&b>=this.D[this.Hc].S&&(k=!0);return k};l.prototype.Ee=function(b){var k=null;return k=b===(b|0)?String(b|0):String(b.toFixed(1))};l.prototype.Ol=function(b,k){var l="",u=null,r=null;0<=b&&b<this.length()&&(u=this.D[b],0<b?(r=this.D[b-1],l=u.G===r.G?"P "+
this.Ee((u.S-r.S|0)/1E3):"T "+u.G,u.jb?l+=" F":(u.x!==r.x&&(l+=" X "+u.x),u.y!==r.y&&(l+=" Y "+u.y),u.zoom!==r.zoom&&(l+=" Z "+this.Ee(u.zoom))),u.l!==r.l&&(l+=" A "+u.l),u.f!==r.f&&(l+=" L "+u.f),u.depth!==r.depth&&(l+=" D "+this.Ee(u.depth)),u.T!==r.T&&(l+=" C "+u.T),u.Q!==r.Q&&(l+=" G "+u.Q),u.step!==r.step&&(l+=" S "+u.step),""!==u.tb&&(l+=" "+k+u.tb+k)):l="T "+u.G+" X "+u.x+" Y "+u.y+" Z "+this.Ee(u.zoom)+" A "+u.l+" L "+u.f+" D "+this.Ee(u.depth)+" C "+u.T+" G "+u.Q+" S "+u.step);return l};
l.prototype.update=function(b){var k=this.D.length,l=!1,u=this.Hc,r=!1;if(this.Pe)this.current.qi(this.$i,this.Od,b),b>=this.Od.S&&(this.Pe=!1);else{for(;u<k&&!l;)this.D[u].S>=b?l=!0:u++;l?0<u?(this.D[u].jb&&(this.D[u].x=this.current.x,this.D[u].y=this.current.y,this.D[u].zoom=this.current.zoom),this.current.qi(this.D[u-1],this.D[u],b)):(u=0,this.current.set(this.D[u])):(u=k-1,this.current.set(this.D[u]),r=!0);this.Hc=u}return r};l.prototype.ki=function(b){for(var k=0,l=!1,u=this.D,r=this.length();k<
r&&!l;)u[k].G>=b?l=!0:k++;l||(k=r-1);return k};l.prototype.vk=function(b){this.Hc=this.ki(b)};l.prototype.Vk=function(b){for(var k=0,l=null,u=null,r=this.D,e=this.length(),k=1;k<e;k++)l=r[k-1],u=r[k],u.Lc||(u.x=l.x),u.jc||(u.y=l.y),u.Ud||(u.l=l.l),u.Hb||(u.zoom=l.zoom),u.se||(u.f=l.f),u.de||(u.depth=l.depth),u.kd||(u.T=l.T),u.ge||(u.Q=l.Q),u.He||(u.step=l.step),u.Yi?u.G<=l.G&&(b[b.length]=[Keywords.Yf+" "+u.G,"target generation must be later than previous ("+l.G+")"]):u.G=l.G,u.S=u.Zi?1E3*u.S+l.S:
l.S+1E3*(u.G-l.G)/(u.Q*u.step)};window.Waypoint=t;window.WaypointManager=l})();(function(){function t(l,b){var k=this;this.Ph=l;this.h=b;this.top=this.left=0;""!==l.style.left&&(this.left=parseInt(l.style.left,10));""!==l.style.top&&(this.top=parseInt(l.style.top,10));this.ia=this.Uc=!1;this.pe=this.oe=this.re=this.qe=this.wc=this.vc=-1;this.xl=21;registerEvent(l,"mousedown",function(b){k.qk(k,b)},!1);registerEvent(document,"mousemove",function(b){k.rk(k,b)},!1);registerEvent(document,"mouseup",function(b){k.sk(k,b)},!1);registerEvent(l,"touchstart",function(b){k.ld(k,b)},!1);
registerEvent(l,"touchmove",function(b){k.ld(k,b)},!1);registerEvent(l,"touchend",function(b){k.ld(k,b)},!1);registerEvent(window,"resize",function(){k.Li(k)},!1)}t.prototype.Li=function(l){l.Qi(l.left,l.top,l.Ph)};t.prototype.Fl=function(l,b){var k=this.Ph,t=this.left,u=this.top;this.Qi(t+l,u+b,k)};t.prototype.Qi=function(l,b,k){var t=window.innerWidth-k.clientWidth,u=window.innerHeight-k.clientHeight;window.innerHeight<document.getElementsByTagName("body")[0].clientHeight&&(t-=this.xl);0>l&&(l=
0);0>b&&(b=0);l>t&&(l=t);b>u&&(b=u);k.style.left=l+"px";k.style.top=b+"px";k.style.position="fixed";this.left=l;this.top=b};t.prototype.Mj=function(){var l=this.Ph,b=l.offsetParent;this.offsetLeft=l.offsetLeft;for(this.offsetTop=l.offsetTop;b;)this.offsetLeft+=b.offsetLeft,this.offsetTop+=b.offsetTop,b=b.offsetParent;b=l.parentNode;if("fixed"===b.style.position)this.offsetLeft+=document.body.scrollLeft+document.documentElement.scrollLeft,this.offsetTop+=document.body.scrollTop+document.documentElement.scrollTop;
else for(;"body"!==b.tagName.toLowerCase();)this.offsetLeft-=b.scrollLeft,this.offsetTop-=b.scrollTop,b=b.parentNode};t.prototype.ld=function(l,b){var k=null,t,u="";if("touchend"===b.type)u="mouseup",t=document.createEvent("MouseEvent"),t.initMouseEvent(u,!0,!0,window,1,l.qe,l.re,l.oe,l.pe,!1,!1,!1,!1,0,null),b.target.dispatchEvent(t),b.preventDefault();else{if(1===b.touches.length)switch(b.type){case "touchstart":u="mousedown";break;case "touchmove":u="mousemove"}""!==u&&(k=b.changedTouches[0],t=
document.createEvent("MouseEvent"),t.initMouseEvent(u,!0,!0,window,1,k.screenX,k.screenY,k.clientX,k.clientY,!1,!1,!1,!1,0,null),k.target.dispatchEvent(t),b.preventDefault(),l.qe=k.screenX,l.re=k.screenY,l.oe=k.clientX,l.pe=k.clientY)}};t.prototype.qk=function(l,b){l.nd(l,b);l.ia=!0;l.h.ed=!0;b.stopPropagation&&b.stopPropagation();b.preventDefault()};t.prototype.sk=function(l,b){l.Uc&&l.ia&&(l.nd(l,b),l.ia=!1,l.h.ed=!1,b.stopPropagation&&b.stopPropagation(),b.preventDefault())};t.prototype.rk=function(l,
b){if(l.Uc&&l.ia){var k=l.vc,t=l.wc;l.nd(l,b);l.ia&&l.Fl(l.vc-k,l.wc-t);l.vc=k;l.wc=t;b.stopPropagation&&b.stopPropagation();b.preventDefault()}};t.prototype.nd=function(l,b){var k,t;b.pageX||b.pageY?(k=b.pageX,t=b.pageY):(k=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t=b.clientY+document.body.scrollTop+document.documentElement.scrollTop);l.Mj();k-=l.offsetLeft;t-=l.offsetTop;l.vc=k-1|0;l.wc=t-1|0};window.PopupWindow=t})();(function(){function t(){this.key=new Uint8Array(256);this.Rg=this.Mg=0}t.prototype.rc=function(l){var b,k,t,u=this.key;for(b=0;256>b;b++)u[b]=b;for(b=k=0;256>b;b++)k=k+u[b]+l.charCodeAt(b%l.length)&255,t=u[b],u[b]=u[k],u[k]=t;this.Rg=this.Mg=0};t.prototype.random=function(){var l,b,k=0,t=1,u=this.key,r=this.Mg,e=this.Rg;for(l=0;8>l;l++)r=r+1&255,e=e+u[r]&255,b=u[r],u[r]=u[e],u[e]=b,k+=u[u[r]+u[e]&255]*t,t*=256;this.Mg=r;this.Rg=e;return k/1.8446744073709552E19};window.myRand=new t})();(function(){function t(){this.x=[];this.y=[];this.z=[];this.Ai=0;this.blue=this.green=this.red=255}t.prototype.rc=function(l,b,k,t){var u=0,r=0,e=0,C=0,f=b*b+k*k;myRand.rc(Date.now().toString());this.Ai=l;for(u=0;u<l;u+=1){C=u/l*(u/l)*(u/l)*(u/l)*t+1;do r=3*(myRand.random()*b-b/2),e=3*(myRand.random()*k-k/2);while(r*r+e*e>f);this.x[u]=r;this.y[u]=e;this.z[u]=C}};t.prototype.Qj=function(l,b,k,t,u,r,e,C){var f=0,h=0,a=0,d=0,c=0,w=0,N=h=w=0,M=0,L=0,O=a=0,m;littleEndian?(L=C>>16&255,M=C>>8&255,N=C&255):
(N=C>>24&255,M=C>>16&255,L=C>>8&255);for(f=0;f<this.Ai;f+=1)c=this.x[f]+l,w=this.y[f]+b,h=Math.sqrt(c*c+w*w),w=Math.atan2(w,c),w+=t*Math.PI/180,c=h*Math.cos(w),w=h*Math.sin(w),d=this.z[f]/k,c=u/2+c/d|0,w=r/2+w/d|0,0<=c&&c<u&&0<=w&&w<r&&(h=c+w*u,d=384/d|0,255<d&&(d=255),d/=255,e[h]===C&&(a=N+(this.red-N)*d,O=M+(this.green-M)*d,m=L+(this.blue-L)*d,a=littleEndian?-16777216|m<<16|O<<8|a:a<<24|m<<16|O<<8|255,e[h]=a),d/=2,a=N+(this.red-N)*d,O=M+(this.green-M)*d,m=L+(this.blue-L)*d,a=littleEndian?-16777216|
m<<16|O<<8|a:a<<24|m<<16|O<<8|255,0<=c-1&&c-1<u&&(h=c-1+w*u,e[h]===C&&(e[h]=a)),0<=c+1&&c+1<u&&(h=c+1+w*u,e[h]===C&&(e[h]=a)),0<=w-1&&w-1<r&&(h=c+(w-1)*u,e[h]===C&&(e[h]=a)),0<=w+1&&w+1<r&&(h=c+(w+1)*u,e[h]===C&&(e[h]=a)))};window.Stars=t})();(function(){function t(){this.lb=!1;this.Kh=null;this.ic="";this.Kd=this.La=this.yc=!1;this.Fc=new Stars;this.Fc.rc(4096,1024,1024,1024);this.ne=!1;this.za=1;this.fd=0;this.$a=this.Sg=!1;this.J=new WaypointManager;this.vf="";this.Xg=-1;this.mb=this.Xa=!1;this.n=1;this.of=this.dh=this.Fd=0;this.Yc=f.Kk;this.fi=0;this.ze=this.hd=-1;this.ye=this.Lf=this.If=this.Mf=0;this.eh=this.Qb="";this.Sc=!1;this.be=0;this.ae=1;this.ng=2;this.sd=3;this.og=4;this.pg=5;this.qg=6;this.rg=8;this.w=[-1,-1,-1,-1,-1,-1,
-1,-1];this.$d=this.Zd=-1;this.Yd="";this.lc=[];this.Te=!1;this.Rc=[];this.rd=[];this.Va=[];this.A=1;this.i=0;this.Ed=100;this.R=10;this.oi=this.Oi=1;this.fb=64;this.Aa=this.Nd=-1;this.Vi=this.Nc=this.ja=this.Ia=this.wa=this.Ma=!1;this.Ah=this.Gg=this.hh=-1;this.a=null;this.Jb=!0;this.elapsedTime=0;this.ck=this.dk=1024;this.e=640;this.d=512;this.Gc=this.hc=this.ra=!1;this.v=this.Rb=this.ef=this.ug=this.Xe=this.hg=this.Nf=this.ih=this.nf=this.Jh=this.me=this.cc=this.sa=this.P=this.k=this.xa=this.Da=
this.Pb=this.ma=this.t=null;this.uf=this.Ad=-1;this.wheelDelta=0;this.Na=this.dd=this.Ob=this.ua=this.Pf=null;this.kb=60;this.C=this.h=null;this.Xc=0;this.mc=7;this.oc=this.nc=this.td=0;this.vd=this.ei=1;this.zg=60;this.ud=this.jf=1;this.xg=.1;this.Zf=this.K=this.Bg=this.Ag=this.Cg=!1;this.gj=this.ij=this.Hh=this.hj=0;this.Sf=!1}function l(a,d,c,b){for(var e=0,k=d.parentNode,l=null,r=null,e=0;e<h.gb.length&&!r;)h.gb[e][0].tabIndex===d.tabIndex?r=h.gb[e][1]:e+=1;r||(r=new t,r.ne=b,C.yf&&(r.Yc=c&-8,
r.Yc<f.uc&&(r.Yc=f.uc)),d.tabIndex=h.gb.length+1,r.xj(d),"none"===k.style.display&&(l=new PopupWindow(k,r.h)),h.gb[h.gb.length]=[d,r,l]);r.Si(a,!1)}function b(){var a=h.xh(),d=a[1],c=a[2];a[0].parentNode.style.display="none";c.Uc=!1;d.ra&&(d.v.current=d.Vb(f.Ca,!0,d))}function k(a){b();a.stopPropagation&&a.stopPropagation();a.preventDefault();return!1}function B(a){return a.value
.trim()}function u(a){var d;a=a.parentNode;for(var c=!1;!c;)"div"!==a.localName||a.className!==C.mf&&"codebox"!==a.className||(c=!0),c||(a=a.parentNode);a=B(a.getElementsByTagName(C.Kf)[0]);var c=h.xh(),b=d=d=null,e=null,r=null,u=null,t=null,m=null;c||(d=document.createElement("canvas"),d.width=f.uc,d.height=f.ue,d.style.display="block",e=document.createElement("a"),e.setAttribute("href","#"),e.innerHTML="&nbsp;X&nbsp;",e.style.textDecoration="none",e.style.fontFamily=
"Lucida Grande,Verdana,Helvetica,Arial,sans-serif",e.style.color="#FFFFFF",e.style.backgroundColor="#C75050",e.style.cssFloat="right",m=document.createElement("a"),m.innerHTML="&nbsp;X&nbsp;",m.style.textDecoration="none",m.style.fontFamily="Lucida Grande,Verdana,Helvetica,Arial,sans-serif",m.style.visibility="hidden",m.style.cssFloat="left",t=document.createElement("div"),t.style.textAlign="center",u=document.createTextNode("LifeViewer"),t.appendChild(u),registerEvent(e,"click",k,!1),b=document.createElement("div"),
b.style.display="none",b.style.position="fixed",b.style.border="1px solid white",b.style.left="2048px",b.style.top="0px",b.style.width=f.uc+"px",b.style.textAlign="right",b.style.boxShadow="0px 0px 3px 3px rgba(0,0,0,.3), 12px 12px 8px rgba(0,0,0,.5)",b.style.margin="1px",r=document.createElement("div"),r.className="codebox",r.appendChild(m),r.appendChild(e),r.appendChild(t),b.appendChild(r),b.appendChild(d),document.body.appendChild(b),l(a,d,f.uc,!0),h.wh=h.gb.length-1,c=h.xh(),c[1].Kh=u);d=c[0].parentNode;
""!==d.style.display&&(d.style.display="");c[1].e=f.uc;c[1].d=f.ue;c[1].resize();c[1].h.s.clear(!0,!0);c[1].h.s.clear(!1,!0);c[1].Si(a,!0);d=c[2];d.Uc=!0;d.Li(d);return!1}function r(a){u(this);a.stopPropagation&&a.stopPropagation();a.preventDefault();return!1}var e={Z:'"',De:"[[",qh:"]]",Pd:"TITLE",Ge:"STARS",Ie:"CUSTOM",dj:"BACKGROUND",Fh:"ALIVE",cj:"ALIVERAMP",Gh:"DEAD",ej:"DEADRAMP",Vd:"AUTOFIT",Wf:"STEP",ah:"NOSTEPBACK",Yf:"T",fh:"PAUSE",je:"GRID",ie:"GRIDMAJOR",xb:"COLOR",kg:"COLOUR",Bh:"STRICT",
ag:"VIEWONLY",Ih:"THUMBNAIL",Je:"THEME",We:"AUTOSTART",zf:"LOOP",Xf:"STOP",Ve:"ANGLE",wf:"LAYERS",lf:"DEPTH",rf:"GPS",eg:"ZOOM",cg:"X",dg:"Y",Oh:"WIDTH",Kg:"HEIGHT"},C={tagName:"LifeViewer",mf:"rle",Kf:"textarea",Jf:37,Lg:!0,yf:!0,ek:"codebox"},f={Tk:0,Sk:160,Ci:10,li:19,Sl:!1,Fg:1800,Ul:"LifeViewer",ph:"LifeViewer Image",nj:"LifeViewer Plugin",mj:160,Jl:"Chris Rowett",Df:1,Af:10,yi:0,Nk:1,Ca:2,Dd:3,Zl:30,Ql:1.25,Cf:0,ui:10,Tc:10,o:.25,ha:32,ob:1,tc:60,Ef:1,Cd:32,Ha:null,pf:"18px Courier",Sd:"18px Arial",
le:"rgb(32,255,255)",ee:"rgb(255,96,96)",sf:"rgb(128,128,128)",uc:800,Kk:1024,xi:240,wi:800,ue:640,uk:64,yh:0,Ti:1,Ui:2,Mk:0,Jk:16},h={gb:[],wh:-1,xh:function(){var a=null;-1!==this.wh&&(a=this.gb[this.wh]);return a},Nl:function(){for(var a=null,d=0,c=0,c=0;c<this.gb.length;c+=1)a=this.gb[c][1],a.ra&&(d+=1);return d},Cl:function(a){for(var d=null,c=0,b=0,c=0;c<this.gb.length;c+=1)d=this.gb[c][1],d!==a&&d.ra&&(d.v.current=d.Vb(f.Ca,!0,d),b+=1);return b}};t.prototype.wl=function(a){a.Sf||(a.Sf=!0)};
t.prototype.Gj=function(a){var d=a.dd.toDataURL("image/png"),c=window.open("",f.ph);c?(c.width=a.e+20,c.height=a.d+20,c.document.open(),c.document.write('<!DOCTYPE html>\n<html>\n\t<head>\n\t\t<meta charset="UTF-8">\n\t\t<title>'+f.ph+'</title>\n\t</head>\n\t<body>\n\t\t<img width="'+a.e+'" height="'+a.d+'" src="'+d+'" alt="'+f.ph+'"/>\n\t</body>\n</html>\n'),c.document.close(),a.h.s.ka("Image Captured",300,!0)):a.h.s.ka("Could not open Image window!",f.Fg,!0);a.Sf=!1};t.prototype.Oj=function(a,d,
c){for(var b=0,e=0,f=this.a.ya,h=this.a.X,k=this.a.rb,m=a.width,l=a.height,n=(m-1>>3)+1,g=d>>3,q=this.a.Ya,r=this.a.Ya>>3,u=this.a.bb,t=d&7,y=null,B=null,C=null,T=null,y=null,B=0,D=this.ja,e=0;e<l;e+=1){y=a.B[e];B=f[e+c&u];if(D)for(C=a.pb[e],T=h[e+c&u],b=0;b<m;b+=1)T[b+d&q]=C[b];if(t)for(b=0;b<n;b+=1)B[b+g&r]|=y[b]>>t,B[b+1+g&r]|=y[b]<<8-t;else for(b=0;b<n;b+=1)B[b+g&r]|=y[b]}if(this.lb)for(e=0;e<l;e+=1)for(C=a.pb[e],y=k[e+c&u],b=0;b<m;b+=1)(B=C[b])&&(y[b+d&q]=B+128)};t.prototype.Td=function(a,d,
c){return d?(c.mb=!0,c.a.zoom=f.o*Math.pow(f.ha/f.o,a[0]),[a[0],c.a.zoom]):[Math.log(c.a.zoom/f.o)/Math.log(f.ha/f.o),c.a.zoom]};t.prototype.wj=function(a){var d=a/6E4|0;a=a%6E4/1E3;var c="";0<d&&(c=d+":",10>a&&(c+="0"));return c+=a.toFixed(2)};t.prototype.fe=function(){var a=this.a.fe(this.e,this.d-80,f.o,f.ha,f.Ql);this.a.zoom=a[0];this.a.H=a[1];this.a.I=a[2];this.k&&(this.k.current=[Math.log(this.a.zoom/f.o)/Math.log(f.ha/f.o),this.a.zoom])};t.prototype.Nj=function(a){var d=this.a.width-a.width>>
1,c=this.a.height-a.height>>1;!this.Ia&&this.lb||!PatternManager.ib||(this.Ia=this.ja=!0);this.Oj(a,d,c)};t.prototype.Tf=function(a){var d=a+String();1E6<=a?d=(a/1E6|0)+"M":1E5<=a&&(d=(a/1E3|0)+"K");return d};t.prototype.fl=function(a,d,c){var b=c,e=!1,h=this.za;a&&("#000000"===a.fillStyle&&(e=!0),0<=h&&h<=0+this.R&&(a.font=f.pf,e||(a.fillStyle=1<this.i?f.le:f.sf),a.fillText("Up",d,c),e||(a.fillStyle=f.le),a.fillText(" / ",d+a.measureText("Up").width,c),e||(a.fillStyle=this.i<this.Ed-this.R?f.le:
f.sf),a.fillText("Down",d+a.measureText("Up / ").width,c),e||(a.fillStyle=f.le),a.font=f.Sd,a.fillText("scroll help",d+this.fb,c),b+=19));this.za+=1;return b};t.prototype.b=function(a,d,c,b,e,h){var k=e,l=this.za;c&&l>=h&&l<=h+this.R&&(a.length?(c.font=f.pf,c.fillText(a,b,e),c.font=f.Sd,c.fillText(d,b+this.fb,e)):(c.font=f.Sd,c.fillText(d,b,e)),k+=19);this.za+=1;return k};t.prototype.nh=function(a,d,c,b){var k=c,l="Player",r="",u=r="",m="",t="",r=0,u=this.a.Oa[this.a.yb],t=this.lc;this.za=1;this.fb=
108;c=this.b("",f.nj+" build "+f.mj,a,d,c,b);c=this.b("","",a,d,c,b);c=this.b("","",a,d,c,b);this.fb=108;c=this.b("","Keyboard commands",a,d,c,b);c=this.b("","",a,d,c,b);c=this.b("","Playback controls:",a,d,c,b);this.ja?c=this.b("R","reset",a,d,c,b):(c=this.b("Enter","toggle play/pause",a,d,c,b),c=this.b("Space","pause if playing otherwise next generation",a,d,c,b),c=this.b("R","reset to generation 0",a,d,c,b),c=this.b("B","if paused step back one generation",a,d,c,b),c=this.b("-","decrease generation speed",
a,d,c,b),c=this.b("+","increase generation speed",a,d,c,b),c=this.b("D","decrease step size",a,d,c,b),c=this.b("E","increase step size",a,d,c,b),this.Xa&&(c=this.b("W","toggle waypoint playback",a,d,c,b)));c=this.b("Z","stop playback in all other LifeViewers",a,d,c,b);c=this.b("","",a,d,c,b);c=this.b("","Camera controls:",a,d,c,b);if(this.d>=f.ue||(this.K&&this.Hh)>=f.ue)c=this.b("M","toggle navigation menu",a,d,c,b);c=this.b("V","reset view",a,d,c,b);c=this.b("F","fit pattern to display",a,d,c,b);
c=this.b("[","zoom out",a,d,c,b);c=this.b("]","zoom in",a,d,c,b);c=this.b("5","0.5x zoom",a,d,c,b);c=this.b("1","1x zoom",a,d,c,b);c=this.b("2","2x zoom",a,d,c,b);c=this.b("4","4x zoom",a,d,c,b);c=this.b("8","8x zoom",a,d,c,b);c=this.b("6","16x zoom",a,d,c,b);c=this.b("3","32x zoom",a,d,c,b);c=this.b("Left","pan left",a,d,c,b);c=this.b("Right","pan right",a,d,c,b);c=this.b("Up","pan up",a,d,c,b);c=this.b("Down","pan down",a,d,c,b);c=this.b("<","rotate left",a,d,c,b);c=this.b(">","rotate right",a,
d,c,b);c=this.b("","",a,d,c,b);this.ja||(c=this.b("","View controls:",a,d,c,b),c=this.b("Q","increase number of layers",a,d,c,b),c=this.b("A","decrease number of layers",a,d,c,b),c=this.b("P","increase layer depth",a,d,c,b),c=this.b("L","decrease layer depth",a,d,c,b),c=this.b("C","cycle colour theme",a,d,c,b),c=this.b("","",a,d,c,b));c=this.b("","Display controls:",a,d,c,b);this.ja||(c=this.b("G","toggle generation statistics",a,d,c,b));c=this.b("T","toggle timing display",a,d,c,b);c=this.b("I",
"toggle pattern and engine information",a,d,c,b);c=this.b("X","toggle grid lines",a,d,c,b);this.Zf&&(c=this.b("N","toggle thumbnail view",a,d,c,b));c=this.b("S","toggle stars",a,d,c,b);c=this.b("O","open screenshot in separate window",a,d,c,b);c=this.b("","",a,d,c,b);c=this.b("","Help controls:",a,d,c,b);c=this.b("Up","scroll up one line",a,d,c,b);c=this.b("Down","scroll down one line",a,d,c,b);c=this.b("Page Up","scroll up one page",a,d,c,b);c=this.b("Page Down","scroll down one page",a,d,c,b);c=
this.b("Home","go to first help page",a,d,c,b);c=this.b("End","go to last help page",a,d,c,b);c=this.b("","",a,d,c,b);this.fb=246;c=this.b("","",a,d,c,b);this.Oi=this.za;c=this.b("","Scripts",a,d,c,b);c=this.b("","",a,d,c,b);c=this.b("","Scripts must be embedded in pattern comments",a,d,c,b);c=this.b("","Commands must be surrounded by whitespace",a,d,c,b);c=this.b("","",a,d,c,b);c=this.b("","Commands:",a,d,c,b);c=this.b(e.De,"start script section",a,d,c,b);c=this.b(e.qh,"end script section",a,d,c,
b);c=this.b(e.Bh,"enable strict script validation",a,d,c,b);c=this.b(e.We,"start play automatically",a,d,c,b);c=this.b(e.zf+" <1..>","loop at generation",a,d,c,b);c=this.b(e.Xf+" <1..>","stop at generation",a,d,c,b);c=this.b(e.Yf+" <0..>","waypoint at generation",a,d,c,b);c=this.b(e.fh+" <0.0..>","pause for time",a,d,c,b);c=this.b(e.Z+"<string>"+e.Z,"define waypoint message",a,d,c,b);c=this.b(e.ag,"disable playback",a,d,c,b);c=this.b(e.Pd+" "+e.Z+"<string>"+e.Z,"set window title",a,d,c,b);c=this.b(e.ah,
"disable step back",a,d,c,b);c=this.b(e.Ih,"start at quarter size",a,d,c,b);c=this.b(e.je,"display grid lines",a,d,c,b);c=this.b(e.ie+" <0..16>","set major grid line interval",a,d,c,b);c=this.b(e.Ge,"display stars",a,d,c,b);c=this.b(e.Je+" <0.."+(this.a.Ta-1)+"> | "+e.Ie,"set theme",a,d,c,b);c=this.b(e.xb+" "+e.dj+" R G B","set theme background",a,d,c,b);c=this.b(e.xb+" "+e.Fh+" R G B","set theme alive color",a,d,c,b);c=this.b(e.xb+" "+e.cj+" R G B","set theme alive ramp",a,d,c,b);c=this.b(e.xb+" "+
e.Gh+" R G B","set theme dead color",a,d,c,b);c=this.b(e.xb+" "+e.ej+" R G B","set theme dead ramp",a,d,c,b);c=this.b(e.xb+" <0..> R G B","set state color",a,d,c,b);c=this.b(e.xb+" "+e.je+" R G B","set grid color",a,d,c,b);c=this.b(e.xb+" "+e.ie+" R G B","set grid major color",a,d,c,b);c=this.b(e.xb+" "+e.Ge+" R G B","set star color",a,d,c,b);c=this.b(e.kg,"same as COLOR",a,d,c,b);c=this.b(e.rf+" <"+f.ob+".."+f.tc+">","set steps per second",a,d,c,b);c=this.b(e.Wf+" <"+f.Ef+".."+f.Cd+">","set generations per step",
a,d,c,b);c=this.b(e.Ve+" <0..359>","set camera angle",a,d,c,b);c=this.b(e.cg+" <-"+(this.a.width>>1)+".."+(this.a.width>>1)+">","set camera x position",a,d,c,b);c=this.b(e.dg+" <-"+(this.a.height>>1)+".."+(this.a.height>>1)+">","set camera y position",a,d,c,b);c=this.b(e.eg+" <"+f.o.toFixed(1)+".."+f.ha.toFixed(1)+">","set camera zoom",a,d,c,b);c=this.b(e.Vd,"fit pattern to display",a,d,c,b);c=this.b(e.wf+" <"+f.Df+".."+f.Af+">","set number of layers",a,d,c,b);c=this.b(e.lf+" <"+f.Cf.toFixed(1)+".."+
f.ui.toFixed(1)+">","set layer depth",a,d,c,b);c=this.b(e.Oh+" <"+f.uc+".."+this.Yc+">","set LifeViewer width",a,d,c,b);c=this.b(e.Kg+" <"+f.xi+".."+f.wi+">","set LifeViewer height",a,d,c,b);c=this.b("","",a,d,c,b);this.fb=128;c=this.b("","",a,d,c,b);this.oi=this.za;c=this.b("","Information",a,d,c,b);c=this.b("","",a,d,c,b);c=this.b("","Display:",a,d,c,b);c=this.b("Size",this.e+" x "+this.d,a,d,c,b);c=this.b("View","X "+(this.a.width/2-this.a.H|0)+"  Y "+(this.a.height/2-this.a.I|0)+"  ZOOM "+this.a.zoom.toFixed(2)+
"  ANGLE "+this.a.l.toFixed(0),a,d,c,b);this.Ia&&(l=this.ja?"Multi-State Viewer":"Viewer");c=this.b("Mode",l,a,d,c,b);c=this.b("","",a,d,c,b);c=this.b("","Pattern:",a,d,c,b);c=this.b("Size",this.Mf+" x "+this.If,a,d,c,b);r=this.ja?this.eh:RuleManager.Ae(this.mc).name;c=this.b("Rule",r,a,d,c,b);r=this.Lf;this.ja&&this.ye!==this.Lf&&(r=this.ye+" of "+r);c=this.b("States",r,a,d,c,b);c=this.b("Decoder",this.Qb,a,d,c,b);c=this.b("","",a,d,c,b);c=this.b("","Script:",a,d,c,b);c=this.b("Commands",this.Fd,
a,d,c,b);c=this.b("Errors",this.dh,a,d,c,b);c=this.b("","",a,d,c,b);c=this.b("","Grid:",a,d,c,b);c=this.b("Size",this.a.width+" x "+this.a.height,a,d,c,b);c=this.b("Maximum",this.a.Bd+" x "+this.a.Bd,a,d,c,b);c=this.a.g?this.Jb?this.b("Area",this.a.j.la-this.a.j.ga+1+" x "+(this.a.j.oa-this.a.j.$+1),a,d,c,b):this.b("Area","0 x 0",a,d,c,b):this.b("Area",this.Mf+" x "+this.If,a,d,c,b);c=this.b("Tiles",this.a.cd,a,d,c,b);c=this.b("Tile Size",(this.a.Ic<<3)+" x "+this.a.Jc,a,d,c,b);c=this.b("","",a,d,
c,b);c=this.b("","Step back:",a,d,c,b);c=this.b("Enabled",this.yc?"Off":"On",a,d,c,b);if(!this.yc){for(r=0;r<this.a.eb.Y.length;)c=this.b("Snapshot "+r,"T "+this.a.eb.Y[r].g+" Size "+(4*this.a.eb.Y[r].he.length/1024|0)+"K + "+(4*this.a.eb.Y[r].Xd.length/1024|0)+"K",a,d,c,b),r+=1;c=this.b("Next",this.a.ad,a,d,c,b)}c=this.b("","",a,d,c,b);c=this.b("","Engine:",a,d,c,b);c=this.b("Name",f.nj,a,d,c,b);c=this.b("Build",f.mj,a,d,c,b);c=this.b("Author",f.Jl,a,d,c,b);c=this.b("Decoders","Cells, Life 1.05, Life 1.06, RLE, LV85",
a,d,c,b);c=this.b("Formats","Moore + LifeHistory",a,d,c,b);c=this.b("Viewers",h.gb.length,a,d,c,b);c=this.b("Playing",h.Nl(),a,d,c,b);c=this.b("","",a,d,c,b);if(this.ja)for(c=this.b("","Set:",a,d,c,b),c=this.b("Name",this.Yd,a,d,c,b),c=this.b("Used",this.ye,a,d,c,b),r=0;r<t.length;r+=1)this.rd[r]!==f.yh&&(u=(t[r]>>16&255)+" "+(t[r]>>8&255)+" "+(t[r]&255),m=String(r),this.rd[r]!==f.Ti||this.Te||(m+="*"),c=this.b(m,u,a,d,c,b));else c=this.b("","Theme:",a,d,c,b),t=this.a.yb===this.a.Ta?"(custom)":String(this.a.yb),
c=this.b("Name",t,a,d,c,b),c=this.b("Background",u.Wa.red+" "+u.Wa.green+" "+u.Wa.blue,a,d,c,b),c=this.b("Alive",u.U.p.red+" "+u.U.p.green+" "+u.U.p.blue,a,d,c,b),c=u.U.p.red!==u.U.q.red||u.U.p.green!==u.U.q.green||u.U.p.blue!==u.U.q.blue?this.b("AliveRamp",u.U.q.red+" "+u.U.q.green+" "+u.U.q.blue,a,d,c,b):this.b("AliveRamp","(none)",a,d,c,b),c=this.b("Dead",u.O.p.red+" "+u.O.p.green+" "+u.O.p.blue,a,d,c,b),c=u.O.p.red!==u.O.q.red||u.O.p.green!==u.O.q.green||u.O.p.blue!==u.O.q.blue?this.b("DeadRamp",
u.O.q.red+" "+u.O.q.green+" "+u.O.q.blue,a,d,c,b):this.b("DeadRamp","(none)",a,d,c,b);c=this.b("","",a,d,c,b);c=this.b("","Grid Lines:",a,d,c,b);c=this.b("Enabled",this.a.Ka?"On":"Off",a,d,c,b);t="Line Color";-1!==this.Zd&&(t+="*");c=this.b(t,(this.a.zd>>16)+" "+(this.a.zd>>8&255)+" "+(this.a.zd&255),a,d,c,b);t="Major Color";-1!==this.$d&&(t+="*");c=this.b(t,(this.a.yd>>16)+" "+(this.a.yd>>8&255)+" "+(this.a.yd&255),a,d,c,b);t=-1!==this.a.pc?String(this.a.pc):"Off";c=this.b("Interval",t,a,d,c,b);
c=this.b("","",a,d,c,b);c=this.b("","Stars:",a,d,c,b);c=this.b("Enabled",this.Kd?"On":"Off",a,d,c,b);c=this.b("Color",this.Fc.red+" "+this.Fc.green+" "+this.Fc.blue,a,d,c,b);if(this.Xa)for(c=this.b("","",a,d,c,b),c=this.b("","Waypoints:",a,d,c,b),c=this.b("Enabled",this.wa?"Off":"On",a,d,c,b),c=this.b("Number",this.J.length(),a,d,c,b),r=0;r<this.J.length();r+=1)t=String(r),r===this.J.Hc&&(t=this.J.gg(this.elapsedTime)?t+">":t+"*"),c=this.b(t,this.J.Ol(r,e.Z),a,d,c,b);-1!==this.Aa&&(c=this.b("","",
a,d,c,b),c=this.b("","Loop:",a,d,c,b),c=this.b("Enabled",this.Ma?"Off":"On",a,d,c,b),this.b("Generation",this.Aa,a,d,c,b));this.Ed=this.za-1;this.za=1;this.fb=120;c=k+19*(this.R+2);c=this.fl(a,d,c);this.b("H / Esc","close help",a,d,c,0)};t.prototype.ik=function(a){var d=a.Na;a.R=(a.d/19|0)-6;d.fillStyle="black";d.globalAlpha=.5;d.fillRect(0,0,d.canvas.width,d.canvas.height);d.globalAlpha=1;d.fillStyle="black";a.nh(d,6,14,a.i);d.fillStyle=f.le;a.nh(d,4,12,a.i)};t.prototype.Yk=function(a,d,c){var b=
c,e=0,h=!1,k=this.za;"#000000"===a.fillStyle&&(h=!0);0<=k&&k<=0+this.R&&(a.font=f.pf,h||(a.fillStyle=1<this.A?f.ee:f.sf),a.fillText("Up",d,c),h||(a.fillStyle=f.ee),a.fillText(" / ",d+a.measureText("Up").width,c),h||(a.fillStyle=this.A<this.Va.length-this.R?f.ee:f.sf),a.fillText("Down",d+a.measureText("Up / ").width,c),this.fb&&(e=this.fb),h||(a.fillStyle=f.ee),a.font=f.Sd,a.fillText("scroll errors",d+e,c),b+=19);return b};t.prototype.Of=function(a,d,c,b,e,h){var k=e,l=0,m=this.za;m>=h&&m<=h+this.R&&
(a.length&&(c.font=f.pf,c.fillText(a,b,e),l=c.measureText(a+" ").width),this.fb&&(l=this.fb),c.font=f.Sd,c.fillText(d,b+l,e),k+=19);this.za+=1;return k};t.prototype.Gi=function(a,d,c,b){var e=0,h=this.Va,k=c;this.za=1;this.fb=0;a.font=f.Sd;c=this.Of("","Script errors:",a,d,c,b);for(e=0;e<h.length;e+=1)c=this.Of(h[e][0],h[e][1],a,d,c,b);this.fb=120;this.za=1;c=k+19*(this.R+2);c=this.Yk(a,d,c);c=this.Of("Esc","clear messages",a,d,c,0);this.Of("H  ","help on script commands",a,d,c,0)};t.prototype.gk=
function(a){var d=a.Na;a.R=(a.d/19|0)-7;d.fillStyle="black";d.globalAlpha=.5;d.fillRect(0,0,d.canvas.width,d.canvas.height);d.globalAlpha=1;d.fillStyle="black";a.Gi(d,6,14,a.A);d.fillStyle=f.ee;a.Gi(d,4,12,a.A)};t.prototype.Sh=function(a,d){var c=this.h.vc,b=this.h.wc,e=a+d,h=-this.a.l,k=Math.sin(h/180*Math.PI),h=Math.cos(h/180*Math.PI),l=0,m=0;0>e?e=0:1<e&&(e=1);a=f.o*Math.pow(f.ha/f.o,a);e=f.o*Math.pow(f.ha/f.o,e);c-=this.e/2;b-=this.d/2;l=(c-e/a*c)/e;m=(b-e/a*b)/e;this.a.H-=l*h+m*-k;this.a.I-=
l*k+m*h};t.prototype.Gl=function(a){var d=!1,c=!1,b=0,e=0,f=!1;a.Ma||-1===a.Aa||(d=!0);!a.wa&&a.Xa&&(c=!0);if(d||c){f=!1;if(c&&d)e=a.elapsedTime/a.J.ii(a.Aa);else if(c){if(b=a.J.Ik().S)e=a.elapsedTime/b,1<e&&(f=!0)}else 0<a.Aa&&(e=a.a.g/a.Aa);1<e&&(e=1);a.Rb.current=100*e}else f=!0;a.Rb.F=f;a.cc.Kb=f?a.C.Kb:0};t.prototype.ok=function(){this.Fc.Qj(this.a.width/2-this.a.H,this.a.height/2-this.a.I,this.a.zoom,this.a.l,this.a.e,this.a.d,this.a.Fa,this.a.Db[0])};t.prototype.Kl=function(a,d){var c=d.wheelDelta,
b=0,e=0,b=performance.now(),h=d.J.current,k=0,k=0,l=!1,k="",k=e=!1;d.$a=!1;e=b-d.Xc;d.Sg&&(d.Sg=!1,a=e=0);d.Ia||d.Gl(d);d.v.current!==f.Ca?(a>f.li&&(a=f.li,l=!0),d.elapsedTime+=a):d.hc&&(k=!0,d.elapsedTime=a<e?d.elapsedTime+a:d.elapsedTime+e);d.ra&&(e>1E3/d.kb||d.kb===f.tc)&&(d.Xc=b,d.hc=!0);d.n=d.ma.current[0];d.hc&&d.a.g===d.Aa&&!d.Ma&&(d.elapsedTime=0,d.reset(d));d.Xa&&!d.wa&&(d.v.current!==f.Ca||k?(!d.mb||d.J.gg(d.elapsedTime)||k||(d.mb=!1,d.elapsedTime=d.J.ai(d.a.width/2-d.a.H,d.a.height/2-d.a.I,
d.a.zoom,d.a.l,d.a.f,d.a.Ra*f.Tc,d.a.yb,d.kb,d.n,d.a.g,d.elapsedTime)),h.jb&&(d.fe(),h.x=d.a.width/2-d.a.H,h.y=d.a.height/2-d.a.I,h.zoom=d.a.zoom),(e=d.J.update(d.elapsedTime))?(d.$a=!1,h.jb=!1):(k||(d.$a=!0),d.a.H=d.a.width/2-h.x,d.a.I=d.a.height/2-h.y,d.a.zoom=h.zoom,d.K&&(d.a.zoom/=4),d.k&&(d.k.current=[Math.log(d.a.zoom/f.o)/Math.log(f.ha/f.o),d.a.zoom]),d.a.l=h.l,d.xa&&(d.xa.current=[d.a.l,d.a.l]),d.a.f=h.f,d.sa&&(d.sa.current=[d.a.f,d.a.f]),d.a.Ra=h.depth/f.Tc+f.Cf,d.P&&(d.P.current=[Math.sqrt(d.a.Ra),
d.a.Ra*f.Tc]),d.kb=h.Q,d.t&&(d.t.current=[Math.sqrt((h.Q-f.ob)/(f.tc-f.ob)),h.Q]),d.n=h.step,d.ma.current=[d.n,d.n],h.G>d.a.g?(d.hc=!0,d.n=h.G-d.a.g|0,1>d.n&&(d.n=1),d.n>f.Cd&&(d.n=f.Cd)):d.hc=!1,h.tb!==d.vf&&(""===h.tb?d.h.s.clear(!1,!1):d.h.s.ka(h.tb,1E3,!1),d.vf=h.tb),h.T!==d.Xg&&(d.a.Ec(h.T,d.a.jg),d.Da&&(d.Da.current=[h.T,h.T]),d.Xg=h.T))):d.$a=!1);d.t.ta=d.$a;d.ma.ta=d.$a;d.Da.ta=d.$a;d.k.ta=d.$a;d.xa.ta=d.$a;d.sa.ta=d.$a;d.P.ta=d.$a;if(d.hc){if(d.Jb){for(k=0;k<d.n;k+=1){if(d.a.g===d.Aa-1&&
!d.Ma||d.a.g===d.Nd-1)k=d.n-1;d.Gc&&k===d.n-1?d.a.ve(!0,d.elapsedTime,d.yc):d.a.ve(!1,d.elapsedTime,d.yc);if(d.a.fj||k===d.n-1)d.Jb=d.a.cf()}d.Jb||(d.of=f.uk,d.fi=d.a.g)}else d.of&&(d.of-=1,k=d.a.g,d.a.g=d.fi,d.a.cf(),d.a.g=k),d.a.g+=1;d.a.g===d.Nd&&(d.v.current=d.Vb(f.Ca,!0,d))}c&&(d.wheelDelta=0,0<d.i?0<c?d.uh(d,3):d.th(d,3):0<d.A?0<c?d.sh(d,3):d.rh(d,3):d.$a||(b=d.k.current[0],0>c?0<b&&(d.Sh(b,-.05),b-=.05,0>b&&(b=0)):1>b&&(d.Sh(b,.05),b+=.05,1<b&&(b=1)),d.k&&(d.k.current=d.Td([b,b],!0,d))));d.a.Zk();
d.Kd&&d.ok();d.a.hk();d.Sf&&d.Gj(d);d.a.g&&d.Jb&&d.a.Hj()&&(d.nc+=d.a.width>>2,d.oc+=d.a.height>>2);d.i?d.ik(d):d.Va.length&&!d.K&&d.gk(d);d.cc.lower[0]="T "+d.Tf(d.a.g);d.nf.Fb=d.wj(d.elapsedTime);d.Nf.Fb=d.Tf(d.a.Eb);d.Xe.Fb=d.Tf(d.a.wb);d.ef.Fb=d.Tf(d.a.Ab);l?d.fd<f.Sk&&(d.fd+=f.Ci):d.fd>f.Tk&&(d.fd-=f.Ci);k="rgb("+d.fd+",0,0)";d.t.vb=k;d.ma.vb=k;d.hc=!1;d.h.Id(d.ra)};t.prototype.Ml=function(a){a.a.g=0;a.elapsedTime=0;a.a.H=a.a.width>>1;a.a.I=a.a.height>>1;a.a.H&=a.a.width-1;a.a.I&=a.a.height-
1;a.Xc=performance.now();a.Pf.Fb=RuleManager.Ae(a.mc).name;a.Jb=!0;a.Sg=!0};t.prototype.Ll=function(a,d){d.h.Uf=a[0];d.h.Id(!0)};t.prototype.qj=function(a,d,c){d?(d=a[0]+.5|0,c.a.yb!==d&&(c.a.Ec(d,c.a.jg),c.Sc&&d===c.a.Ta?c.h.s.ka("Custom Theme",40,!0):c.h.s.ka("Theme "+d,40,!0)),a=a[0]):a=c.a.yb;return[a,c.a.yb]};t.prototype.bg=function(a,d,c){d&&(c.n=a[0]+.5|0);return[c.n,c.n]};t.prototype.pd=function(a,d,c){d?(c.kb=f.ob+a[0]*a[0]*(f.tc-f.ob),a=a[0]):a=Math.sqrt((c.kb-f.ob)/(f.tc-f.ob));return[a,
c.kb]};t.prototype.Hi=function(a,d){var c=0;a.a.zoom=a.ei;a.K&&(a.a.zoom/=4);a.k&&(a.k.current=[Math.log(a.a.zoom/f.o)/Math.log(f.ha/f.o),a.a.zoom]);a.a.l=a.td;a.xa&&(a.xa.current=[a.td,a.td]);a.a.H=a.nc;a.a.I=a.oc;if(!a.Da.ta||d)a.a.Ec(a.vd,1),a.Da.current=[a.vd,a.vd],a.ja&&(a.a.kc=0);c=Math.sqrt((a.zg-f.ob)/(f.tc-f.ob));a.t.current=a.pd([c,c],!0,a);a.n=a.jf;a.ma.current=[a.n,a.n];a.a.f=a.ud;a.sa.current=[a.ud,a.ud];c=Math.sqrt(a.xg);a.P.current=a.od([c,c],!0,a)};t.prototype.reset=function(a){var d=
!1,c=!1;0===a.elapsedTime&&(d=!0);a.Ma||a.a.g===a.Aa&&(c=!0);!c&&a.Xa&&(a.wa=!0);a.Ma=!a.Xa||c?!1:!0;a.elapsedTime=0;a.ja||(a.a.ql(),a.Jb=!0);d&&(a.Hi(a,!0),a.Xa&&(a.wa=!1),a.Ma=!1);a.vf="";a.Xg=-1;a.mb=!1;a.J.Hc=0;a.h.s.clear(!1,!1)};t.prototype.Pi=function(a){this.v.icon[2]=a?f.Ha.icon("pause"):f.Ha.icon("stepforward")};t.prototype.Vb=function(a,d,c){var b=a,e=c.Ma,h=c.wa,k=null,l="",m=40;if(d){switch(a){case f.yi:c.Nc&&0===c.a.g&&0===c.elapsedTime?(c.ra=!0,a=f.Dd,c.Xc=performance.now()):(c.ra=
!1,a=f.Ca);c.reset(c);k="Reset";!c.Ma&&e&&-1!==c.Aa&&(m=120,l="(Loop On");c.Ma&&!e&&-1!==c.Aa&&(m=120,l="(Loop Off");!c.wa&&h&&(m=120,l=(""===l?"(":l+", ")+"Waypoints On");c.wa&&!h&&(m=120,l=""===l?"(":l+", ",l+="Waypoints Off");""!==l&&(l+=")",k+=" "+l);c.h.s.ka(k,m,!0);break;case f.Dd:c.v.current!==f.Dd&&(c.ra=!0,c.h.s.ka("Play",40,!0),c.Xc=performance.now());break;case f.Nk:c.ra?c.ra=!1:0<c.a.g&&c.Rf(c.a.g-c.n);a=f.Ca;break;case f.Ca:c.ra?(c.ra=!1,c.Ma||c.Xa||-1===c.Aa?c.h.s.ka("Pause",40,!0):
(c.Ma=!0,c.h.s.ka("Pause (Loop Off)",120,!0))):(c.hc=!0,c.Xc=performance.now())}b=a;c.Pi(c.ra)}return b};t.prototype.Mh=function(a,d,c){d&&(c.mb=!0,c.a.l=a[0]);return[c.a.l,c.a.l]};t.prototype.Nh=function(a,d,c){d?(c.mb=!0,c.a.f=a[0]+.5|0,a=a[0]):a=c.a.f;return[a,c.a.f]};t.prototype.od=function(a,d,c){return d?(c.mb=!0,c.a.Ra=a[0]*a[0],[a[0],c.a.Ra*f.Tc]):[Math.sqrt(c.a.Ra),c.a.Ra*f.Tc]};t.prototype.oj=function(a,d,c,b){var e=0,f=0,h=0,k=0,h=0;c?(-1!==b.Ad&&(e=(b.Ad-a)/b.a.zoom,f=(b.uf-d)/b.a.zoom,
h=-b.a.l,k=Math.sin(h/180*Math.PI),h=Math.cos(h/180*Math.PI),b.$a||(b.mb=!0,b.a.H+=e*h+f*-k,b.a.I+=e*k+f*h)),b.Ad=a,b.uf=d):(b.Ad=-1,b.uf=-1)};t.prototype.xc=function(a,d){this.uf=this.Ad=0;this.oj(a,d,!0,this);this.Ad=-1};t.prototype.Tj=function(a){var d=new Image,c=null;d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAAAoCAIAAABPWuCHAAAABnRSTlMAAAAAAABupgeRAAAB2ElEQVR4nO2bW47DMAhF69EspPtf1ezE8xHJqtLEr0AM5JzPpjVcuLKIUF8vAAAAAAAAAAAAAAA90tmDnHNKp0/1yDkffn6WzOj3m4dcUb2qaBpsNSlyROrcc84u7ii/zdhhOqTKWZ8qvMd/UudPrlMTcmSZvhp+eo5eLs8yc/URd7PgmUbaPZdG29DldCM67RCyJqYUTSTTa+gSwJTgVUStg0FRoymNGbrEMKj8HqS0C867Umea7elQYrWXwp4wz3llFO+3hqenMevmjf53xJkbehfJeC2uE16jC3WdSV41dAnmoiijRNX1iSOBPanKGLrEc1SdOpG0VHCnsZnw/AxdD+l3tr6tx8sXK+7cvFGfpyVv6F1Up/W6h+WLFdfdqSSvZWiAJWgZOqXkd+p4Aq67c+vI4d3K9+RvYbHitE31tCVfCp0W6JBNi+qgaWGxklLyNUw3PSZzQ3u/lc+IqusTRwJ7Ur1q6Ie0PLZGF+rUV9/h27wjtl7j0vrTm5mhjYtXRXC2Xr5Y2WF2nh7y29gNHfuW6ud6HZYvVg4x2NzRlHoNjZW/CVkTU4omkmkbOmTbBIlXHyNy5P8kG69VeozWysJipcLyvi9PAAAAAAAAAAAAAADgiH/79PIKc0DnjAAAAABJRU5ErkJggg==";
c=new IconManager(d,a);c.add("play",40,40);c.add("pause",40,40);c.add("tostart",40,40);c.add("menu",40,40);c.add("stepback",40,40);c.add("stepforward",40,40);return c};t.prototype.rj=function(a,d){a.h.hasFocus&&(d.wheelDelta?a.wheelDelta=d.wheelDelta/120:d.detail&&(a.wheelDelta=-d.detail/3),a.h.Id(!0),d.preventDefault())};t.prototype.Le=function(a,d,c){d&&(c.i=a[0]);return[c.i]};t.prototype.pj=function(a,d,c){d&&(c.Gc=a[0],c.Gc&&(c.Jb?0===c.a.g?(c.a.Eb=c.a.Cc.Eb,c.a.wb=c.a.Cc.wb,c.a.Ab=c.a.Cc.Ab):
(c.a.g-=1,c.a.ve(!0,c.elapsedTime,c.yc)):(c.a.Eb=0,c.a.wb=0,c.a.Ab=0)));c.h.Id(!0);return[c.Gc]};t.prototype.sh=function(a,d){1<a.A&&(a.A-=d,1>a.A&&(a.A=1))};t.prototype.rh=function(a,d){a.A<a.Va.length-a.R&&(a.A+=d,a.A>a.Va.length-a.R&&(a.A=a.Va.length-a.R))};t.prototype.uh=function(a,d){1<a.i&&(a.i-=d,1>a.i&&(a.i=1))};t.prototype.th=function(a,d){a.i<a.Ed-a.R&&(a.i+=d,a.i>a.Ed-a.R&&(a.i=a.Ed-a.R))};t.prototype.Rf=function(a){this.yc||(this.Jb=this.a.Rf(a,this.Gc,this.elapsedTime),this.elapsedTime=
this.a.elapsedTime);a!==this.a.g&&this.h.s.ka("No previous generation",120,!0)};t.prototype.Hk=function(a,d){var c=d.charCode||d.keyCode,b=!0,e=0;if(d.ctrlKey||d.metaKey||d.altKey)c=-1;switch(c){case 66:a.Ia||(a.v.current===f.Ca?0<a.a.g&&a.Rf(a.a.g-a.n):a.v.current=a.Vb(f.Ca,!0,a));break;case 13:a.Ia||(a.v.current=a.v.current===f.Dd?a.Vb(f.Ca,!0,a):a.Vb(f.Dd,!0,a));break;case 32:a.Ia||(a.ra?a.v.current=a.Vb(f.Ca,!0,a):(a.hc=!0,a.Xc=performance.now()));break;case 87:a.Xa&&(a.wa=!a.wa,-1!==a.Aa?(a.Ma=
a.wa,a.h.s.ka("Loop "+(a.Ma?"Off":"On")+", Waypoints "+(a.wa?"Off":"On"),40,!0)):a.h.s.ka("Waypoints "+(a.wa?"Off":"On"),40,!0),a.wa?a.h.s.clear(!1,!1):a.J.gg(a.elapsedTime)||(a.J.vk(a.a.g),a.elapsedTime=a.J.ii(a.a.g),a.elapsedTime=a.J.ai(a.a.width/2-a.a.H,a.a.height/2-a.a.I,a.a.zoom,a.a.l,a.a.f,a.a.Ra*f.Tc,a.a.yb,a.kb,a.n,a.a.g,a.elapsedTime),a.mb=!1));break;case 69:!a.ma.ta&&a.n<f.Cd&&(a.n+=1,a.ma.current=a.bg([a.n,a.n],!0,a));break;case 68:!a.ma.ta&&a.n>f.Ef&&(a.n-=1,a.ma.current=a.bg([a.n,a.n],
!0,a));break;case 90:e=h.Cl(a);0<e&&a.h.s.ka("Paused "+e,40,!0);break;case 88:a.a.Ka=!a.a.Ka;a.a.Mb()||a.h.s.ka("Grid Lines "+(a.a.Ka?"On":"Off"),40,!0);break;case 80:!a.ja&&a.P&&(a.P.current=.99>=a.P.current[0]?a.od([a.P.current[0]+.01,a.P.current[1]],!0,a):a.od([1,a.P.current[1]],!0,a));break;case 76:!a.ja&&a.P&&(a.P.current=.01<=a.P.current[0]?a.od([a.P.current[0]-.01,a.P.current[1]],!0,a):a.od([0,a.P.current[1]],!0,a));break;case 81:!a.ja&&a.sa&&a.sa.current[0]<f.Af&&(a.sa.current=a.Nh([a.a.f+
1,a.sa.current[1]],!0,a));break;case 65:!a.ja&&a.sa&&a.sa.current[0]>f.Df&&(a.sa.current=a.Nh([a.a.f-1,a.sa.current[1]],!0,a));break;case 82:a.v.current=a.Vb(f.yi,!0,a);break;case 83:a.Kd=!a.Kd;break;case 78:a.Zf&&(a.K?a.Ch():(a.Xi(),a.i&&(a.i=0)),a.resize());break;case 86:a.Hi(a,!1);a.v.current===f.Ca&&(a.mb=!0);break;case 221:a.k&&(a.k.current=.99>=a.k.current[0]?a.Td([a.k.current[0]+.01,a.k.current[1]],!0,a):a.Td([1,a.k.current[1]],!0,a));break;case 219:a.k&&(a.k.current=.01<=a.k.current[0]?a.Td([a.k.current[0]-
.01,a.k.current[1]],!0,a):a.Td([0,a.k.current[1]],!0,a));break;case 48:a.a.l=0;a.xa&&(a.xa.current=[a.a.l,a.a.l]);break;case 49:a.a.zoom=1;a.k&&(a.k.current=[Math.log(a.a.zoom/f.o)/Math.log(f.ha/f.o),a.a.zoom]);break;case 50:a.a.zoom=2;a.k&&(a.k.current=[Math.log(a.a.zoom/f.o)/Math.log(f.ha/f.o),a.a.zoom]);break;case 51:a.a.zoom=32;a.k&&(a.k.current=[Math.log(a.a.zoom/f.o)/Math.log(f.ha/f.o),a.a.zoom]);break;case 52:a.a.zoom=4;a.k&&(a.k.current=[Math.log(a.a.zoom/f.o)/Math.log(f.ha/f.o),a.a.zoom]);
break;case 53:a.a.zoom=.5;a.k&&(a.k.current=[Math.log(a.a.zoom/f.o)/Math.log(f.ha/f.o),a.a.zoom]);break;case 54:a.a.zoom=16;a.k&&(a.k.current=[Math.log(a.a.zoom/f.o)/Math.log(f.ha/f.o),a.a.zoom]);break;case 56:a.a.zoom=8;a.k&&(a.k.current=[Math.log(a.a.zoom/f.o)/Math.log(f.ha/f.o),a.a.zoom]);break;case 189:!a.Ia&&a.t&&(a.t.current=.01<=a.t.current[0]?a.pd([a.t.current[0]-.01,a.t.current[1]],!0,a):a.pd([0,a.t.current[1]],!0,a));break;case 187:!a.Ia&&a.t&&(a.t.current=.99>=a.t.current[0]?a.pd([a.t.current[0]+
.01,a.t.current[1]],!0,a):a.pd([1,a.t.current[1]],!0,a));break;case 188:a.xa&&(e=a.xa.current[0],e-=1,0>e&&(e=359),a.xa.current=a.Mh([e,e],!0,a));break;case 190:a.xa&&(e=a.xa.current[0],e+=1,360<=e&&(e=0),a.xa.current=a.Mh([e,e],!0,a));break;case 84:a.Ll([!a.h.Uf],a);break;case 71:a.Ia||(a.pj([!a.Gc],!0,a),a.cc&&(a.cc.current=[a.Gc],a.h.Ne=!0));break;case 70:a.fe();a.v.current===f.Ca&&(a.mb=!0);break;case 79:a.wl(a);break;case 37:d.shiftKey?a.xc(a.a.zoom,a.a.zoom):a.xc(a.a.zoom,0);break;case 38:a.i?
a.uh(a,1):a.A?a.sh(a,1):d.shiftKey?a.xc(-a.a.zoom,a.a.zoom):a.xc(0,a.a.zoom);break;case 39:d.shiftKey?a.xc(-a.a.zoom,-a.a.zoom):a.xc(-a.a.zoom,0);break;case 40:a.i?a.th(a,1):a.A?a.rh(a,1):d.shiftKey?a.xc(a.a.zoom,-a.a.zoom):a.xc(0,-a.a.zoom);break;case 77:a.Pb&&!a.Pb.F&&(a.Pb.current[0]=!a.Pb.current[0],a.h.Ne=!0);break;case 67:a.ja||!a.Da||a.Da.ta||(e=a.Da.current[0],e+=1,a.Sc?e>=a.a.Ta+1&&(e=0):e>=a.a.Ta&&(e=0),a.Da.current=a.qj([e,e],!0,a));break;case 72:a.Va.length?a.i=a.i?0:a.Oi:a.i?a.i=0:a.K||
(a.i=1);a.me.current=a.Le([a.i],!0,a);break;case 73:a.i?a.i=0:a.K||(a.i=a.oi);a.me.current=a.Le([a.i],!0,a);break;case 27:a.i?a.i=0:a.A?(a.Va=[],a.A=0):a.ra?a.v.current=a.Vb(f.Ca,!0,a):a.Xa&&!a.wa&&(a.wa=!0,a.h.s.ka("Waypoints "+(a.wa?"Off":"On"),40,!0));a.i=0;a.me.current=a.Le([a.i],!0,a);break;case 33:a.i?a.uh(a,a.R):a.A&&a.sh(a,a.R);break;case 34:a.i?a.th(a,a.R):a.A&&a.rh(a,a.R);break;case 36:a.i?a.i=1:a.A&&(a.A=1);break;case 35:a.i?a.i=a.Ed-a.R:a.A&&(a.A=a.Va.length-a.R);break;default:b=!1}b&&
(a.h.Id(!0),d.preventDefault())};t.prototype.Xj=function(){this.C=this.h.Wj(this.Kl,this.Ml,this);this.C.Dg=this.oj;this.me=this.C.Se(this.Le,Menu.zi,-40,0,40,["?"],[!1],Menu.Ff);this.Rb=this.C.uj();this.Rb.ta=!0;this.k=this.C.Mc(this.Td,Menu.Pl,30,0,40,292,1,0,.1,"Zoom ","x",2);this.sa=this.C.Mc(this.Nh,Menu.hi,-70,0,40,292,f.Af,f.Df,1,"Layers ","",0);this.P=this.C.Mc(this.od,Menu.Ri,0,-90,390,40,0,1,.1,"Depth ","",2);this.xa=this.C.Mc(this.Mh,Menu.bh,0,50,390,40,0,359,0,"Angle ","\u00b0",0);this.Pb=
this.C.Se(null,Menu.Gb,-40,-40,40,[""],[!1],Menu.Ff);this.Pb.icon=[f.Ha.icon("menu")];this.Da=this.C.Mc(this.qj,Menu.bh,0,0,200,40,0,this.a.Ta-1,1,"Theme ","",0);this.t=this.C.Mc(this.pd,Menu.Gb,-375,-40,80,40,0,1,0,"","gps",0);this.ma=this.C.Mc(this.bg,Menu.Gb,-290,-40,80,40,f.Ef,f.Cd,1,"x","",0);this.v=this.C.Se(this.Vb,Menu.Gb,-205,-40,160,["","","",""],f.Ca,Menu.vh);this.v.icon=[f.Ha.icon("tostart"),f.Ha.icon("stepback"),f.Ha.icon("pause"),f.Ha.icon("play")];this.Pb.Qh([this.k,this.sa,this.P,
this.xa,this.Da]);this.Jh=this.C.Wb(Menu.Jd,0,-80,90,"Time");this.Jh.textAlign=Menu.left;this.nf=this.C.Wb(Menu.Jd,90,-80,100,"");this.nf.textAlign=Menu.right;this.cc=this.C.Se(this.pj,Menu.Jd,0,-40,100,[""],[this.Gc],Menu.Ff);this.ih=this.C.Wb(Menu.Gb,-180,-160,90,"Alive");this.ih.textAlign=Menu.left;this.Nf=this.C.Wb(Menu.Gb,-90,-160,90,"");this.Nf.textAlign=Menu.right;this.hg=this.C.Wb(Menu.Gb,-180,-120,90,"Births");this.hg.textAlign=Menu.left;this.Xe=this.C.Wb(Menu.Gb,-90,-120,90,"");this.Xe.textAlign=
Menu.right;this.ug=this.C.Wb(Menu.Gb,-180,-80,90,"Deaths");this.ug.textAlign=Menu.left;this.ef=this.C.Wb(Menu.Gb,-90,-80,90,"");this.ef.textAlign=Menu.right;this.Pf=this.C.Wb(Menu.Jd,0,-120,190,RuleManager.Ae(this.mc).name);this.cc.Qh([this.ih,this.Nf,this.hg,this.Xe,this.ug,this.ef,this.Jh,this.nf,this.Pf])};t.prototype.xj=function(a){var d=this;this.ua=a;this.ua.getContext&&(this.ua.width!==this.Yc&&C.yf&&(this.ua.width=this.Yc),this.ua.width&=-8,this.Ob=this.ua.getContext("2d",{alpha:!1}),this.Ob.globalAlpha=
1,this.Ob.fillStyle="black",this.Ob.fillRect(0,0,this.ua.width,this.ua.height),this.dd=document.createElement("canvas"),this.dd.width=this.ua.width,this.dd.height=this.ua.height,this.Na=this.dd.getContext("2d",{alpha:!1}),this.e=this.ua.width,this.d=this.ua.height,this.a=new Life(this.Na,this.e,this.d,this.dk,this.ck),this.a.Ek(this.Na,this.e,this.d),this.Na.textAlign="left",this.Na.textBaseline="middle",f.Ha=this.Tj(this.Na),this.h=new MenuManager(this.Ob,this.Na,"24px Arial",f.Ha,this,this.zk),
this.h.Uf=!1,this.Xj(),this.hh=this.v.x,this.Gg=this.t.x,this.Ah=this.ma.x,registerEvent(this.ua,"DOMMouseScroll",function(a){d.rj(d,a)},!1),registerEvent(this.ua,"mousewheel",function(a){d.rj(d,a)},!1),this.h.s.enabled=!0,this.h.sj(this.C),registerEvent(this.ua,"keydown",function(a){d.Hk(d,a)},!1))};t.prototype.Gk=function(a){var d=!0;switch(a){case e.Pd:case e.ah:case e.Ge:case e.Vd:case e.Yf:case e.Wf:case e.fh:case e.je:case e.ie:case e.Bh:case e.xb:case e.kg:case e.cg:case e.dg:case e.eg:case e.zf:case e.ag:case e.Ih:case e.We:case e.De:case e.qh:case e.Ve:case e.Je:case e.rf:case e.Xf:case e.wf:case e.lf:case e.Oh:case e.Kg:d=
!0;break;default:d=!1}return d};t.prototype.bd=function(a,d,c,b){var e=a.gh();""===e||this.Gk(e)?d[d.length]=[c,b+" missing"]:(d[d.length]=[c+" "+e,b+" must be a number"],a.u())};t.prototype.Bc=function(a,d,c,b){var e=!1,f=0,h=0,k=0,m=a.u();if(a.M()){f=parseFloat(a.u())|0;if(0>f||255<f)d[d.length]=[b+" "+m+" "+f,"RED out of range"],e=!0;if(a.M()){h=parseFloat(a.u())|0;if(0>h||255<h)d[d.length]=[b+" "+m+" "+f+" "+h,"GREEN out of range"],e=!0;a.M()?(k=parseFloat(a.u())|0,0>k||255<k?d[d.length]=[b+" "+
m+" "+f+" "+h+" "+k,"BLUE out of range"]:e||(-1!==this.w[c]&&(d[d.length]=[b+" "+m+" "+f+" "+h+" "+k,"overwrites ("+(this.w[c]>>16)+" "+(this.w[c]>>8&255)+" "+(this.w[c]&255)+")"]),this.w[c]=f<<16|h<<8|k,c===this.pg?this.Zd=this.w[c]:c===this.qg?this.$d=this.w[c]:c===this.rg?(this.Fc.red=f,this.Fc.green=h,this.Fc.blue=k):this.Sc=!0)):this.bd(a,d,b+" "+m+" "+f+" "+h,"BLUE")}else this.bd(a,d,b+" "+m+" "+f,"GREEN")}else this.bd(a,d,b+" "+m,"RED")};t.prototype.Hl=function(a,d){var c=!0,b=0,f=this.a.Oa[this.a.Ta];
-1===this.w[this.ae]&&(a[a.length]=[d+" "+e.Fh,"missing"],c=!1);-1===this.w[this.be]&&-1===this.w[this.sd]&&(a[a.length]=[d+" "+e.Gh,"missing"],c=!1);c&&(b=this.w[this.be],-1===b&&(b=this.w[this.sd]),f.Wa.red=b>>16,f.Wa.green=b>>8&255,f.Wa.blue=b&255,b=this.w[this.ae],f.U.p.red=b>>16,f.U.p.green=b>>8&255,f.U.p.blue=b&255,b=this.w[this.ng],-1===b&&(b=this.w[this.ae]),f.U.q.red=b>>16,f.U.q.green=b>>8&255,f.U.q.blue=b&255,b=this.w[this.sd],-1===b&&(b=this.w[this.be]),f.O.q.red=b>>16,f.O.q.green=b>>8&
255,f.O.q.blue=b&255,b=this.w[this.og],-1===b&&(b=this.w[this.sd]),f.O.p.red=b>>16,f.O.p.green=b>>8&255,f.O.p.blue=b&255,this.a.Ec(this.a.Ta,1))};t.prototype.Il=function(a){var b=this.J.wk();b.Lc||(b.x=this.a.width/2-this.a.H);b.jc||(b.y=this.a.height/2-this.a.I);b.Hb||(b.zoom=this.a.zoom);b.Ud||(b.l=this.a.l);b.se||(b.f=this.a.f);b.de||(b.depth=this.a.Ra);b.ge||(b.Q=this.kb);b.He||(b.step=this.n);b.kd||(b.T=this.a.yb);this.J.Vk(a)};t.prototype.Fe=function(a,b){var c=a;a.length>b&&(c=a.substr(0,b-
1)+"...");return c};t.prototype.lj=function(a,b,c){var f=a.indexOf("\\n");-1!==f&&(c?b[b.length]=[e.Pd+" "+e.Z+this.Fe(a,23)+e.Z,"only one line allowed"]:(f=a.substr(f+2).indexOf("\\n"),-1!==f&&(b[b.length]=[e.Z+this.Fe(a,23),"only two lines allowed"])))};t.prototype.Ei=function(a,b,c){var f=e.Je+" ",h="overwrites (",f=b>=this.a.Ta?f+e.Ie:f+b,h=c>=this.a.Ta?h+e.Ie:h+c;a[a.length]=[f,h+")"]};t.prototype.Xk=function(a,b){var c=new Script(a),h=!1,k="",l="",r=!1,u="",m=0,t=!1,n=!1,g=this.Va,q=null,q=
this.Rc,B=0,C=t=l=0,ga=0,y=0,Q="",P=!1,y=new Waypoint,T=!1;this.dh=this.Fd=k=0;this.Sc=!1;this.w[this.be]=-1;this.w[this.ae]=-1;this.w[this.ng]=-1;this.w[this.sd]=-1;this.w[this.og]=-1;this.w[this.pg]=-1;this.w[this.qg]=-1;this.w[this.rg]=-1;this.Rc=[];if(c.ji(e.De)){for(k=0;256>k;k+=1)q[k]=-1;for(k=c.u();""!==k;){if(r)k[k.length-1]===e.Z?(u=u+" "+k.substr(0,k.length-1),r=!1,this.lj(u,g,h),h?(""!==this.ic&&(g[g.length]=[e.Pd+" "+e.Z+this.Fe(u,20)+e.Z,"overwrites "+e.Z+this.ic+e.Z]),this.ic=u,h=!1):
(y.tb=u,y.aj=!0)):u=u+" "+k;else if(k[0]===e.Z)u=k.substr(1),r=!0,k[k.length-1]===e.Z&&(r=!1,u=u.substr(0,u.length-1),this.lj(u,g,h),h?(""!==this.ic&&(g[g.length]=[e.Pd+" "+e.Z+this.Fe(u,20)+e.Z,"overwrites "+e.Z+this.ic+e.Z]),this.ic=u,h=!1):(y.tb=u,y.aj=!0));else{t=n=!1;this.Fd+=1;switch(k){case e.Pd:t=h=!0;break;case e.ah:t=this.yc=!0;break;case e.Ge:t=this.Kd=!0;break;case e.Vd:t=y.jb=!0;break;case e.je:t=this.a.Ka=!0;break;case e.ie:c.M()&&(n=!0,m=parseFloat(c.u())|0,m>=f.Mk&&m<=f.Jk&&(this.a.pc=
m,t=!0));break;case e.xb:case e.kg:Q=k;P=!1;if(c.M()){l=parseFloat(c.u())|0;if(0>l||255<=l)g[g.length]=[k+" "+l,"STATE out of range"],P=!0;if(c.M()){t=parseFloat(c.u())|0;if(0>t||255<t)g[g.length]=[k+" "+l+" "+t,"RED out of range"],P=!0;if(c.M()){C=parseFloat(c.u())|0;if(0>C||255<C)g[g.length]=[k+" "+l+" "+t+" "+C,"GREEN out of range"],P=!0;c.M()?(ga=parseFloat(c.u())|0,0>ga||255<ga?g[g.length]=[k+" "+l+" "+t+" "+C+" "+ga,"BLUE out of range"]:P||(-1!==q[l]&&(g[g.length]=[k+" "+l+" "+t+" "+C+" "+ga,
"overwrites ("+(q[l]>>16)+" "+(q[l]>>8&255)+" "+(q[l]&255)+")"]),q[l]=t<<16|C<<8|ga)):this.bd(c,g,k+" "+l+" "+t+" "+C,"BLUE")}else this.bd(c,g,k+" "+l+" "+t,"GREEN")}else this.bd(c,g,k+" "+l,"RED")}else switch(l=c.gh(),l){case e.dj:this.Bc(c,g,this.be,Q);break;case e.Fh:this.Bc(c,g,this.ae,Q);break;case e.cj:this.Bc(c,g,this.ng,Q);break;case e.Gh:this.Bc(c,g,this.sd,Q);break;case e.ej:this.Bc(c,g,this.og,Q);break;case e.je:this.Bc(c,g,this.pg,Q);break;case e.ie:this.Bc(c,g,this.qg,Q);break;case e.Ge:this.Bc(c,
g,this.rg,Q);break;default:g[g.length]=[k+" "+l,"illegal element"],c.u()}t=!0;break;case e.qh:c.ji(e.De);t=!0;this.Fd-=1;break;case e.ag:t=this.Ia=!0;break;case e.Bh:t=this.Vi=!0;break;case e.We:t=this.Nc=!0;break;case e.zf:c.M()&&(n=!0,m=parseFloat(c.u())|0,0<m&&(this.Aa=m,t=!0));break;case e.Xf:c.M()&&(n=!0,m=parseFloat(c.u())|0,0<m&&(this.Nd=m,t=!0));break;case e.Ve:c.M()&&(n=!0,m=parseFloat(c.u())|0,0<=m&&359>=m&&(y.Ud&&(g[g.length]=[e.Ve+" "+m,"overwrites ("+y.l+")"]),y.l=m,t=y.Ud=!0));break;
case e.wf:c.M()&&(n=!0,m=parseFloat(c.u())|0,m>=f.Df&&m<=f.Af&&(y.se&&(g[g.length]=[e.wf+" "+m,"overwrites ("+y.f+")"]),y.f=m,t=y.se=!0));break;case e.lf:c.M()&&(n=!0,m=parseFloat(c.u()),m>=f.Cf&&m<=f.ui&&(y.de&&(g[g.length]=[e.lf+" "+m+"overwrites ("+y.depth+")"]),y.depth=m,t=y.de=!0));break;case e.cg:c.M()&&(n=!0,m=parseFloat(c.u()),m>=-this.a.width/2&&m<=this.a.width/2&&(y.Lc&&(g[g.length]=[e.cg+" "+m,"overwrites ("+y.x+")"]),y.x=m,t=y.Lc=!0));break;case e.dg:c.M()&&(n=!0,m=parseFloat(c.u()),m>=
-this.a.height/2&&m<=this.a.height/2&&(y.jc&&(g[g.length]=[e.dg+" "+m,"overwrites ("+y.y+")"]),y.y=m,t=y.jc=!0));break;case e.eg:c.M()&&(n=!0,m=parseFloat(c.u()),m>=f.o&&m<=f.ha&&(y.Hb&&(g[g.length]=[e.eg+" "+m,"overwrites ("+y.zoom+")"]),y.zoom=m,t=y.Hb=!0));break;case e.rf:c.M()&&(n=!0,m=parseFloat(c.u())|0,m>=f.ob&&m<=f.tc&&(y.ge&&(g[g.length]=[e.rf+" "+m,"overwrites ("+y.Q+")"]),y.Q=m,t=y.ge=!0));break;case e.Ih:this.ne||(this.Zf=this.K=!0);t=!0;break;case e.Je:c.M()?(n=!0,m=parseFloat(c.u())|
0,0<=m&&m<this.a.Ta&&(y.kd&&this.Ei(g,m,y.T),y.T=m,t=y.kd=!0)):(l=c.gh(),l===e.Ie&&(c.u(),this.Sc?(y.kd&&this.Ei(g,this.a.Ta,y.T),y.T=this.a.Ta,y.kd=!0):g[g.length]=[e.Je+" "+e.Ie,"no custom THEME defined"],t=!0));break;case e.De:g[g.length]=[k,"already in a script block"];t=!0;break;case e.Yf:c.M()&&(n=!0,m=parseFloat(c.u())|0,0<=m&&(T||(T=!0),0<m&&(this.J.add(y),y=new Waypoint),y.G=m,t=y.Yi=!0));break;case e.Wf:c.M()&&(n=!0,m=parseFloat(c.u())|0,m>=f.Ef&&m<=f.Cd&&(y.He&&(g[g.length]=[e.Wf+" "+m,
"overwrites ("+y.step+")"]),y.step=m,t=y.He=!0));break;case e.fh:c.M()&&(n=!0,m=parseFloat(c.u()),0<m&&(T||(T=!0),this.J.add(y),y=new Waypoint,y.S=m,t=y.Zi=!0));break;case e.Oh:c.M()&&(n=!0,m=parseFloat(c.u())|0,m>=f.uc&&m<=this.Yc&&(t=!0,this.ne||(this.hd=m)));break;case e.Kg:c.M()&&(n=!0,m=parseFloat(c.u())|0,m>=f.xi&&m<=f.wi&&(t=!0,this.ne||(this.ze=m)));break;default:g[g.length]=[k,"unknown or misspelt command"],t=!0}t||(n?g[g.length]=[k+" "+m,"argument out of range"]:this.bd(c,g,k,"argument"))}""!==
k&&(k=c.u())}r&&(g[g.length]=[e.Z+u,"unterminated string"]);if(T)for(this.J.add(y),y=this.J.D[0],this.Xa=!0,k=0;k<this.J.length();k+=1)y=this.J.D[k],y.jb&&(y.Lc||y.jc||y.Hb)&&(u="",y.Lc?(u="X "+y.x,y.jc?u=y.Hb?u+(", Y "+y.y+" and ZOOM "+y.zoom):u+(" and Y "+y.y):y.Hb&&(u+=" and ZOOM "+y.zoom)):y.jc?(u="Y "+y.y,y.Hb&&(u+=" and ZOOM "+y.zoom)):y.Hb&&(u="ZOOM "+y.zoom),g[g.length]=[e.Vd,"overwrites "+u]);else y.jb&&(g[g.length]=[e.Vd,"only valid at waypoint"]),y.Lc&&(this.a.H=this.a.width/2-y.x),y.jc&&
(this.a.I=this.a.height/2-y.y),y.Hb&&(this.a.zoom=y.zoom),y.Ud&&(this.a.l=y.l),y.kd&&this.a.Ec(y.T,1),y.de&&(this.a.Ra=y.depth/f.Tc+f.Cf),y.se&&(this.a.f=y.f),y.ge&&(this.kb=y.Q),y.He&&(this.n=y.step);y.Hb&&(this.Cg=!0);y.Lc&&(this.Ag=!0);y.jc&&(this.Bg=!0);for(k=0;k<b;k+=1)-1!==q[k]&&(B+=1);if(0<B){this.Te=!0;for(k=0;k<b;k+=1)PatternManager.zh[k]?-1===q[k]?(y=this.lc[k],this.Vi&&(g[g.length]=[Q+" "+k,"definition missing used "+(y>>16)+" "+(y>>8&255)+" "+(y&255)]),q[k]=y,this.Te=!1,this.rd[k]=f.Ui):
this.rd[k]=f.Ti:this.rd[k]=f.yh;this.Yd=this.Te?"(custom)":this.Yd+" (custom*)"}else this.Rc=q=[];this.Sc&&this.Hl(g,Q);-1!==this.Zd&&(this.a.zd=this.Zd);-1!==this.$d&&(this.a.yd=this.$d);2<b&&!this.lb&&(this.Ia=!0);this.Ia&&(q="not possible due to "+e.ag,this.Nc&&(g[g.length]=[e.We,q],this.Nc=!1),-1!==this.Nd&&(g[g.length]=[e.Xf+" "+this.Nd,q]),-1!==this.Aa&&(g[g.length]=[e.zf+" "+this.Aa,q]));this.dh=g.length}this.Sc&&this.Da&&(this.Da.upper=this.a.Ta)};t.prototype.ml=function(){this.Xa=!1;this.Aa=
this.Nd=-1;this.Nc=!1;this.Rc=[]};t.prototype.Ch=function(){this.e=this.hj;this.d=this.Hh;this.a.zoom=this.ij;this.k&&(this.k.current=[Math.log(this.a.zoom/f.o)/Math.log(f.ha/f.o),this.a.zoom]);this.i=this.gj;this.K=!1;this.h.K=!1;this.C.F=!1};t.prototype.zk=function(a){a.K&&(a.Ch(),a.resize())};t.prototype.resize=function(){this.ua.width=this.e;this.ua.height=this.d;this.dd.width=this.e;this.dd.height=this.d;this.Na.textBaseline="middle";this.a.Ji(this.e,this.d)};t.prototype.Xi=function(){this.hj=
this.e;this.Hh=this.d;this.ij=this.a.zoom;this.gj=this.i;this.e>>=2;this.d>>=2;this.a.zoom/=4;this.e&=-8;this.C.F=!0;this.K=this.h.K=!0};t.prototype.Si=function(a,b){var c=null,e=0,h=0,k=0,l=!1,e=0;this.lb=!1;this.Va=[];try{c=PatternManager.create("new",a),this.Mf=c.width,this.If=c.height,this.Qb=c.Qb,this.Lf=c.Gf,this.ye=c.we,this.eh=c.Sb,this.La=PatternManager.La,this.eh===PatternManager.xf&&(this.lb=!0)}catch(r){c=null,this.ye=this.Lf=this.If=this.Mf=0}if(c){for(;this.a.width<this.a.Bd&&(c.width>
this.a.width||c.height>this.a.height);)this.a.Jg(),this.nc+=this.a.width>>2,this.oc+=this.a.height>>2;for(;this.a.width<this.a.Bd&&(this.a.width-c.width<this.e||this.a.height-c.height<this.d);)this.a.Jg(),this.nc+=this.a.width>>2,this.oc+=this.a.height>>2}this.ic="";this.Kd=!1;ColourManager.rc();this.a.Xh();this.lb?this.a.Ec(10,1):this.a.Ec(1,1);this.kb=60;this.n=1;this.a.f=1;this.a.Ra=.1;this.a.l=0;this.a.zoom=6;this.a.H=this.a.width/2;this.a.I=this.a.height/2;this.Bg=this.Ag=this.Cg=!1;this.ze=
this.hd=-1;this.w=[-1,-1,-1,-1,-1,-1,-1,-1];this.K&&(this.Ch(),this.resize());this.Zf=!1;this.Ia=this.Nc=this.ja=this.h.K=!1;this.a.Ka=!1;this.v.F=!1;this.cc.F=!1;this.t.F=!1;this.ma.F=!1;this.Pb.F=!1;this.sa.F=!1;this.P.F=!1;this.Da.F=!1;this.C.F=!1;this.Rb.F=!1;this.Pb.current=[!1];this.cc.current=[!1];this.A=this.i=0;this.me.current=this.Le([this.i],!0,this);this.a.zd=this.a.ni;this.a.yd=this.a.mi;this.a.pc=10;this.Zd=this.$d=-1;this.J.reset();this.yc=this.Xa=!1;if(c){PatternManager.ib&&(this.lc=
ColourManager.Kj(c.Sb),this.lc.length?this.Yd=c.Sb:(this.lc=ColourManager.vg,this.Yd="(default)"));this.ml();c.title&&(this.Xk(c.title,c.Gf),this.Va.length&&(this.A=1),this.K&&b&&(this.K=!1),-1<this.hd&&(this.hd&=-8,this.hd!==this.e&&(this.e=this.hd,l=!0)),-1<this.ze&&this.ze!==this.d&&(this.d=this.ze,l=!0));if(0===this.Rc.length)for(e=0;e<this.lc.length;e+=1)this.rd[e]=PatternManager.zh[e]?f.Ui:f.yh;this.lb?(this.a.Uj(),this.a.wd=!0):this.a.wd=!1;this.Nj(c);this.a.El(c.Lb,c.Ub);this.mc=RuleManager.sl(this.a.Yb,
this.a.Tb);-1===this.mc&&(this.mc=RuleManager.length()-1,RuleManager.Ae(this.mc).name=RuleManager.rl(this.a.Yb,this.a.Tb));this.Pf.Fb=RuleManager.Ae(this.mc).name}this.a.jl(this.lb);this.elapsedTime=this.a.g=0;this.ja?(c&&0<this.Rc.length&&(this.lc=this.Rc),this.a.Yj(this.lc),this.a.eb.reset()):(this.a.kl(this.a.ya),this.lb&&this.a.Pj(c),this.a.ll(this.a.ya),this.a.ul());c&&(c.pb=null);this.wa=this.Ma=!1;e=this.a.zoom;h=this.a.H;k=this.a.I;this.fe();this.Cg&&(this.a.zoom=e);this.Ag&&(this.a.H=h);
this.Bg&&(this.a.I=k);this.Xa&&this.Il(this.Va);this.ei=this.a.zoom;this.k&&(this.k.current=[Math.log(this.a.zoom/f.o)/Math.log(f.ha/f.o),this.a.zoom]);this.nc=this.a.H;this.oc=this.a.I;this.td=this.a.l;this.xa&&(this.xa.current=[this.td,this.td]);this.vd=this.a.yb;this.Da&&(this.Da.current=[this.vd,this.vd]);this.zg=this.kb;e=Math.sqrt((this.zg-f.ob)/(f.tc-f.ob));this.t&&(this.t.current=this.pd([e,e],!0,this));this.jf=this.n;this.ma&&(this.ma.current=this.bg([this.jf,this.jf],!0,this));this.ud=this.a.f;
this.sa&&(this.sa.current=[this.ud,this.ud]);this.xg=this.a.Ra;e=Math.sqrt(this.xg);this.P&&(this.P.current=this.od([e,e],!0,this));this.Jb=!0;this.Nc?(this.ra=!0,this.v.current=f.Dd):(this.ra=!1,this.v.current=f.Ca);this.Pi(this.ra);this.d<f.ue?(this.Pb.F=!0,this.v.x=this.hh+50,this.v.sb=this.v.x,this.t.x=this.Gg+50,this.t.sb=this.t.x,this.ma.x=this.Ah+50):(this.v.x=this.hh,this.v.sb=this.v.x,this.t.x=this.Gg,this.t.sb=this.t.x,this.ma.x=this.Ah);this.ma.sb=this.ma.x;if(l||this.K)this.K&&this.Xi(),
this.resize();c||(PatternManager.Kc?this.h.s.ka("Pattern too big!",f.Fg,!1):this.h.s.ka("Invalid pattern!",f.Fg,!1));this.Va.length?this.i=0:this.A=0;this.La||(this.Ia=!0);this.Ia&&(this.v.F=!0,this.cc.F=!0,this.Rb.F=!0,this.t.F=!0,this.ma.F=!0,this.ja&&(this.sa.F=!0,this.P.F=!0,this.Da.F=!0,this.a.f=1));this.nh(null,6,14,0);this.mb=!1;this.vf="";this.h.Ne=!0;this.h.Id(!0);this.ne&&this.Kh&&(this.Kh.nodeValue=""===this.ic?"LifeViewer":this.Fe(this.ic,30))};registerEvent(window,"load",function(){for(var a=
document.getElementsByTagName("div"),b=0,c=null,e=null,f=null,c=f=e=f=null,b=document.getElementsByTagName("meta"),f=e=0,f=null,f="",c=null,h="",e=0;e<b.length;e+=1)if(f=b[e],f.name===C.tagName&&(C.Lg=!1,C.yf=!1,f=f.content,c=f.match(/\S+/g),2<=c.length&&5>=c.length))for(C.mf=c[0],C.Kf=c[1],f=2;f<c.length;f+=1)switch(c[f]){case "hide":C.Lg=!0;break;case "limit":C.yf=!0;break;default:h=c[f],!isNaN(parseFloat(h))&&isFinite(h)&&(C.Jf=parseFloat(h)|0)}for(b=0;b<a.length;b+=1)if(f=a[b],f.className===C.mf)c=
f.getElementsByTagName(C.Kf)[0],f=f.getElementsByTagName("canvas")[0],typedArrays&&f&&f.getContext?c&&(e=B(c),-1<C.Jf&&c.clientHeight>C.Jf&&(c.style.height=C.Jf+"px"),l(e,f,c.offsetWidth,!1)):C.Lg&&(f.style.display="none");else if(typedArrays&&f.className===C.ek&&f.parentNode.className!==C.mf&&(c=f.getElementsByTagName(C.Kf)[0])){e=B(c);c=!1;h=null;try{h=PatternManager.create("new",e),h.B&&(c=!0)}catch(k){}c&&(e=f.getElementsByTagName("div")[0],f=document.createElement("a"),f.setAttribute("href","#"),
f.innerHTML="Show in Viewer",registerEvent(f,"click",r,!1),e.appendChild(f))}},!1);window.Keywords=e;window.updateViewer=u;window.hideViewer=b})();
